(()=>{var e,t,n,r={79788:(e,t,n)=>{"use strict";n(88146);var r=n(16896),a=n(97335),o=n(60081),i=n(15512),l=n(4527),s=n(76098);const c=(0,s.iv)(["\n  :root {\n    --docsearch-primary-color: ",";\n    --docsearch-text-color: ",";\n    --docsearch-highlight-color: ",";\n    --docsearch-muted-color: #a4a6a8;\n    --docsearch-container-background: rgba(0, 0, 0, 0.5);\n    /* Modal */\n    --docsearch-modal-background: ",";\n    --docsearch-modal-shadow: inset 1px 1px 0 0 #2c2e40, 0 3px 8px 0 #000309;\n    /* Search box */\n    --docsearch-searchbox-background: #2d303e;\n    --docsearch-searchbox-focus-background: #141725;\n    /* Hit */\n    --docsearch-hit-color: ",";\n    --docsearch-hit-active-color: ",";\n    --docsearch-hit-background: ",";\n    --docsearch-hit-shadow: none;\n    /* Footer */\n    --docsearch-footer-background: ",";\n    --docsearch-footer-shadow: inset 0 1px 0 0 rgba(73, 76, 106, 0.5),\n      0 -4px 8px 0 rgba(0, 0, 0, 0.2);\n    /* Keys */\n    --docsearch-key-gradient: linear-gradient(\n      -26.5deg,\n      #32343e 0%,\n      rgb(38, 40, 51) 100%\n    );\n    --docsearch-key-shadow: inset 0 -2px 0 0 #282d55, inset 0 0 1px 1px #51577d,\n      0 2px 2px 0 rgba(3, 4, 9, 0.3);\n\n    // Allotment styling\n    --focus-border: ",";\n    --separator-border: ",";\n    --sash-size: 1rem !important;\n    --sash-hover-size: 0.5rem;\n    .allotment-module_splitView__L-yRc.allotment-module_separatorBorder__x-rDS.allotment-module_vertical__WSwwa\n      > .allotment-module_splitViewContainer__rQnVa\n      > .allotment-module_splitViewView__MGZ6O:not(:first-child)::before {\n      height: 2px;\n    }\n    .allotment-module_splitView__L-yRc.allotment-module_separatorBorder__x-rDS.allotment-module_horizontal__7doS8\n      > .allotment-module_splitViewContainer__rQnVa\n      > .allotment-module_splitViewView__MGZ6O:not(:first-child)::before {\n      width: 2px;\n    }\n  }\n\n  .DocSearch-Button {\n    height: 3rem;\n    border-radius: 0.4rem;\n    color: ",";\n    border: 1px solid var(--docsearch-searchbox-background);\n  }\n\n  .DocSearch-Button:hover {\n    background: ",";\n    box-shadow: none;\n  }\n\n  .DocSearch-Button-Placeholder {\n    font-size: 100%;\n  }\n\n  .DocSearch-Button .DocSearch-Search-Icon {\n    color: ",";\n    width: 1.4rem;\n    height: 1.4rem;\n  }\n\n  .DocSearch-Button:hover .DocSearch-Search-Icon {\n    color: ",";\n  }\n\n  .DocSearch-Button-Key {\n    top: 0;\n    padding: 0 4px;\n    background: ",";\n    border-radius: 2px;\n    box-shadow: none;\n    color: ",";\n    font-size: 1.2rem;\n    font-style: inherit;\n    font-family: inherit;\n    font-weight: 600;\n  }\n\n  .DocSearch-Hit-title {\n    font-size: 100%;\n    overflow: hidden;\n  }\n\n  .DocSearch-Logo .cls-1,\n  .DocSearch-Logo .cls-2 {\n    fill: "," !important;\n  }\n"],(({theme:e})=>e.color.pink),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.pink),(({theme:e})=>e.color.background),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.backgroundLighter),(({theme:e})=>e.color.background),(({theme:e})=>e.color.purple),(({theme:e})=>e.color.backgroundDarker),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.comment),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.gray2),(({theme:e})=>e.color.black),(({theme:e})=>e.color.foreground)),d="18px",u=(0,s.iv)(["\n  .chrome-tabs {\n    box-sizing: border-box;\n    position: relative;\n    height: 46px;\n    padding: 8px 3px 4px 3px;\n    background: #dee1e6;\n    border-radius: 5px 5px 0 0;\n    overflow: hidden;\n    display: flex;\n    width: 100%;\n  }\n  .chrome-tabs * {\n    box-sizing: inherit;\n    font: inherit;\n  }\n  .chrome-tabs .new-tab-button-wrapper {\n    display: inline-flex;\n    align-items: center;\n    background: inherit;\n    pointer-events: auto;\n    height: 100%;\n    width: 80px;\n    position: relative;\n    z-index: 5;\n    border-radius: 17px;\n    pointer-events: auto;\n    transition: padding 0.35s;\n  }\n  .chrome-tabs .new-tab-button-wrapper.overflow-shadow {\n    padding-left: 4px;\n  }\n  .chrome-tabs .new-tab-button-wrapper .new-tab-button {\n    height: 28px;\n    width: 28px;\n    line-height: 0;\n    border-radius: 50%;\n    font-weight: 100;\n    font-size: 16px;\n    padding: 0;\n    border: none;\n    background: none;\n    color: #555;\n    box-shadow: none;\n    transition: background 0.35s;\n    cursor: default;\n  }\n  .chrome-tabs .new-tab-button-wrapper .new-tab-button:hover {\n    background: rgba(150, 150, 150, 0.25);\n  }\n  .chrome-tabs .chrome-tabs-content {\n    position: relative;\n    width: auto;\n    height: 100%;\n    transition: width 0.1s;\n    margin-right: 5px;\n  }\n  .chrome-tabs .chrome-tab {\n    position: absolute;\n    left: 0;\n    height: 36px;\n    width: 240px;\n    border: 0;\n    margin: 0;\n    z-index: 1;\n    pointer-events: none;\n  }\n  .chrome-tabs .chrome-tab-rename {\n    font-family: ",";\n    display: none;\n    position: relative;\n    z-index: 1;\n    border: none;\n    line-height: ",";\n    height: ",';\n    outline: none;\n    border-radius: 4px;\n    background: transparent;\n    color: #f8f8f2;\n    margin-left: 0.6rem;\n    width: 100%;\n  }\n  .chrome-tabs .chrome-tab,\n  .chrome-tabs .chrome-tab * {\n    user-select: none;\n    cursor: default;\n  }\n  .chrome-tabs .chrome-tab .chrome-tab-dividers {\n    position: absolute;\n    top: 7px;\n    bottom: 7px;\n    left: var(--tab-content-margin);\n    right: var(--tab-content-margin);\n  }\n  .chrome-tabs .chrome-tab .chrome-tab-dividers,\n  .chrome-tabs .chrome-tab .chrome-tab-dividers::before,\n  .chrome-tabs .chrome-tab .chrome-tab-dividers::after {\n    pointer-events: none;\n  }\n  .chrome-tabs .chrome-tab .chrome-tab-dividers::before,\n  .chrome-tabs .chrome-tab .chrome-tab-dividers::after {\n    content: "";\n    display: block;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    width: 1px;\n    background: #a9adb0;\n    opacity: 1;\n    transition: opacity 0.2s ease;\n  }\n  .chrome-tabs .chrome-tab .chrome-tab-dividers::before {\n    left: 0;\n  }\n  .chrome-tabs .chrome-tab .chrome-tab-dividers::after {\n    right: 0;\n  }\n  .chrome-tabs .chrome-tab:first-child .chrome-tab-dividers::before,\n  .chrome-tabs .chrome-tab:last-child .chrome-tab-dividers::after {\n    opacity: 0;\n  }\n  .chrome-tabs .chrome-tab .chrome-tab-background {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    pointer-events: none;\n  }\n  .chrome-tabs .chrome-tab .chrome-tab-background > svg {\n    width: 100%;\n    height: 100%;\n  }\n  .chrome-tabs .chrome-tab .chrome-tab-background > svg .chrome-tab-geometry {\n    fill: #f4f5f6;\n  }\n  .chrome-tabs .chrome-tab[active] {\n    z-index: 5;\n  }\n  .chrome-tabs\n    .chrome-tab[active]\n    .chrome-tab-background\n    > svg\n    .chrome-tab-geometry {\n    fill: #fff;\n  }\n  .chrome-tabs .chrome-tab:not([active]) .chrome-tab-background {\n    transition: opacity 0.2s ease;\n    opacity: 0;\n  }\n  @media (hover: hover) {\n    .chrome-tabs .chrome-tab:not([active]):hover {\n      z-index: 2;\n    }\n    .chrome-tabs .chrome-tab:not([active]):hover .chrome-tab-background {\n      opacity: 1;\n    }\n  }\n  .chrome-tabs .chrome-tab.chrome-tab-was-just-added {\n    top: 10px;\n    animation: chrome-tab-was-just-added 120ms forwards ease-in-out;\n  }\n  .chrome-tabs .chrome-tab .chrome-tab-content {\n    position: absolute;\n    display: flex;\n    top: 0;\n    bottom: 0;\n    left: var(--tab-content-margin);\n    right: var(--tab-content-margin);\n    padding: 9px 8px;\n    border-top-left-radius: 8px;\n    border-top-right-radius: 8px;\n    overflow: hidden;\n    pointer-events: all;\n  }\n  .chrome-tabs .chrome-tab[is-mini] .chrome-tab-content {\n    padding-left: 2px;\n    padding-right: 2px;\n  }\n  .chrome-tabs .chrome-tab .chrome-tab-favicon {\n    position: relative;\n    display: flex;\n    align-items: center;\n    align-self: center;\n    justify-content: center;\n    flex-shrink: 0;\n    flex-grow: 0;\n    height: 16px;\n    width: 16px;\n    background-size: 16px;\n    margin-left: 4px;\n  }\n  .chrome-tabs .chrome-tab[is-small] .chrome-tab-favicon {\n    margin-left: 0;\n  }\n  .chrome-tabs .chrome-tab[is-mini]:not([active]) .chrome-tab-favicon {\n    margin-left: auto;\n    margin-right: auto;\n  }\n  .chrome-tabs .chrome-tab[is-mini][active] .chrome-tab-favicon {\n    display: none;\n  }\n  .chrome-tabs .chrome-tab .chrome-tab-title {\n    flex: 1;\n    vertical-align: top;\n    align-self: center;\n    overflow: hidden;\n    white-space: nowrap;\n    margin-left: 4px;\n    height: ',";\n    line-height: ",";\n    color: #5f6368;\n    -webkit-mask-image: linear-gradient(\n      90deg,\n      #000 0%,\n      #000 calc(100% - 24px),\n      transparent\n    );\n    mask-image: linear-gradient(\n      90deg,\n      #000 0%,\n      #000 calc(100% - 24px),\n      transparent\n    );\n  }\n  .chrome-tabs .chrome-tab[is-small] .chrome-tab-title {\n    margin-left: 0;\n  }\n  .chrome-tabs .chrome-tab .chrome-tab-favicon + .chrome-tab-title,\n  .chrome-tabs .chrome-tab[is-small] .chrome-tab-favicon + .chrome-tab-title {\n    margin-left: 8px;\n  }\n  .chrome-tabs .chrome-tab[is-smaller] .chrome-tab-favicon + .chrome-tab-title,\n  .chrome-tabs .chrome-tab[is-mini] .chrome-tab-title {\n    display: none;\n  }\n  .chrome-tabs .chrome-tab[active] .chrome-tab-title {\n    color: #45474a;\n  }\n  .chrome-tabs .chrome-tab .chrome-tab-drag-handle {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    border-top-left-radius: 8px;\n    border-top-right-radius: 8px;\n  }\n  .chrome-tabs .chrome-tab .chrome-tab-close {\n    align-self: center;\n    flex-grow: 0;\n    flex-shrink: 0;\n    position: relative;\n    width: 16px;\n    height: 16px;\n    border-radius: 50%;\n    background-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'><path stroke='rgba(0, 0, 0, .65)' stroke-linecap='square' stroke-width='1.5' d='M0 0 L8 8 M8 0 L0 8'></path></svg>\");\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: 8px 8px;\n  }\n  @media (hover: hover) {\n    .chrome-tabs .chrome-tab .chrome-tab-close:hover {\n      background-color: #e8eaed;\n    }\n    .chrome-tabs .chrome-tab .chrome-tab-close:hover:active {\n      background-color: #dadce0;\n    }\n  }\n  @media not all and (hover: hover) {\n    .chrome-tabs .chrome-tab .chrome-tab-close:active {\n      background-color: #dadce0;\n    }\n  }\n  @media (hover: hover) {\n    .chrome-tabs\n      .chrome-tab:not([active])\n      .chrome-tab-close:not(:hover):not(:active) {\n      opacity: 0.8;\n    }\n  }\n  .chrome-tabs .chrome-tab[is-smaller] .chrome-tab-close {\n    margin-left: auto;\n  }\n  .chrome-tabs .chrome-tab[is-mini]:not([active]) .chrome-tab-close {\n    display: none;\n  }\n  .chrome-tabs .chrome-tab[is-mini][active] .chrome-tab-close {\n    margin-left: auto;\n    margin-right: auto;\n  }\n  @-moz-keyframes chrome-tab-was-just-added {\n    to {\n      top: 0;\n    }\n  }\n  @-webkit-keyframes chrome-tab-was-just-added {\n    to {\n      top: 0;\n    }\n  }\n  @-o-keyframes chrome-tab-was-just-added {\n    to {\n      top: 0;\n    }\n  }\n  @keyframes chrome-tab-was-just-added {\n    to {\n      top: 0;\n    }\n  }\n  .chrome-tabs.chrome-tabs-is-sorting .chrome-tab:not(.chrome-tab-is-dragging),\n  .chrome-tabs:not(.chrome-tabs-is-sorting)\n    .chrome-tab.chrome-tab-was-just-dragged {\n    transition: transform 120ms ease-in-out;\n  }\n  .chrome-tabs .chrome-tabs-bottom-bar {\n    position: absolute;\n    bottom: 0;\n    height: 4px;\n    left: 0;\n    width: 100%;\n    background: #fff;\n    z-index: 10;\n  }\n  .chrome-tabs-optional-shadow-below-bottom-bar {\n    position: relative;\n    height: 1px;\n    width: 100%;\n    background-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1' height='1' viewBox='0 0 1 1'><rect x='0' y='0' width='1' height='1' fill='rgba(0, 0, 0, .17)'></rect></svg>\");\n    background-size: 1px 1px;\n    background-repeat: repeat-x;\n    background-position: 0% 0%;\n  }\n\n  .chrome-tabs.chrome-tabs-dark-theme {\n    background: #282a36;\n  }\n  .chrome-tabs.chrome-tabs-dark-theme .new-tab-button-wrapper.overflow-shadow {\n    padding-left: 4px;\n  }\n  .chrome-tabs.chrome-tabs-dark-theme .new-tab-button-wrapper .new-tab-button {\n    color: rgba(200, 200, 200, 0.5);\n  }\n  .chrome-tabs.chrome-tabs-dark-theme\n    .new-tab-button-wrapper\n    .new-tab-button:hover {\n    background: rgba(154, 160, 166, 0.25);\n  }\n  .chrome-tabs.chrome-tabs-dark-theme .chrome-tab .chrome-tab-dividers::before,\n  .chrome-tabs.chrome-tabs-dark-theme .chrome-tab .chrome-tab-dividers::after {\n    background: #4a4d51;\n  }\n  .chrome-tabs.chrome-tabs-dark-theme\n    .chrome-tab\n    .chrome-tab-background\n    > svg\n    .chrome-tab-geometry {\n    fill: #292b2e;\n  }\n  .chrome-tabs.chrome-tabs-dark-theme\n    .chrome-tab[active]\n    .chrome-tab-background\n    > svg\n    .chrome-tab-geometry {\n    fill: #44475a;\n  }\n  .chrome-tabs.chrome-tabs-dark-theme .chrome-tab .chrome-tab-title {\n    color: #9ca1a7;\n  }\n  .chrome-tabs.chrome-tabs-dark-theme .chrome-tab[active] .chrome-tab-title {\n    color: #f1f3f4;\n  }\n  .chrome-tabs.chrome-tabs-dark-theme .chrome-tab .chrome-tab-close {\n    background-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'><path stroke='rgba(154, 160, 166, .8)' stroke-linecap='square' stroke-width='1.5' d='M0 0 L8 8 M8 0 L0 8'></path></svg>\");\n  }\n  .chrome-tabs.chrome-tabs-dark-theme .chrome-tab .chrome-tab-close:hover {\n    background-color: #5f6368;\n    background-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'><path stroke='rgba(255, 255, 255, .7)' stroke-linecap='square' stroke-width='1.5' d='M0 0 L8 8 M8 0 L0 8'></path></svg>\");\n  }\n  .chrome-tabs.chrome-tabs-dark-theme\n    .chrome-tab\n    .chrome-tab-close:hover:active {\n    background-color: #80868b;\n    background-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'><path stroke='rgba(255, 255, 255, .9)' stroke-linecap='square' stroke-width='1.5' d='M0 0 L8 8 M8 0 L0 8'></path></svg>\");\n  }\n  .chrome-tabs.chrome-tabs-dark-theme .chrome-tabs-bottom-bar {\n    background: #323639;\n  }\n\n  @media only screen and (-webkit-min-device-pixel-ratio: 2),\n    only screen and (min--moz-device-pixel-ratio: 2),\n    only screen and (-o-min-device-pixel-ratio: 2/1),\n    only screen and (min-device-pixel-ratio: 2),\n    only screen and (min-resolution: 192dpi),\n    only screen and (min-resolution: 2dppx) {\n    .chrome-tabs-optional-shadow-below-bottom-bar {\n      background-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='2' height='2' viewBox='0 0 2 2'><rect x='0' y='0' width='2' height='1' fill='rgba(0, 0, 0, .27)'></rect></svg>\");\n    }\n  }\n"],(({theme:e})=>e.font),d,d,d,d),m=(0,s.vJ)(["\n  ","\n  ","\n\n  body {\n    color: ",";\n  }\n"],c,u,(({theme:e})=>e.color.foreground)),g=(0,s.F4)(["\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n"]),p=(0,s.iv)(["\n  animation: "," 1.5s cubic-bezier(0.62, 0.28, 0.23, 0.99) infinite;\n"],g);let f=function(e){return e.MAIN="telemetry",e.CONFIG="telemetry_config",e.WAL="sys.telemetry_wal",e}({});const h="https://fara.questdb.io",b="26px";var E=n(32981),y=n(50307),w=n(95886),v=n(17517),C=n(63137);const x=(e,t={},n=!0)=>{const r="/"===e[0]?"":"/",a=n?`${window.location.origin}${r}${e}`:e;return(0,y.U)(a,t).pipe((0,w.w)((e=>e.ok?e.headers.get("content-type")?.startsWith("application/json")?e.json():Promise.resolve({}):(0,E.of)({error:!0,message:e.statusText}))),(0,v.K)((e=>(console.error(e),(0,E.of)({error:!0,message:e.message})))),(0,C.U)((e=>e.error?e:{data:e,error:!1})))};var _=n(61318);const k=new class{constructor(){this.emitter=new _.Z}publish(e,t){this.emitter.emit(e,t)}subscribe(e,t){this.emitter.on(e,t)}unsubscribe(e,t){this.emitter.off(e,t)}};let S=function(e){return e.MSG_ACTIVE_SIDEBAR="active.panel",e.MSG_EDITOR_FOCUS="editor.focus",e.MSG_EDITOR_INSERT_COLUMN="editor.insert.column",e.GRID_FOCUS="grid.focus",e.MSG_CHART_DRAW="chart.draw",e.MSG_QUERY_CANCEL="query.in.cancel",e.MSG_QUERY_DATASET="query.out.dataset",e.MSG_QUERY_ERROR="query.out.error",e.MSG_QUERY_EXEC="query.in.exec",e.MSG_QUERY_FIND_N_EXEC="query.build.execute",e.MSG_QUERY_OK="query.out.ok",e.MSG_QUERY_RUNNING="query.out.running",e.MSG_QUERY_SCHEMA="query.out.schema",e.MSG_CONNECTION_OK="query.connection.ok",e.MSG_CONNECTION_ERROR="query.connection.error",e.MSG_CONNECTION_UNAUTHORIZED="query.connection.unauthorized",e.MSG_CONNECTION_FORBIDDEN="query.connection.forbidden",e.REACT_READY="react.ready",e}({}),T=function(e){return e.AUTH_PAYLOAD="AUTH_PAYLOAD",e.AUTH_REFRESH_TOKEN="AUTH_REFRESH_TOKEN",e.OAUTH_REDIRECT_COUNT="oauth.redirect.count",e.PKCE_CODE_VERIFIER="pkce.code.verifier",e.QUERY_TEXT="query.text",e.EDITOR_LINE="editor.line",e.EDITOR_COL="editor.col",e.EXAMPLE_QUERIES_VISITED="editor.exampleQueriesVisited",e.EDITOR_SPLITTER_BASIS="splitter.editor.basis",e.RESULTS_SPLITTER_BASIS="splitter.results.basis",e.REST_TOKEN="rest.token",e.BASIC_AUTH_HEADER="basic.auth.header",e.AUTO_REFRESH_TABLES="auto.refresh.tables",e}({}),N=function(e){return e.DDL="ddl",e.DML="dml",e.DQL="dql",e.ERROR="error",e.NOTICE="notice",e}({}),O=function(e){return e.DISK_FULL="DISK FULL",e.TOO_MANY_OPEN_FILES="TOO MANY OPEN FILES",e.OUT_OF_MMAP_AREAS="OUT OF MMAP AREAS",e.OUT_OF_MEMORY="OUT OF MEMORY",e.UNSUPPORTED_FILE_SYSTEM="UNSUPPORTED FILE SYSTEM",e}({}),R=function(e){return e.EXISTS="Exists",e.DOES_NOT_EXIST="Does not exist",e.RESERVED_NAME="Reserved name",e}({});class I{_controllers=[];commonHeaders={};static refreshTokenPending=!1;static numOfPendingQueries=0;refreshTokenMethod=async()=>({});tokenNeedsRefresh(){const e=localStorage.getItem(T.AUTH_PAYLOAD),t=localStorage.getItem(T.AUTH_REFRESH_TOKEN);if(e){const n=JSON.parse(e);return new Date(n.expires_at).getTime()-(new Date).getTime()<3e4&&""!==t}}setCommonHeaders(e){this.commonHeaders=e}refreshAuthToken=async()=>{I.refreshTokenPending=!0,await new Promise((e=>{const t=setInterval((async()=>{if(0===I.numOfPendingQueries){clearInterval(t);const n=await this.refreshTokenMethod();return n.access_token&&this.setCommonHeaders({...this.commonHeaders,Authorization:`Bearer ${n.access_token}`}),I.refreshTokenPending=!1,e(!0)}}),50)}))};static encodeParams=e=>Object.keys(e).filter((t=>void 0!==e[t])).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&");abort=()=>{this._controllers.forEach((e=>{e.abort()})),this._controllers=[]};static transformQueryRawResult=e=>{if(e.type===N.DQL){const{columns:t,count:n,dataset:r,timings:a}=e,o=r.map((e=>e.reduce(((e,n,r)=>({...e,[t[r].name]:n})),{})));return{columns:t,count:n,data:o,timings:a,type:N.DQL,...e.explain?{explain:e.explain}:{}}}return e};async query(e,t){const n=await this.queryRaw(e,t);return I.transformQueryRawResult(n)}async mockQueryResult(e){return I.transformQueryRawResult(e)}async queryRaw(e,t){const n=new AbortController,r={count:!0,src:"con",query:e,timings:!0,version:"2",...t};let a;this._controllers.push(n),this.tokenNeedsRefresh()&&!I.refreshTokenPending&&await this.refreshAuthToken(),I.refreshTokenPending&&await new Promise((e=>{const t=setInterval((()=>{if(!I.refreshTokenPending)return clearInterval(t),e(!0)}),50)})),I.numOfPendingQueries++;const o=new Date;try{a=await fetch(`exec?${I.encodeParams(r)}`,{signal:n.signal,headers:this.commonHeaders})}catch(t){const n={position:-1,query:e,type:N.ERROR},r={...n,error:"An error occured, please try again"};return t instanceof DOMException?Promise.reject({...n,error:20===t.code?"Cancelled by user":JSON.stringify(t).toString()}):(k.publish(S.MSG_CONNECTION_ERROR,r),Promise.reject(r))}finally{const e=this._controllers.indexOf(n);e>=0&&this._controllers.splice(e,1),I.numOfPendingQueries--}if(a.ok||400===a.status||a.ok&&403===a.status){const t=1e6*((new Date).getTime()-o.getTime()),n=await a.json();return k.publish(S.MSG_CONNECTION_OK),403===a.status&&k.publish(S.MSG_CONNECTION_FORBIDDEN,n),n.ddl?{query:e,type:N.DDL}:n.dml?{query:e,type:N.DML}:n.error?Promise.reject({...n,type:N.ERROR}):n.notice?{...n,type:N.NOTICE}:{...n,timings:{...n.timings,fetch:t},type:N.DQL}}const i={status:a.status,error:a.statusText};if((e=>408===e.status||e.status>=500)(a)&&(i.error=`QuestDB is not reachable [${a.status}]`,i.position=-1,i.query=e,i.type=N.ERROR,k.publish(S.MSG_CONNECTION_ERROR,i)),401===a.status&&(i.error="Unauthorized",k.publish(S.MSG_CONNECTION_UNAUTHORIZED,i)),403===a.status){const e=(await a.text()).trim();if(e.startsWith("{")){const t=JSON.parse(e);i.error=t.error}else i.error=e;k.publish(S.MSG_CONNECTION_FORBIDDEN,i)}return Promise.reject(i)}async showTables(){const e=await this.query("tables();");return e.type===N.DQL?{...e,data:e.data.slice().sort(((e,t)=>{const n=e.table_name??e.name,r=t.table_name??t.name;return n>r?1:n<r?-1:0})).map((e=>({...e,table_name:e.table_name??e.name})))}:e}async showColumns(e){return await this.query(`SHOW COLUMNS FROM '${e}';`)}async checkCSVFile(e){try{const t=await fetch(`chk?${I.encodeParams({f:"json",j:e,version:"2"})}`,{headers:this.commonHeaders});return await t.json()}catch(e){throw e}}async uploadCSVFile({file:e,name:t,settings:n,schema:r,partitionBy:a,timestamp:o,onProgress:i}){const l=new FormData;r&&l.append("schema",JSON.stringify(r)),l.append("data",e);const s={fmt:"json",name:t,...a?{partitionBy:a}:{},...o?{timestamp:o}:{},...n?Object.keys(n).reduce(((e,t)=>({...e,[t]:n[t].toString()})),{}):{}};return new Promise(((e,t)=>{let n=new XMLHttpRequest;n.open("POST",`imp?${new URLSearchParams(s)}`),Object.keys(this.commonHeaders).forEach((e=>{n.setRequestHeader(e,this.commonHeaders[e])})),n.upload.addEventListener("progress",(e=>{let t=e.loaded/e.total*100;i(t)})),n.onload=r=>{200===n.status?e(JSON.parse(n.response)):t({status:n.status,statusText:n.statusText})},n.onerror=()=>{t({status:n.status,statusText:n.statusText})},n.send(l)}))}async exportQueryToCsv(e){try{const t=await fetch(`exp?${I.encodeParams({query:e,version:"2"})}`,{headers:this.commonHeaders}),n=await t.blob(),r=t.headers.get("Content-Disposition")?.split("=")[1],a=window.URL.createObjectURL(n),o=document.createElement("a");o.href=a,o.download=r?r.replaceAll('"',""):`questdb-query-${(new Date).getTime()}.csv`,o.click(),window.URL.revokeObjectURL(a)}catch(e){throw e}}async getLatestRelease(){try{const e=await fetch("https://github-api.questdb.io/github/latest");return await e.json()}catch(e){return Promise.reject(e)}}async sendFeedback({email:e,message:t,telemetryConfig:n}){try{const r=await fetch("https://cloud.questdb.com/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,message:t,telemetryConfig:n,category:"web-console"})});return await r.json()}catch(e){throw e}}async getNews({category:e,telemetryConfig:t}){try{const n=await fetch(`https://cloud.questdb.com/api/news?category=${e}&telemetryUserId=${t?.id}`);return await n.json()}catch(e){return Promise.reject(e)}}}const P=(e,t,n="...")=>{if(e.length<=t)return e;const r=Math.floor(e.length/2),a=e.length-t+n.length;return e.slice(0,r-Math.floor(a/2))+n+e.slice(r+Math.ceil(a/2))},A=e=>t=>t?t.theme.color[e]:void 0;var L=n(57188);const D=(e,t)=>(0,L.WU)(e,{language:"postgresql",...t}),M={isMacintosh:!1,isWindows:!1,isIOS:!1,isLinux:!1};function B(e,t){return t.reduce(((t,n)=>(n in e&&(t[n]=e[n]),t)),{})}"object"==typeof navigator&&(M.isMacintosh=-1!==navigator.userAgent.indexOf("Macintosh"),M.isWindows=navigator.userAgent.indexOf("Windows")>=0,M.isIOS=(navigator.userAgent.indexOf("Macintosh")>=0||navigator.userAgent.indexOf("iPad")>=0||navigator.userAgent.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0);const z=()=>navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language;var q=n(14245),F=n(20166),Z=n(47132),U=n(68750),j=n(79266),H=n(69666),G=n(46053),V=n(58198);const W=e=>({"en-GB":q.Z,"en-US":F.Z,"fr-FR":Z.Z,"es-ES":U.Z,"de-DE":j.Z,"ja-JP":H.Z,"ko-KR":G.Z,"zh-CN":V.Z}[e]||F.Z),$=e=>Array.from(new Set(e));let Q=function(e){return e[e.SLOW=1500]="SLOW",e[e.REG=200]="REG",e[e.FAST=70]="FAST",e}({});const Y=(e,t)=>(0,s.vJ)(["\n  .","-enter {\n    opacity: 0;\n  }\n\n  .","-enter-active {\n    opacity: 1;\n    transition: all ","ms;\n  }\n\n  .","-exit {\n    opacity: 1;\n  }\n\n  .","-exit-active {\n    opacity: 0;\n    transition: all ","ms;\n  }\n"],e,e,t,e,e,t),K=(0,s.iv)(["\n  .collapse-enter {\n    max-height: 0;\n  }\n\n  .collapse-enter-active {\n    max-height: ","px;\n    transition: all ","ms;\n  }\n\n  .collapse-exit {\n    max-height: ","px;\n  }\n\n  .collapse-exit-active {\n    max-height: 0;\n    transition: all ","ms;\n  }\n"],(({_height:e})=>e),(({duration:e})=>e||Q.REG),(({_height:e})=>e),(({duration:e})=>e||Q.REG)),X=(Q.FAST,Q.FAST,(0,s.iv)(["\n  transition: all ","ms cubic-bezier(0, 0, 0.38, 0.9);\n"],Q.FAST));function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(this,arguments)}const ee={fontSize:"md",size:"md",type:"button"},te=({size:e})=>{switch(e){case"sm":return"2rem";case"md":default:return"3rem";case"lg":return"5rem"}},ne=(0,s.iv)(["\n  display: flex;\n  height: ",";\n  padding: 0 1rem;\n  align-items: center;\n  justify-content: center;\n  background: transparent;\n  border-radius: 4px;\n  border: 1px solid transparent;\n  outline: 0;\n  font-size: ",";\n  font-weight: 400;\n  line-height: 1.15;\n  cursor: pointer;\n  ",";\n\n  svg + span {\n    margin-left: 0.5rem;\n  }\n"],te,(({fontSize:e,theme:t})=>t.fontSize[e]),X),re=(e,t,n)=>(0,s.iv)(["\n    background: ",";\n    color: ",";\n    border-color: ",";\n\n    &:focus {\n      box-shadow: inset 0 0 0 1px ",";\n    }\n\n    &:hover:not([disabled]) {\n      background: ",";\n      color: ",";\n      border-color: ",";\n    }\n\n    &:active:not([disabled]) {\n      background: ",";\n      filter: brightness(90%);\n    }\n\n    &:disabled {\n      cursor: not-allowed;\n      background: ",";\n      color: ",";\n      border-color: ",";\n    }\n  "],A(e.background),A(e.color),A(e.border),A("foreground"),A(t.background),A(t.color),A(t.border),A(t.background),A(n.background),A(n.color),A(n.border)),ae=s.ZP.button.withConfig({displayName:"Button__PrimaryButtonStyled"})(["\n  ",";\n  ",";\n"],ne,re({background:"selection",border:"selection",color:"foreground"},{background:"comment",border:"selection",color:"foreground"},{background:"selection",border:"gray1",color:"gray1"})),oe=(e,t)=>r.createElement(ae,J({},ee,e,{ref:t}));(0,r.forwardRef)(oe).defaultProps=ee;const ie=s.ZP.button.withConfig({displayName:"Button__SecondaryButtonStyled"})(["\n  ",";\n  ",";\n"],ne,re({background:"backgroundLighter",border:"backgroundLighter",color:"foreground"},{background:"comment",border:"comment",color:"foreground"},{background:"gray1",border:"gray1",color:"background"})),le=(e,t)=>r.createElement(ie,J({},ee,e,{ref:t})),se=(0,r.forwardRef)(le);se.defaultProps=ee;const ce=s.ZP.button.withConfig({displayName:"Button__SuccessButtonStyled"})(["\n  ",";\n  ",";\n"],ne,re({background:"selection",border:"selection",color:"green"},{background:"comment",border:"selection",color:"green"},{background:"selection",border:"gray1",color:"gray1"})),de=(e,t)=>r.createElement(ce,J({},ee,e,{ref:t}));(0,r.forwardRef)(de).defaultProps=ee;const ue=s.ZP.button.withConfig({displayName:"Button__ErrorButtonStyled"})(["\n  ",";\n  ",";\n"],ne,re({background:"selection",border:"selection",color:"red"},{background:"comment",border:"selection",color:"red"},{background:"selection",border:"gray1",color:"gray1"})),me=(e,t)=>r.createElement(ue,J({},ee,e,{ref:t}));(0,r.forwardRef)(me).defaultProps=ee;const ge=s.ZP.button.withConfig({displayName:"Button__TransparentButtonStyled"})(["\n  ",";\n  ",";\n"],ne,re({background:"transparent",border:"transparent",color:"foreground"},{background:"comment",border:"transparent",color:"foreground"},{background:"selection",border:"gray1",color:"gray1"})),pe=(e,t)=>r.createElement(ge,J({},ee,e,{ref:t})),fe=(0,r.forwardRef)(pe);fe.defaultProps=ee;const he=s.ZP.div.withConfig({displayName:"CenteredLayout__Root"})(["\n  display: grid;\n  place-items: center;\n  height: 100vh;\n  background: ",";\n  color: ",";\n"],(({theme:e})=>e.color.backgroundDarker),(({theme:e})=>e.color.foreground)),be=({children:e})=>r.createElement(he,null,e);var Ee=n(67692),ye=n(92941),we=n(44947),ve=n(38638);const Ce=s.ZP.div.withConfig({displayName:"group-header__GroupHeader"})(["\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  padding: 2rem 0;\n  border-bottom: 0.1rem "," solid;\n"],(({theme:e})=>e.color.selection)),xe=s.ZP.div.withConfig({displayName:"group-item__GroupItem"})(["\n  display: flex;\n  ",";\n  padding: 2rem;\n\n  &:not(:last-child) {\n    border-bottom: 0.1rem "," solid;\n  }\n\n  &:last-child {\n    border-bottom-left-radius: ",";\n    border-bottom-right-radius: ",";\n  }\n\n  ","\n"],(({direction:e})=>"column"===e?"\n    flex-direction: column;\n    align-items: flex-start;\n    flex-wrap: wrap;\n    width: 100%;\n  ":"\n    justify-content: space-between;\n    flex-wrap: initial;\n  "),(({theme:e})=>e.color.backgroundLighter),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e,withLink:t})=>t&&`\n    &:hover {\n      cursor: pointer;\n      background-color: ${e.color.black};\n    }\n  `)),_e=s.ZP.div.attrs((e=>({flexDirection:e.flexDirection||"row",gap:e.gap||"1rem",margin:e.margin||"0",align:e.align||"center",justifyContent:e.justifyContent||"flex-start"}))).withConfig({displayName:"Box"})(["\n  display: flex;\n  flex-direction: ",";\n  gap: ",";\n  margin: ",";\n  align-items: ",";\n  justify-content: ",";\n"],(({flexDirection:e})=>e),(({gap:e})=>e),(({margin:e})=>e),(({align:e})=>e),(({justifyContent:e})=>e)),ke=(0,s.ZP)(_e).attrs({gap:"1rem",justifyContent:"flex-end",align:"center"}).withConfig({displayName:"actions__Actions"})(["\n  width: 100%;\n  padding-left: 2rem;\n  padding-right: 2rem;\n  height: 7rem;\n"]),Se=(0,s.ZP)(_e).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"content-wrapper__ContentWrapper"})(["\n  width: 100%;\n  /*\n    4.5rem = top bar\n    4.5rem = drawer title\n    4rem = footer\n  */\n  height: ",";\n  form {\n    width: 100%;\n    height: 100%;\n  }\n"],(({mode:e})=>"side"===e?"calc(100vh - 4.5rem - 4.5rem - 4rem)":"calc(100vh - 4.5rem)")),Te=s.ZP.div.withConfig({displayName:"PaneMenu"})(["\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  height: 4.5rem;\n  padding: 0 1rem;\n  align-items: center;\n  background: ",";\n  border-top: 1px solid transparent;\n"],A("backgroundLighter"));function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ne.apply(this,arguments)}const Oe=(0,s.iv)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]),Re=(0,s.iv)(["\n  color: ",";\n  font-family: ",";\n  font-size: ",";\n  font-style: ",";\n  font-weight: ",";\n  text-transform: ",";\n  ",";\n  ",";\n"],(e=>e.color?A(e.color):"inherit"),(({code:e,theme:t})=>e&&t.fontMonospace),(({size:e,theme:t})=>e?t.fontSize[e]:"inherit"),(({_style:e})=>e??"inherit"),(({weight:e})=>e),(({transform:e})=>e),(({align:e})=>e?`text-align: ${e}`:""),(({ellipsis:e})=>e&&Oe)),Ie=s.ZP.label.withConfig({displayName:"Text__TextStyled"})(["\n  ",";\n"],Re),Pe=({type:e,...t})=>r.createElement(Ie,Ne({as:e},t,{type:e}));Pe.defaultProps={color:"black",type:"span"};const Ae=s.ZP.div.withConfig({displayName:"header__Root"})(["\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  height: 4.5rem;\n  padding: 0 1rem;\n  align-items: center;\n  background: ",";\n  border-top: 1px solid transparent;\n  z-index: 5;\n\n  ","\n"],A("backgroundLighter"),(({shadow:e})=>e&&"\n      box-shadow: 0 2px 10px 0 rgba(23, 23, 23, 0.65)\n  ")),Le=(0,s.ZP)(Pe).withConfig({displayName:"header__Title"})(["\n  display: flex;\n  align-items: center;\n  padding-left: 1rem;\n  font-size: 1.8rem;\n  font-weight: 600;\n"]),De=({children:e})=>e;function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Me.apply(this,arguments)}De.Header=({title:e,afterTitle:t,shadow:n})=>r.createElement(Ae,{shadow:n},r.createElement(Le,{color:"foreground"},e),t);const Be=(0,s.iv)(["\n  @keyframes animateShow {\n    from {\n      transform: translateX(100%);\n    }\n    to {\n      transform: translateX(0);\n    }\n  }\n"]),ze=(0,s.iv)(["\n  @keyframes animateHide {\n    from {\n      transform: translateX(0);\n    }\n    to {\n      transform: translateX(100%);\n    }\n  }\n"]),qe=(0,s.ZP)(Ee.VY).attrs({forceMount:!0}).withConfig({displayName:"Drawer__DrawerContent"})(["\n  background-color: ",";\n  border-left: 0.2rem "," solid;\n  position: ",";\n  top: 0;\n  right: 0;\n  width: ",";\n  max-width: 100%;\n  height: 100%;\n  overflow: auto;\n  z-index: 101;\n\n  ","\n  ","\n\n  ",";\n"],(({theme:e})=>e.color.backgroundLighter),(({theme:e})=>e.color.background),(({mode:e})=>"modal"===e?"fixed":"inherit"),(({width:e})=>e??"50rem"),Be,ze,(({mode:e})=>"modal"===e&&'\n  &[data-state="open"] {\n    animation: animateShow 0.5s cubic-bezier(0.16, 1, 0.3, 1);\n  }\n\n  &[data-state="closed"] {\n    animation: animateHide 0.5s cubic-bezier(0.16, 1, 0.3, 1);\n  }\n\n  &:focus {\n    outline: none;\n  }\n  ')),Fe=(0,s.ZP)(Ee.x8).attrs({"aria-label":"Close",asChild:!0}).withConfig({displayName:"Drawer__StyledClose"})(["\n  appearance: initial;\n  margin-left: auto;\n  cursor: pointer;\n  color: ",";\n"],(({theme:e})=>e.color.foreground)),Ze=({mode:e="modal",children:t,trigger:n,title:a,afterTitle:o,width:i,open:l,onOpenChange:s,onDismiss:c,withCloseButton:d,closeOnOverlayClick:u=!0,closeOnEscape:m=!0})=>r.createElement(Ee.fC,{onOpenChange:s,open:l,modal:"modal"===e},r.createElement(Ee.xz,{asChild:!0},r.createElement(ye.A,null,n)),r.createElement(Ee.h_,"side"===e&&{container:document.getElementById("side-panel-right")},"modal"===e&&r.createElement(ye.A,null,r.createElement(we.a,{primitive:Ee.aV})),r.createElement(qe,Me({mode:e,width:i},c&&{onEscapeKeyDown:m?c:void 0,onInteractOutside:u?c:void 0},"side"===e&&{onInteractOutside:e=>e.preventDefault(),onEscapeKeyDown:e=>e.preventDefault(),onPointerDownOutside:e=>e.preventDefault()}),(a||d)&&r.createElement(De.Header,Me({title:a,afterTitle:o},d&&{afterTitle:r.createElement(Fe,c?{onClick:c}:{},r.createElement(ve.x,{size:"18px"}))})),t)));Ze.GroupHeader=Ce,Ze.GroupItem=xe,Ze.Actions=ke,Ze.ContentWrapper=Se;const Ue=(e,t)=>{const[n,a]=(0,r.useState)(!1),o=n=>{n.key===e&&(t?.preventDefault&&n.preventDefault(),a(!0))},i=n=>{n.key===e&&(t?.preventDefault&&n.preventDefault(),a(!1))};return(0,r.useEffect)((()=>(window.addEventListener("keydown",o),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",o),window.removeEventListener("keyup",i)}))),n},je=(e,t)=>{(0,r.useEffect)((()=>{const n=Object.entries(t).reduce(((e,[t,n])=>`${e} ${t}: ${n};`),"z-index: 1000;");e.setAttribute("style",n)}),[e,t])};var He=n(31095),Ge=function(e){return e[e.SM=767]="SM",e}(Ge||{});const Ve=(0,r.createContext)({sm:window.innerWidth<=Ge.SM}),We=({children:e})=>{const[t,n]=(0,r.useState)({sm:window.innerWidth<=Ge.SM}),[a,i]=(0,r.useState)();return(0,r.useEffect)((()=>{const e=(0,He.P)(16,(()=>{i({sm:window.innerWidth<=Ge.SM})}));return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,r.useEffect)((()=>{a&&!(0,o.wU)(a,t)&&n(a)}),[t,a]),r.createElement(Ve.Provider,{value:t},e)},$e=()=>(0,r.useContext)(Ve),Qe=(e,t,n,a)=>{(0,r.useEffect)((()=>{if(clearTimeout(n.current),t&&!document.body.contains(e))return document.body.appendChild(e),void(null!=a&&a());t||(n.current=window.setTimeout((()=>{document.body.contains(e)&&document.body.removeChild(e)}),Q.REG))}),[t,e,n,a])},Ye=({icon:e,tooltip:t,placement:n})=>r.createElement(st,{placement:n,trigger:e},r.createElement(St,null,t));function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ke.apply(this,arguments)}const Xe={size:"md",type:"text"},Je=s.ZP.input.withConfig({displayName:"Input__InputStyled"})(["\n  height: ",";\n  border: none;\n  padding: 0 1rem;\n  line-height: 1.5;\n  outline: none;\n  background: ",";\n  border-radius: 4px;\n  color: ",";\n\n  &:focus {\n    box-shadow: inset 0 0 0 1px ",";\n  }\n\n  &::placeholder {\n    color: ",";\n  }\n"],te,A("selection"),A("foreground"),A("foreground"),A("gray2")),et=(e,t)=>r.createElement(Je,Ke({},Xe,e,{ref:t}));(0,r.forwardRef)(et).defaultProps=Xe;const tt=Pe.defaultProps,nt=s.ZP.a.withConfig({displayName:"Link__Wrapper"})(["\n  ",";\n  text-decoration: none;\n  line-height: 1;\n\n  &:hover:not([disabled]),\n  &:focus:not([disabled]) {\n    color: ",";\n  }\n"],Re,(e=>e.hoverColor?A(e.hoverColor):"inherit")),rt=e=>r.createElement(nt,e);rt.defaultProps=tt;const at=s.ZP.div.withConfig({displayName:"PaneContent"})(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  background: ",";\n  overflow: auto;\n"],A("backgroundLighter")),ot=s.ZP.div.withConfig({displayName:"PaneWrapper"})(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n"]);var it=n(46317),lt=n(1264);const st=({children:e,delay:t,modifiers:n,placement:o,trigger:i})=>{const[l]=(0,r.useState)(document.createElement("div")),s=(0,r.useRef)(),c=(0,r.useRef)(),[d,u]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),[p,f]=(0,r.useState)(null),{attributes:h,styles:b,forceUpdate:E}=(0,it.D)(m,l,{modifiers:[{name:"arrow",options:{element:p}},{name:"offset",options:{offset:[0,6]}},{name:"eventListeners",enabled:d},...n],placement:o}),y=(0,r.useCallback)((()=>{t?s.current=window.setTimeout((()=>{u(!0)}),t):u(!0)}),[t]),w=(0,r.useCallback)((()=>{clearTimeout(s.current),u(!1)}),[]);return(0,r.useEffect)((()=>()=>{clearTimeout(c.current),clearTimeout(s.current),document.body.contains(l)&&document.body.removeChild(l)}),[l]),je(l,b.popper),Qe(l,d,c,E),r.createElement(r.Fragment,null,r.isValidElement(i)&&r.cloneElement(i,{onMouseEnter:y,onMouseLeave:w,ref:g}),a.createPortal(r.createElement(lt.Z,{classNames:"fade-reg",in:d,timeout:Q.REG,unmountOnExit:!0},r.isValidElement(e)&&r.cloneElement(e,{...h.popper,arrow:{setArrowElement:f,styles:b.arrow}})),l))};st.defaultProps={modifiers:[],placement:"auto"};const ct=({active:e,children:t,modifiers:n,onToggle:o,placement:i,trigger:l})=>{const[s]=(0,r.useState)(document.createElement("div")),c=(0,r.useRef)(),[d,u]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),{attributes:p,styles:f}=(0,it.D)(m,s,{modifiers:[...n,{name:"eventListeners",enabled:d}],placement:i}),h=(0,r.useCallback)((()=>{const e=!d;u(e),o&&o(e)}),[d,o]),b=(0,r.useCallback)((e=>{const t=e.target;s.contains(t)||m?.contains(t)||(u(!1),o&&o(!1))}),[s,o,m]);return je(s,f.popper),Qe(s,d,c),(0,r.useEffect)((()=>{u(void 0===e?d||!1:e)}),[e,d]),(0,r.useEffect)((()=>(document.addEventListener("mousedown",b),document.addEventListener("touchstart",b),()=>{clearTimeout(c.current),document.removeEventListener("mousedown",b),document.removeEventListener("touchstart",b),document.body.contains(s)&&document.body.removeChild(s)})),[s,b]),r.createElement(r.Fragment,null,r.isValidElement(l)&&r.cloneElement(l,{onClick:h,ref:g}),r.isValidElement(t)&&r.createElement(lt.Z,{classNames:"fade-reg",in:d,timeout:Q.REG,unmountOnExit:!0},r.createElement(r.Fragment,null,a.createPortal(r.cloneElement(t,{...p.popper}),s))))};ct.defaultProps={modifiers:[],placement:"auto"};var dt=n(63245);n(97655);let ut=function(e){return e.SUCCESS="success",e.INFO="info",e.WARNING="warning",e.ERROR="error",e}({});const mt={baseFontSize:"10px",color:{black:"#191a21",black70:"rgba(25, 26, 33, 0.7)",black40:"rgba(25, 26, 33, 0.4)",black20:"rgba(25, 26, 33, 0.2)",gray1:"#585858",gray2:"#bbbbbb",backgroundDarker:"#21222c",backgroundLighter:"#282a36",background:"#21222c",foreground:"#f8f8f2",selection:"#44475a",selectionDarker:"#333544",comment:"#6272a4",red:"#ff5555",orange:"#ffb86c",yellow:"#f1fa8c",green:"#50fa7b",purple:"#bd93f9",cyan:"#8be9fd",pink:"#d14671",pink50:"rgba(209, 70, 113, 0.25)",pinkDarker:"#be2f5b",pinkLighter:"#ff79c6",transparent:"transparent",white:"#fafafa",inherit:"inherit",tooltipBackground:"#6272a4",graphLegend:"#6e7078",offWhite:"#bdbdbd"},font:'"Open Sans", -apple-system, BlinkMacSystemFont, Helvetica, Roboto, sans-serif',fontEmoji:'"apple color emoji", "segoe ui emoji", "android emoji", "emojisymbols", "emojione mozilla", "twemoji mozilla", "segoe ui symbol", "noto color emoji"',fontMonospace:'SFMono-Regular, Menlo, Monaco, Consolas,"Liberation Mono", "Courier New", monospace',fontSize:{ms:"1rem",xs:"1.2rem",sm:"1.3rem",md:"1.4rem",lg:"1.5rem",xl:"1.7rem",hg:"3rem"},borderRadius:"0.8rem"};n(85383);const gt=dt.Am,pt=e=>{const t={autoClose:3e3,draggable:!1,position:"top-right",theme:"dark",transition:dt.Mi,...e};return r.createElement(dt.Ix,t)};function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ft.apply(this,arguments)}const ht={direction:"bottom",fontSize:"md",selected:!1,size:"md",type:"button",readOnly:!1},bt=(0,s.iv)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n  border: none;\n  outline: 0;\n  font-size: ",";\n  font-weight: 400;\n  line-height: 1.15;\n  width: 3.5rem;\n  height: 3.5rem;\n  border-radius: 0.4rem;\n  cursor: pointer;\n  ",";\n  ",";\n  color: ",";\n\n  svg + span,\n  img + span {\n    margin-left: 1rem;\n  }\n"],(({selected:e,theme:t})=>e?"#2d303e":"transparent"),(({fontSize:e,theme:t})=>t.fontSize[e]),X,(({disabled:e})=>e&&"cursor: default; pointer-events: none;"),(({selected:e,theme:t})=>t.color[e?"green":"offWhite"])),Et=s.ZP.button.withConfig({displayName:"ToggleButton__PrimaryToggleButtonStyled"})(["\n  ",";\n  ",";\n"],bt,(yt={background:"comment"},(0,s.iv)(["\n    &:hover:not([disabled]) {\n      background: ",";\n      opacity: 1;\n    }\n\n    &:active:not([disabled]) {\n      filter: brightness(90%);\n    }\n\n    ","\n  "],A(yt.background),(({readOnly:e})=>e&&"\n      filter: brightness(0.5);\n      cursor: default;\n    "))));var yt;const wt=(e,t)=>r.createElement(Et,ft({},ht,e,{ref:t})),vt=(0,r.forwardRef)(wt);function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ct.apply(this,arguments)}vt.defaultProps=ht;const xt=(0,s.iv)(["\n  position: absolute;\n  width: 7px;\n  height: 7px;\n"]),_t=s.ZP.div.withConfig({displayName:"Tooltip__TooltipArrow"})(["\n  ",";\n\n  &::before {\n    ",';\n    top: 0;\n    left: 0;\n    content: "";\n    transform: rotate(45deg);\n    background: ',";\n    border: 1px solid ",";\n    border-radius: 1px;\n  }\n"],xt,xt,A("backgroundDarker"),A("gray1")),kt=s.ZP.div.withConfig({displayName:"Tooltip__Wrapper"})(["\n  position: relative;\n  max-width: 260px;\n  padding: 1rem;\n  background: ",";\n  border: 1px solid ",';\n  border-radius: 1px;\n\n  &[data-popper-placement^="right"] ',' {\n    left: -4px;\n\n    &::before {\n      border-right: none;\n      border-top: none;\n    }\n  }\n\n  &[data-popper-placement^="left"] ',' {\n    right: -4px;\n\n    &::before {\n      border-left: none;\n      border-bottom: none;\n    }\n  }\n\n  &[data-popper-placement^="top"] ',' {\n    bottom: -4px;\n\n    &::before {\n      border-left: none;\n      border-top: none;\n    }\n  }\n\n  &[data-popper-placement^="bottom"] '," {\n    top: -4px;\n\n    &::before {\n      border-right: none;\n      border-bottom: none;\n    }\n  }\n"],A("backgroundDarker"),A("gray1"),_t,_t,_t,_t),St=({arrow:e,children:t,...n})=>r.createElement(kt,Ct({},n,{"data-hook":"tooltip"}),r.createElement(Pe,{color:"foreground"},t),e&&r.createElement(_t,{ref:e.setArrowElement,style:e.styles}));var Tt=n(44631);function Nt(){return Nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nt.apply(this,arguments)}const Ot=({height:e,...t})=>r.createElement(Tt.OO,Nt({style:e?{height:e}:{}},t));var Rt=n(34317),It=n(4583),Pt=n(4422),At=n(75134),Lt=n(84374),Dt=n(66145),Mt=n.n(Dt),Bt=n(37355),zt=n(46193);const qt="#ff5555",Ft="#f8f8f2",Zt="2.2rem",Ut="1.8rem",jt=s.ZP.div.withConfig({displayName:"table-icon__Root"})(["\n  display: flex;\n  align-items: center;\n  width: ",";\n  height: ",";\n  position: relative;\n  color: ",";\n  margin-right: 1rem;\n  flex-shrink: 0;\n"],Zt,Ut,(({$suspended:e})=>e?qt:Ft)),Ht=s.ZP.span.withConfig({displayName:"table-icon__PartitionLetter"})(["\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  font-size: 1.4rem;\n  line-height: ",";\n"],Ut),Gt=s.ZP.div.withConfig({displayName:"table-icon__Icon"})(["\n  position: absolute;\n  width: ",";\n  height: ",";\n  border: 1px "," solid;\n  border-radius: 2px;\n"],Zt,Ut,(({$suspended:e})=>e?qt:Ft)),Vt=s.ZP.span.withConfig({displayName:"table-icon__Asterisk"})(["\n  position: absolute;\n  top: -9px;\n  right: -0.5rem;\n  font-size: 1.8rem;\n  line-height: 1.8rem;\n  color: #f1fa8c;\n"]),Wt=s.ZP.div.withConfig({displayName:"table-icon__HLine"})(["\n  position: absolute;\n  width: 100%;\n  height: 0.1rem;\n  background: WHITE;\n  top: 0.4rem;\n"]),$t=s.ZP.div.withConfig({displayName:"table-icon__VLine"})(["\n  position: absolute;\n  width: 0.1rem;\n  height: calc("," - 0.5rem);\n  background: WHITE;\n  top: 0.4rem;\n"],Ut),Qt=(0,s.ZP)($t).withConfig({displayName:"table-icon__VLine1"})(["\n  left: 0.6rem;\n"]),Yt=(0,s.ZP)($t).withConfig({displayName:"table-icon__VLine2"})(["\n  left: 1.3rem;\n"]),Kt=({isPartitioned:e,partitionBy:t,walEnabled:n,suspended:a})=>r.createElement(jt,{$suspended:a},!n&&r.createElement(Vt,null,"*"),r.createElement(Gt,{$suspended:a},!e&&r.createElement(r.Fragment,null,r.createElement(Wt,null),r.createElement(Qt,null),r.createElement(Yt,null))),e&&t&&r.createElement(Ht,null,t.substr(0,1))),Xt=({partitionBy:e,walEnabled:t,suspended:n})=>{const a=e&&"NONE"!==e||!1;let o=[];return a&&e?o.push(`${e.substr(0,1)}: Partitioned by ${e}`):o.push(r.createElement(zt.x,{align:"center",gap:"0"},r.createElement(Bt.i,{size:"14px"}),r.createElement("span",null,": Not partitioned"))),t||o.push("*: non-WAL (Legacy)"),a||!t?r.createElement(Ye,{icon:r.createElement("span",null,r.createElement(Kt,{isPartitioned:a,partitionBy:e,walEnabled:t,suspended:n})),tooltip:o.map(((e,t)=>r.createElement("div",{key:t},e))),placement:"bottom"}):r.createElement(Kt,{isPartitioned:a,partitionBy:e,walEnabled:t,suspended:n})};var Jt=n(65742);const en=(0,r.createContext)({query:"",setQuery:()=>{}});var tn=n(35146),nn=n(87563),rn=n(35637),an=n(47223),on=n(8635),ln=n(94505),sn=n(75013),cn=n(80678),dn=n(7523);const un=s.ZP.div.withConfig({displayName:"FormItem__Root"})(["\n  display: grid;\n  gap: 1rem;\n  white-space: normal;\n  width: 100%;\n\n  ","\n"],(({border:e,theme:t})=>e&&`\n    border-bottom: 1px ${t.color.background} solid;\n  `)),mn=s.ZP.div.withConfig({displayName:"FormItem__Control"})(["\n  display: grid;\n  gap: 1rem;\n  ","\n"],(e=>e.disabled&&"opacity: 0.7;")),gn=s.ZP.div.withConfig({displayName:"FormItem__LabelWrapper"})(["\n  display: flex;\n  align-self: center;\n  justify-content: space-between;\n  align-items: baseline;\n  width: 100%;\n"]),pn=s.ZP.label.withConfig({displayName:"FormItem__Label"})(["\n  color: ",";\n"],(({theme:e})=>e.color.gray2)),fn=s.ZP.span.withConfig({displayName:"FormItem__AfterLabel"})(["\n  color: ",";\n"],(({theme:e})=>e.color.gray2));var hn=n(68004),bn=n(44047);function En(){return En=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},En.apply(this,arguments)}const yn=s.ZP.div.withConfig({displayName:"FormInput__Wrapper"})(["\n  display: flex;\n  width: 100%;\n  ","\n"],(e=>"off"===e.autoComplete&&"\n    // Hide the LastPass+NordPass icons\n    [data-lastpass-icon-root],\n    span[data-np-uid] {\n      display: none !important;\n    }\n  ")),wn=(0,s.ZP)(nn.I).withConfig({displayName:"FormInput__Input"})(["\n  ","\n"],(e=>e.disabled&&"opacity: 0.7;")),vn=(0,s.ZP)(Jt.z).withConfig({displayName:"FormInput__ToggleButton"})(["\n  cursor: pointer;\n  border-radius: 0;\n\n  ","\n"],(e=>e.last&&"\n    border-top-right-radius: 0.4rem;\n    border-bottom-right-radius: 0.4rem;\n  "));var Cn=n(81213);function xn(){return xn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xn.apply(this,arguments)}var _n=n(1795);function kn(){return kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kn.apply(this,arguments)}const Sn=s.ZP.div.withConfig({displayName:"FormGroup__Root"})(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(",", minmax(0, 1fr));\n  gap: ",";\n"],(({columns:e})=>e),(({gap:e})=>e));function Tn(){return Tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tn.apply(this,arguments)}function Nn(){return Nn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nn.apply(this,arguments)}const On=(0,s.ZP)(nn.I).attrs({as:"textarea"}).withConfig({displayName:"FormTextArea__TextArea"})(["\n  width: 100%;\n  height: inherit;\n"]),Rn=({name:e,method:t="post",onSubmit:n,onChange:a,onDirtyChange:o,children:i,validationSchema:l,defaultValues:s,preventSubmitOnEnter:c})=>{let d={};s&&(d.defaultValues=s),l&&(d.resolver=(0,dn.L)(l));const u=(0,cn.cI)(d);return(0,r.useEffect)((()=>{a&&u.watch(a)}),[]),(0,r.useEffect)((()=>{o&&o(u.formState.isDirty,u.formState.dirtyFields)}),[u.formState]),Object.keys(u.formState.errors).length>0&&console.log("Schema validation errors",u.formState.errors),r.createElement(cn.RV,u,r.createElement("form",{name:e,onSubmit:async e=>{e.stopPropagation(),await u.handleSubmit(n)(e)},method:t,onKeyDown:e=>{"Enter"===e.key&&c&&e.preventDefault()}},i))};Rn.Item=({name:e,label:t,afterLabel:n,helperText:a,children:o,className:i,disabled:l,border:s,required:c})=>{const{formState:{errors:d}}=(0,cn.Gc)();return r.createElement(un,{className:i,disabled:l,border:s},r.createElement(mn,{disabled:l},t&&e&&r.createElement(gn,null,r.createElement(pn,{htmlFor:e},t,c?r.createElement(Pe,{color:"red"}," *"):""),r.createElement(fn,null,n)),o),e&&!d[e]&&a&&("string"==typeof a?r.createElement(Pe,{color:"comment"},a):a),e&&d&&d[e]&&r.createElement(Pe,{color:"red"},d[e]?.message))},Rn.Input=({name:e,placeholder:t,type:n="text",disabled:a,showPassword:o,autoFocus:i,autoComplete:l,...s})=>{const{register:c,setFocus:d}=(0,cn.Gc)(),[u,m]=(0,r.useState)(o),g=(0,r.useCallback)((()=>{m(!u)}),[u,m]);return(0,r.useEffect)((()=>{i&&d(e)}),[]),r.createElement(yn,{autoComplete:l},r.createElement(wn,En({},c(e,{valueAsNumber:"number"===n}),{name:e,placeholder:t,type:u?"text":n,disabled:a,showPassword:o,autoComplete:l},s)),"password"===n&&r.createElement(vn,{skin:"secondary",onClick:g,title:"Toggle password visibility",type:"button",last:!0},u?r.createElement(hn.b,{size:"15px"}):r.createElement(bn._,{size:"15px"})))},Rn.Checkbox=({name:e,checked:t,...n})=>{const{register:a}=(0,cn.Gc)();return r.createElement("div",{style:{width:"100%",display:"flex"}},r.createElement(Cn.X,xn({},n,a(e))))},Rn.Select=({name:e,...t})=>{const{register:n}=(0,cn.Gc)();return r.createElement(_n.P,kn({},n(e),t))},Rn.Group=({children:e,columns:t,gap:n="2rem"})=>r.createElement(Sn,{columns:t??r.Children.count(r.Children.toArray(e)),gap:n},e),Rn.Submit=({children:e,disabled:t,variant:n,prefixIcon:a,...o})=>r.createElement(Jt.z,Tn({type:"submit",disabled:t,skin:n??"primary",prefixIcon:a,dataHook:"form-submit-button"},o),e),Rn.Cancel=({children:e,disabled:t,variant:n,prefixIcon:a,defaultValues:o,onClick:i})=>{const{reset:l}=(0,cn.Gc)();return r.createElement(Jt.z,{type:"button",onClick:()=>{l(o),i&&i()},disabled:t,skin:n??"secondary",prefixIcon:a,dataHook:"form-cancel-button"},e)},Rn.TextArea=({name:e,placeholder:t,rows:n,autoFocus:a,...o})=>{const{register:i,setFocus:l}=(0,cn.Gc)();return(0,r.useEffect)((()=>{a&&l(e)}),[]),r.createElement(On,Nn({},i(e),{rows:n??4,placeholder:t},o))};const In=e=>localStorage.getItem(e)??"",Pn=(e,t)=>localStorage.setItem(e,t),An=e=>localStorage.removeItem(e),Ln=e=>`${e["acl.oidc.tls.enabled"]?"https":"http"}://${e["acl.oidc.host"]}:${e["acl.oidc.port"]}`,Dn=async(e,t)=>fetch(`${Ln(e)}${e["acl.oidc.token.endpoint"]}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t)}),Mn=e=>e["acl.enabled"]&&!e["acl.basic.auth.realm.enabled"];var Bn=n(77798),zn=n(30919);var qn=n(34825);const Fn=({onLogout:e})=>r.createElement(be,null,r.createElement(zt.x,{gap:"1rem"},r.createElement(Pe,{color:"foreground"},"You have been logged out."),r.createElement(Jt.z,{prefixIcon:r.createElement(qn.n,{size:18}),skin:"secondary",onClick:e},"Log in")));var Zn=n(79409);const Un=({basicAuthEnabled:e,errorMessage:t,onLogout:n})=>r.createElement(be,null,r.createElement(zt.x,{flexDirection:"column",gap:"2rem"},r.createElement(Pe,{color:"foreground"},t),!e&&r.createElement(Jt.z,{skin:"secondary",prefixIcon:r.createElement(Zn.n,{size:"18px"}),onClick:()=>n()},"Login with other account")));var jn=n(29674),Hn=n.n(jn);const Gn=s.ZP.div.withConfig({displayName:"login__Header"})(["\n  position: absolute;\n  width: 100%;\n  padding: 30px;\n"]),Vn=s.ZP.div.withConfig({displayName:"login__ErrorContainer"})(["\n  @keyframes smooth-appear {\n    to {\n      transform: translateY(0);\n      opacity: 1;\n    }\n  }\n\n  @keyframes smooth-disappear {\n    to {\n      transform: translateY(10px);\n      opacity: 0;\n    }\n  }\n\n  background: gray;\n  color: white;\n  padding: 20px;\n  margin-top: 10px;\n  opacity: 0;\n  transform: translateY(10px);\n  border-radius: 10px;\n  text-align: center;\n\n  ","\n"],(({hasError:e})=>e?"\n  animation: smooth-appear 0.5s ease forwards;\n  ":"animation: smooth-disappear 0.5s ease forwards;")),Wn=s.ZP.div.withConfig({displayName:"login__Container"})(["\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 4%;\n  width: 500px;\n  font-size: 16px;\n  transition: height 10s ease;\n"]),$n=s.ZP.h1.withConfig({displayName:"login__Title"})(["\n  color: white;\n  text-align: center;\n"]),Qn=s.ZP.div.withConfig({displayName:"login__SSOCard"})(["\n  button {\n    padding-top: 2rem;\n    padding-bottom: 2rem;\n    border-radius: 0 5px 5px 0;\n    width: 100%;\n    margin-bottom: 10px;\n  }\n  margin-bottom: 10px;\n"]),Yn=s.ZP.div.withConfig({displayName:"login__Card"})(["\n  border-radius: ",';\n\n  @keyframes horizontal-shaking {\n    0% {\n      transform: translateX(0);\n    }\n    25% {\n      transform: translateX(5px);\n    }\n    50% {\n      transform: translateX(-5px);\n    }\n    75% {\n      transform: translateX(5px);\n    }\n    100% {\n      transform: translateX(0);\n    }\n  }\n\n  button[type="submit"] {\n    padding-top: 2rem;\n    padding-bottom: 2rem;\n    border-radius: 5px;\n    width: 100%;\n    margin-top: 40px;\n  }\n\n  ','\n\n  button {\n    padding-top: 2rem;\n    padding-bottom: 2rem;\n    border-radius: 0 5px 5px 0;\n  }\n\n  input[name="password"] {\n    padding-top: 2rem;\n    padding-bottom: 2rem;\n    border-radius: 5px 0 0 5px;\n  }\n\n  input {\n    padding-top: 2rem;\n    padding-bottom: 2rem;\n    border-radius: 5px;\n    box-shadow: 0 0 0 30px #44475a inset !important;\n    -webkit-text-fill-color: white;\n  }\n\n  label {\n    margin-top: 20px;\n  }\n'],(({theme:e})=>e.borderRadius),(({hasError:e})=>e&&'\n    button[type="submit"] {\n      animation: horizontal-shaking 0.3s ease-in-out;\n    }\n  ')),Kn=(0,s.ZP)(Jt.z).withConfig({displayName:"login__StyledButton"})(["\n  padding-top: 2rem;\n  padding-bottom: 2rem;\n"]),Xn=s.ZP.div.withConfig({displayName:"login__Line"})(['\n  position: relative;\n  text-align: center;\n\n  &:before {\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 0;\n    width: 100%;\n    height: 1px;\n    background: ',";\n  }\n"],(({theme:e})=>e.color.selection)),Jn=s.ZP.div.withConfig({displayName:"login__TooltipArrow"})(['\n  &::before {\n    position: absolute;\n    width: 7px;\n    height: 7px;\n    top: -4px;\n    left: 50%;\n    content: "";\n    transform: rotate(45deg);\n    background: gray;\n    border-left: 1px solid gray;\n    border-radius: 1px;\n    border-right: none;\n    border-bottom: none;\n  }\n']),er=(0,s.ZP)(Pe).withConfig({displayName:"login__LineText"})(["\n  position: relative;\n  z-index: 1;\n  background: ",";\n  padding: 0 1.5rem;\n"],(({theme:e})=>e.color.backgroundDarker)),tr=s.ZP.div.withConfig({displayName:"login__Footer"})(["\n  width: 700px;\n  text-align: center;\n  padding: 20px;\n  margin-top: 40px;\n  margin-right: auto;\n  margin-left: auto;\n"]),nr=Hn().object({username:Hn().string().required().messages({"string.empty":"User name is required"}),password:Hn().string().required().messages({"string.empty":"Password is required"})}),rr=({onOAuthLogin:e,onBasicAuthSuccess:t})=>{const{settings:n}=gr(),a="EE"===n["release.type"],[o,i]=r.useState(),l=a?{query:e=>`alter user '${e}' create token type rest with ttl '1d' refresh transient`,store:async(e,t,n)=>{const r=(await e.json()).dataset[0][1];Pn(T.REST_TOKEN,r)}}:{query:()=>"select * from long_sequence(1)",store:async(e,t,n)=>{Pn(T.BASIC_AUTH_HEADER,`Basic ${btoa(`${t}:${n}`)}`)}};return(0,r.useEffect)((()=>{setTimeout((()=>{i(void 0)}),5e3)}),[o]),n["acl.basic.auth.realm.enabled"]?null:r.createElement("div",{"data-hook":"auth-login"},r.createElement(Gn,null,r.createElement("a",{href:"https://questdb.io"},r.createElement("img",{alt:"QuestDB logotype",height:"20",src:"assets/questdb-logotype.svg"}))),r.createElement(Wn,null,r.createElement($n,null,"Please Sign In"),n["acl.oidc.enabled"]&&r.createElement(Qn,null,r.createElement(Kn,{"data-hook":"button-sso-login",skin:"secondary",prefixIcon:r.createElement(Zn.n,{size:"18px"}),onClick:()=>e()},"Continue with SSO"),r.createElement(Xn,null,r.createElement(er,{color:"gray2"},"or"))),r.createElement(Yn,{hasError:o},r.createElement(Rn,{name:"login",onSubmit:async e=>{const{username:n,password:r}=e;try{const e=await fetch(`exec?query=${l.query(n)}`,{headers:{Authorization:`Basic ${btoa(`${n}:${r}`)}`}});if(200===e.status)return await l.store(e,n,r),t();401===e.status?i("Invalid user name or password"):403===e.status?i("Unauthorized to use the Web Console"):i("Login failed, status code: "+e.status)}catch(e){i("Error occurred while trying to login")}},defaultValues:{},validationSchema:nr},r.createElement(Rn.Item,{name:"username",label:"User name"},r.createElement(Rn.Input,{name:"username",placeholder:"johndoe"})),r.createElement(Rn.Item,{name:"password",label:"Password"},r.createElement(Rn.Input,{name:"password",type:"password",placeholder:""})),r.createElement(Rn.Submit,{variant:"primary"},"Sign In"),r.createElement(Vn,{hasError:o},r.createElement(Jn,null),o)))),r.createElement(tr,null))};var ar=n(17093),or=n(91197),ir=function(e){return e[e.loading=0]="loading",e[e.ready=1]="ready",e[e.error=2]="error",e}(ir||{});const lr={view:ir.loading},sr=(e,t)=>({...e,...t}),cr=(0,r.createContext)({settings:{},consoleConfig:{},warnings:[]}),dr=r.createElement(r.Fragment,null,"Error connecting to the database.",r.createElement("br",null),"Please, check if the server is running correctly."),ur=r.createElement(r.Fragment,null,"Error loading the console configuration file"),mr=({children:e})=>{const[t,n]=(0,r.useReducer)(sr,lr),[a,o]=(0,r.useState)({}),[i,l]=(0,r.useState)([]),[s,c]=(0,r.useState)({}),d={[ir.loading]:()=>null,[ir.ready]:()=>r.createElement(cr.Provider,{value:{settings:a,consoleConfig:s,warnings:i}},e),[ir.error]:()=>r.createElement(be,null,r.createElement(zt.x,{flexDirection:"column",gap:"2rem"},r.createElement("a",{href:"https://questdb.io"},r.createElement("img",{alt:"QuestDB logotype",width:"95",height:"23",src:"assets/questdb-logotype.svg"})),r.createElement(ar.x,{align:"center",size:"lg"},"Error connecting to the database.",r.createElement("br",null),"Please, check if the server is running correctly."),r.createElement(Jt.z,{skin:"secondary",prefixIcon:r.createElement(or.h,{size:"18px"}),onClick:()=>window.location.reload()},"Retry")))},u=async(e,t)=>{try{const r=await fetch(e);if(200===r.status)return await r.json();n({view:ir.error,errorMessage:t})}catch(e){n({view:ir.error,errorMessage:t})}};return(0,r.useEffect)((()=>{(async()=>{const e=await u("settings",dr),t=await u("warnings",dr),n=await u("assets/console-configuration.json",ur);e&&o(e),t&&l(t),n&&c(n)})().then((()=>n({view:ir.ready})))}),[]),r.createElement(r.Fragment,null,d[t.view]())},gr=()=>(0,r.useContext)(cr);var pr=function(e){return e[e.ready=0]="ready",e[e.loading=1]="loading",e[e.error=2]="error",e[e.login=3]="login",e[e.loggedOut=4]="loggedOut",e}(pr||{});const fr={view:pr.loading},hr={sessionData:void 0,logout:()=>{},refreshAuthToken:async()=>({}),switchToOAuth:()=>{}};class br{constructor(e,t){this.error=e,this.error_description=t}}const Er=(0,r.createContext)(hr),yr=(e,t)=>({...e,...t}),wr=({children:e})=>{const{settings:t}=gr(),[n,a]=(0,r.useState)(void 0),[o,i]=(0,r.useState)(void 0),[l,s]=(0,r.useReducer)(yr,fr),c=e=>{if(e.access_token)Pn(T.AUTH_PAYLOAD,JSON.stringify({...e,expires_at:(t=e.expires_in,new Date((new Date).getTime()+1e3*t))})),e.refresh_token&&Pn(T.AUTH_REFRESH_TOKEN,e.refresh_token),a(e),history.replaceState&&history.replaceState(null,"",location.pathname+location.search.replace(/[\?&]code=[^&]+/,"").replace(/^&/,"?"));else{const t=e;s({view:pr.error,errorMessage:t.error_description??"Error logging in. Please try again."})}var t},d=async e=>{const t=In(T.PKCE_CODE_VERIFIER),n=await Dn(e,{grant_type:"refresh_token",refresh_token:In(T.AUTH_REFRESH_TOKEN),code_verifier:t,client_id:e["acl.oidc.client.id"]}),r=await n.json();return c(r),r},u=async()=>{200===(await fetch("exec?query=select 42")).status?s({view:pr.ready}):await u()},m=()=>{const e=In(T.REST_TOKEN),t=In(T.BASIC_AUTH_HEADER);s(e||t?{view:pr.ready}:{view:pr.login})},g=e=>{const n=(e=>e["acl.oidc.pkce.required"]?(()=>{const e=new Uint8Array(60);crypto.getRandomValues(e);const t=zn.DS.fromUint8Array(e,!0);return Pn(T.PKCE_CODE_VERIFIER,t),t})():null)(t),r=(e=>e?(e=>{const t=[];for(let n=0;n<e.length;n++){const r=e.codePointAt(n);if(void 0===r)throw Error(n+" is out of bounds of string: "+e);t.push(r)}const n=new Uint8Array(Bn.sha256.create().update(t).array());return zn.DS.fromUint8Array(n,!0)})(e):null)(n);window.location.href=(({config:e,code_challenge:t=null,login:n,redirect_uri:r})=>{const a={client_id:e["acl.oidc.client.id"]||"",response_type:"code",scope:e["acl.oidc.scope"]||"openid",redirect_uri:r},o=new URLSearchParams(a);return t&&(o.append("code_challenge",t),o.append("code_challenge_method","S256")),n&&o.append("prompt","login"),Ln(e)+e["acl.oidc.authorization.endpoint"]+"?"+o})({config:t,code_challenge:r,login:e,redirect_uri:t["acl.oidc.redirect.uri"]||window.location.href})},p=e=>{An(T.AUTH_PAYLOAD),An(T.REST_TOKEN),An(T.BASIC_AUTH_HEADER),e?s({view:pr.loggedOut}):window.location.reload()},f=()=>{g(!0)};(0,r.useEffect)((()=>{n&&s({view:pr.ready})}),[n]),(0,r.useEffect)((()=>{k.subscribe(S.MSG_CONNECTION_FORBIDDEN,(e=>{e&&e.error.match(/Access denied.* \[HTTP]/gm)&&s({view:pr.error,errorMessage:"Unauthorized to use the Web Console."})})),(async e=>{if(e["acl.enabled"])if(e["acl.oidc.enabled"]){const t=In(T.AUTH_PAYLOAD),n=new URLSearchParams(window.location.search),r=n.get("code"),o=new br(n.get("error"),n.get("error_description"));if(k.subscribe(S.MSG_CONNECTION_UNAUTHORIZED,(()=>{const e=In(T.OAUTH_REDIRECT_COUNT);if(e){const t=parseInt(e);!isNaN(t)&&t>=5?(An(T.OAUTH_REDIRECT_COUNT),p(!0)):(Pn(T.OAUTH_REDIRECT_COUNT,JSON.stringify(e?parseInt(e)+1:1)),p())}else Pn(T.OAUTH_REDIRECT_COUNT,JSON.stringify(1)),p()})),k.subscribe(S.MSG_CONNECTION_OK,(()=>{An(T.OAUTH_REDIRECT_COUNT)})),""!==t){const n=JSON.parse(t);new Date(n.expires_at).getTime()-Date.now()<3e4&&""!==In(T.AUTH_REFRESH_TOKEN)?await d(e):a(n)}else if(null!==r)try{const t=In(T.PKCE_CODE_VERIFIER),n=await Dn(e,{grant_type:"authorization_code",code:r,code_verifier:t,client_id:e["acl.oidc.client.id"],redirect_uri:e["acl.oidc.redirect.uri"]||window.location.origin+window.location.pathname}),a=await n.json();c(a)}catch(e){throw e}else o.error?i(o.error+": "+o.error_description):m()}else e["acl.basic.auth.realm.enabled"]?await u():(k.subscribe(S.MSG_CONNECTION_UNAUTHORIZED,(()=>{p()})),m());else s({view:pr.ready})})(t)}),[]);const h={[pr.loading]:()=>null,[pr.ready]:()=>r.createElement(Er.Provider,{value:{sessionData:n,logout:p,refreshAuthToken:d,switchToOAuth:f}},e),[pr.error]:()=>r.createElement(Un,{errorMessage:o,onLogout:p,basicAuthEnabled:t["acl.basic.auth.realm.enabled"]??!1}),[pr.login]:()=>r.createElement(rr,{onOAuthLogin:f,onBasicAuthSuccess:()=>{s({view:pr.ready})}}),[pr.loggedOut]:()=>r.createElement(Fn,{onLogout:()=>{An(T.OAUTH_REDIRECT_COUNT),g(!0)}})};return r.createElement(r.Fragment,null,h[l.view]())},vr=()=>(0,r.useContext)(Er),Cr=/Build Information: QuestDB ([\w- ]+ )?([0-9A-Za-z.-]*),/,xr=/Commit Hash ([0-9A-Za-z]*)/;let _r=function(e){return e.TOGGLE_SIDE_MENU="CONSOLE/TOGGLE_SIDE_MENU",e.SET_ACTIVE_TOP_PANEL="CONSOLE/SET_ACTIVE_TOP_PANEL",e.SET_ACTIVE_SIDEBAR="CONSOLE/SET_ACTIVE_SIDEBAR",e.SET_ACTIVE_BOTTOM_PANEL="CONSOLE/SET_ACTIVE_BOTTOM_PANEL",e}({});const kr={toggleSideMenu:()=>({type:_r.TOGGLE_SIDE_MENU}),setActiveTopPanel:e=>({payload:e,type:_r.SET_ACTIVE_TOP_PANEL}),setActiveSidebar:e=>({payload:e,type:_r.SET_ACTIVE_SIDEBAR}),setActiveBottomPanel:e=>({payload:e,type:_r.SET_ACTIVE_BOTTOM_PANEL})};let Sr=function(e){return e.ERROR="error",e.INFO="info",e.SUCCESS="success",e.NOTICE="notice",e.LOADING="loading",e}({}),Tr=function(e){return e.ADD_NOTIFICATION="QUERY/ADD_NOTIFICATION",e.CLEANUP_NOTIFICATIONS="QUERY/CLEANUP_NOTIFICATIONS",e.REMOVE_NOTIFICATION="QUERY/REMOVE_NOTIFICATION",e.SET_RESULT="QUERY/SET_RESULT",e.STOP_RUNNING="QUERY/STOP_RUNNING",e.TOGGLE_RUNNING="QUERY/TOGGLE_RUNNING",e.SET_TABLES="QUERY/SET_TABLES",e.SET_COLUMNS="QUERY/SET_COLUMNS",e}({}),Nr=function(e){return e.START="TELEMETRY/START",e.SET_CONFIG="TELEMETRY/SET_CONFIG",e.SET_REMOTE_CONFIG="TELEMETRY/SET_REMOTE_CONFIG",e}({});const Or=kr,Rr=e=>({payload:{createdAt:new Date,type:Sr.SUCCESS,...e},type:Tr.ADD_NOTIFICATION}),Ir=()=>({type:Tr.CLEANUP_NOTIFICATIONS}),Pr=e=>({payload:e,type:Tr.SET_RESULT}),Ar=()=>({type:Tr.STOP_RUNNING}),Lr=(e=!1)=>({type:Tr.TOGGLE_RUNNING,payload:{isRefresh:e}}),Dr=e=>({payload:{tables:e},type:Tr.SET_TABLES}),Mr=e=>({payload:{columns:e},type:Tr.SET_COLUMNS}),Br=()=>({type:Nr.START}),zr=e=>({payload:e,type:Nr.SET_CONFIG}),qr=e=>({payload:e,type:Nr.SET_REMOTE_CONFIG});var Fr=n(61507),Zr=n(74998),Ur=n(73937),jr=n(63547),Hr=n(2304),Gr=n(41174),Vr=n(3826);const Wr=new I,$r=[e=>e.pipe((0,Zr.l)(Nr.START),(0,w.w)((()=>{const e=""!==In(T.AUTH_PAYLOAD)?In(T.AUTH_PAYLOAD):"{}",t=JSON.parse(e);if(t.access_token)Wr.setCommonHeaders({Authorization:`Bearer ${t.access_token}`});else{const e=In(T.REST_TOKEN);if(e)Wr.setCommonHeaders({Authorization:`Bearer ${e}`});else{const e=In(T.BASIC_AUTH_HEADER);e&&Wr.setCommonHeaders({Authorization:e})}}return(0,Gr.D)(Wr.query(`${f.CONFIG} limit -1`))})),(0,w.w)((e=>e.type===N.DQL?(0,E.of)(zr(e.data[0])):Vr.C))),(e,t)=>e.pipe((0,Zr.l)(Nr.SET_CONFIG),(0,Ur.M)(t),(0,w.w)((([e,t])=>{const n=ea.telemetry.getConfig(t);return n?.enabled?x(`${h}/config`,{method:"POST",body:JSON.stringify(n)},!1):Vr.C})),(0,w.w)((e=>e.error?Vr.C:(0,E.of)(qr(e.data))))),(e,t)=>e.pipe((0,Zr.l)(Nr.SET_REMOTE_CONFIG),(0,Ur.M)(t),(0,w.w)((([e,t])=>{const n=ea.telemetry.getRemoteConfig(t);if(n?.lastUpdated){const e=new Date(n.lastUpdated).toISOString();return(0,Gr.D)(Wr.queryRaw(`with tel as (\n              SELECT cast(created as long), event, origin\n              FROM ${f.MAIN}\n              WHERE created > '${e}'\n              LIMIT -10000 \n            )            \n            SELECT cast(created as long), cast(1000 as short), cast(case when sm >= 0 then sm else 32767 end as short) FROM (\n              SELECT created, cast(ceil(sum(rowCount) / 1000.0) as short) sm\n              FROM ${f.WAL}\n              WHERE created > '${e}' and rowCount > 0\n              SAMPLE BY 1h align to calendar\n            )\n            UNION ALL \n            SELECT cast(created as long), cast(2000 as short), cast(case when sm >= 0 then sm else 32767 end as short) FROM (\n              SELECT created, cast(count() as short) sm\n              FROM ${f.WAL}\n              WHERE created > '${e}' and rowCount > 0\n              SAMPLE BY 1h align to calendar\n            )\n            UNION ALL \n            SELECT cast(created as long), cast(3000 as short), cast(case when sm >= 0 then sm else 32767 end as short) FROM (\n              SELECT created, cast(max(latency) / 1000.0 as short) sm\n              FROM ${f.WAL}\n              WHERE created > '${e}' and rowCount > 0\n              SAMPLE BY 1h align to calendar\n             )\n             UNION ALL\n             SELECT * FROM tel\n             `.replace(/\s+/g," ").trim()))}return Vr.C})),(0,Ur.M)(t),(0,w.w)((([e,t])=>{const n=ea.telemetry.getRemoteConfig(t),r=ea.telemetry.getConfig(t);return null!=r?.id&&e.type===N.DQL&&e.count>0?x(`${h}/add`,{method:"POST",body:JSON.stringify({columns:e.columns,dataset:e.dataset,id:r.id,version:r.version,os:r.os,package:r.package})},!1).pipe((0,C.U)((t=>{if(!t.error){const t=e.dataset[e.count-1][0];return qr({...n,lastUpdated:t})}})),(0,jr.g)(36e5),(0,Hr.h)((e=>!!e))):Vr.C})))],Qr=(0,Fr.l)(...$r),Yr={sideMenuOpened:!1,activeTopPanel:"tables",activeSidebar:void 0,activeBottomPanel:"zeroState"},Kr={notifications:[],tables:[],columns:[],running:{value:!1,isRefresh:!1},maxNotifications:20},Xr={},Jr=(0,i.UY)({console:(e=Yr,t)=>{switch(t.type){case _r.TOGGLE_SIDE_MENU:return{...e,sideMenuOpened:!e.sideMenuOpened};case _r.SET_ACTIVE_TOP_PANEL:return{...e,activeTopPanel:t.payload};case _r.SET_ACTIVE_SIDEBAR:return{...e,activeSidebar:t.payload};case _r.SET_ACTIVE_BOTTOM_PANEL:return{...e,activeBottomPanel:t.payload};default:return e}},query:(e=Kr,t)=>{switch(t.type){case Tr.ADD_NOTIFICATION:{const n=[...e.notifications,t.payload];for(;n.length===e.maxNotifications;)n.shift();return{...e,notifications:n}}case Tr.CLEANUP_NOTIFICATIONS:return{...e,notifications:[]};case Tr.REMOVE_NOTIFICATION:return{...e,notifications:e.notifications.filter((({createdAt:e})=>e!==t.payload))};case Tr.SET_RESULT:return{...e,result:t.payload};case Tr.STOP_RUNNING:return{...e,running:{value:!1,isRefresh:!1}};case Tr.TOGGLE_RUNNING:return{...e,running:{value:!e.running.value,isRefresh:t.payload.isRefresh}};case Tr.SET_TABLES:return{...e,tables:t.payload.tables};case Tr.SET_COLUMNS:return{...e,columns:t.payload.columns};default:return e}},telemetry:(e=Xr,t)=>{switch(t.type){case Nr.SET_CONFIG:return{...e,config:t.payload};case Nr.SET_REMOTE_CONFIG:return{...e,remoteConfig:{cta:!1,lastUpdated:new Date((new Date).getTime()-321408e5).toISOString(),...t.payload}};default:return e}}}),ea={console:{getSideMenuOpened:e=>e.console.sideMenuOpened,getActiveTopPanel:e=>e.console.activeTopPanel,getActiveSidebar:e=>e.console.activeSidebar,getActiveBottomPanel:e=>e.console.activeBottomPanel},query:{getNotifications:e=>e.query.notifications,getResult:e=>e.query.result,getRunning:e=>e.query.running,getTables:e=>e.query.tables,getColumns:e=>e.query.columns},telemetry:{getConfig:e=>e.telemetry.config,getRemoteConfig:e=>e.telemetry.remoteConfig}},ta=new I,na={quest:ta,buildVersion:{type:"oss",version:""},commitHash:""},ra=(0,r.createContext)(na),aa=({children:e})=>{const t=(0,o.I0)(),{settings:n}=gr(),{sessionData:a,refreshAuthToken:i}=vr(),[l,s]=(0,r.useState)(!Mn(n)),[c,d]=(0,r.useState)(na.buildVersion),[u,m]=(0,r.useState)(""),g=async()=>{await ta.queryRaw("SELECT 1"),s(!0)};return(0,r.useEffect)((()=>{a&&(async e=>{ta.setCommonHeaders({Authorization:`Bearer ${e.access_token}`}),ta.refreshTokenMethod=()=>i(n),g()})(a)}),[a]),(0,r.useEffect)((()=>{const e=In(T.REST_TOKEN);if(e)ta.setCommonHeaders({Authorization:`Bearer ${e}`}),g();else{const e=In(T.BASIC_AUTH_HEADER);e&&(ta.setCommonHeaders({Authorization:e}),g())}ta.queryRaw("select build",{limit:"0,1000"}).then((e=>{e.type===N.DQL&&1===e.count&&(d((e=>{const t=Cr.exec(e.toString());return t?{type:t[1]?t[1].trim().toLowerCase():"oss",version:t[2]}:{type:"dev"}})(e.dataset[0][0])),m((e=>{const t=xr.exec(e.toString());return t?t[1]:""})(e.dataset[0][0])))}))}),[]),(0,r.useEffect)((()=>{l&&t(Br())}),[l]),l?r.createElement(ra.Provider,{value:{quest:ta,buildVersion:c,commitHash:u}},e):null},oa="questdb-sql",ia=e=>e.replace(/(?<!["'`])(--\s?.*$)/gm,((e,t)=>{if(t){const e=t.split("\n");return t.startsWith("--")&&e.length>1?"\n"+ia(e[1]):""}return e})),la=e=>{const t=e.getModel(),n=e.getSelection();return t&&n?t.getValueInRange(n):void 0},sa=e=>{const t=ia(e.getValue({preserveBOM:!1,lineEnding:"\n"})),n=e.getPosition();let r=0,a=0;const o=[];let i=0,l=0,s=-1,c=null,d=!1;if(n){for(let e=0;e<t.length&&null===c;e++)switch(t[e]){case";":if(d){a++;continue}r<n.lineNumber-1||r===n.lineNumber-1&&a<n.column-1?(o.push({row:i,col:l,position:s,limit:e}),i=r,l=a,s=e+1,a++):c=t.substring(-1===s?0:s,e);break;case" ":s===e&&(i=r,l=a,s=e+1),a++;break;case"\n":r++,a=0,s===e&&(i=r,l=a,s=e+1,a++);break;case"'":d=!d,a++;break;default:a++}if(null===c&&(c=-1===s?t:t.substring(s)),0===c.length){const e=o.pop();return e?{column:e.col,query:t.substring(e.position,e.limit),row:e.row}:void 0}return{column:l,query:c,row:i}}},ca=(e,t,n={appendAt:"cursor"})=>{const r=e.getModel();if(r){const a=e.getPosition();if(a){const o=t.split("\n"),{prefix:i,suffix:l,lineStartOffset:s,selectStartOffset:c}=(({appendAt:e,model:t,position:n})=>{const r=1===n.lineNumber,a=n.lineNumber===t?.getValue().split("\n").length,o=t?.getLineContent(n.lineNumber),i=a?void 0:t?.getLineContent(n.lineNumber+1),l=!r&&!a,s={prefix:1,suffix:2,lineStartOffset:1,selectStartOffset:0},c=({end:[{when:()=>r,then:()=>({prefix:1,suffix:0})},{when:()=>!0,then:()=>({prefix:2,suffix:0,selectStartOffset:1})}],cursor:[{when:()=>""===t?.getValue(),then:()=>({prefix:0,suffix:1,lineStartOffset:0})},{when:()=>r&&""===o,then:()=>({prefix:0,lineStartOffset:0,suffix:""===i?0:1})},{when:()=>r&&""!==o,then:()=>({prefix:""===i?1:2,suffix:1,selectStartOffset:1})},{when:()=>l&&""===o,then:()=>({prefix:0,suffix:""===i?1:2})},{when:()=>l&&""!==o&&""!==i,then:()=>({prefix:1,suffix:2})},{when:()=>l&&""!==o&&""===i,then:()=>({prefix:1,suffix:1,selectStartOffset:1})},{when:()=>a,then:()=>({prefix:""===o?1:2,suffix:1,lineStartOffset:1,selectStartOffset:""===o?0:1})}]}[e].find((({when:e})=>e()))??{then:()=>s}).then();return{...s,...c}})({appendAt:n.appendAt,model:r,position:a}),d=(({model:e,position:t,lineStartOffset:n,newQueryLines:r,appendAt:a})=>{if("cursor"===a)return{lineStart:t.lineNumber+n,lineEnd:t.lineNumber+r.length,columnStart:0,columnEnd:r[r.length-1].length+1};const o=(e?.getValue().split("\n").length??0)+n;return{lineStart:o,lineEnd:o+r.length,columnStart:0,columnEnd:r[r.length-1].length+1}})({model:r,position:a,lineStartOffset:s,appendAt:n.appendAt,newQueryLines:o}),u={lineStart:d.lineStart+c,lineEnd:d.lineStart+c+(o.length-1),columnStart:0,columnEnd:d.columnEnd};(({editor:e,lineNumber:t,column:n,text:r})=>{e.executeEdits("",[{range:{startLineNumber:t,startColumn:n,endLineNumber:t,endColumn:n},text:r}])})({editor:e,lineNumber:d.lineStart,column:d.columnStart,text:`${"\n".repeat(i)}${t}${"\n".repeat(l)}`}),e.setSelection({startLineNumber:u.lineStart,endLineNumber:u.lineEnd,startColumn:u.columnStart,endColumn:u.columnEnd})}e.focus(),"end"===n.appendAt&&e.revealLine(r.getLineCount())}},da=(e,t)=>{const n=t.getModel();n&&e.editor.setModelMarkers(n,oa,[])},ua=(e,t)=>e.findMatches(t,!0,!1,!0,null,!0)??null;var ma=n(86732);class ga extends ma.default{constructor(){super("web-console"),this.version(1).stores({buffers:"++id, label",editor_settings:"++id, key"}),this.version(2).stores({read_notifications:"++id, newsId"}),this.version(3).stores({buffers:"++id, label, position, archived, archivedAt"}).upgrade((e=>{let t=0;e.table("buffers").toCollection().modify((e=>{e.position=t,t++}))})),this.on("populate",(()=>{const e=In(T.QUERY_TEXT);void 0!==e&&localStorage.removeItem(T.QUERY_TEXT),this.buffers.add(ha({label:"SQL",value:e??"",position:0})),this.editor_settings.add({key:"activeBufferId",value:ba.id}),this.editor_settings.add({key:"returnTo",value:""}),this.editor_settings.add({key:"returnToLabel",value:""})})),this.on("ready",(async()=>{0===await this.buffers.count()&&this.buffers.add(ha({label:"SQL",value:"",position:0}));const e=new URL(window.location.href);await Promise.all(["returnTo","returnToLabel"].map((async t=>{if(e.searchParams.has(t)){const n=e.searchParams.get(t)??"";0!==await this.editor_settings.where("key").equals(t).count()?this.editor_settings.where("key").equals(t).modify({value:n}):this.editor_settings.add({key:t,value:n}),e.searchParams.delete(t)}}))),window.history.replaceState({},"",e)}))}}const pa=new ga,fa={cursorState:[{inSelectionMode:!1,selectionStart:{lineNumber:1,column:1},position:{lineNumber:1,column:1}}],contributionsState:[{"editor.contrib.wordHighlighter":!1,"editor.contrib.folding":{lineCount:1,provider:"indent",foldedImports:!1}}],viewState:{scrollLeft:0,firstPosition:{lineNumber:1,column:1},firstPositionDeltaTop:0}},ha=({label:e,value:t,editorViewState:n=fa,position:r,archived:a,archivedAt:o})=>({label:e,value:t??"",editorViewState:n,position:r,archived:a,archivedAt:o}),ba={id:1,...ha({label:"SQL",position:0})},Ea=()=>pa.buffers.toArray(),ya=()=>pa.editor_settings.where("key").equals("activeBufferId").first();var wa=n(90990);const va={editorRef:{current:null},monacoRef:{current:null},insertTextAtCursor:()=>{},appendQuery:()=>{},buffers:[],activeBuffer:ba,setActiveBuffer:()=>Promise.resolve(),addBuffer:()=>Promise.resolve(ba),deleteBuffer:()=>Promise.resolve(),archiveBuffer:()=>Promise.resolve(),deleteAllBuffers:()=>Promise.resolve(),updateBuffer:()=>Promise.resolve(),editorReadyTrigger:()=>{},inFocus:!1},Ca=(0,r.createContext)(va),xa=({children:e})=>{const t=(0,r.useRef)(null),n=(0,r.useRef)(null),a=(0,wa.useLiveQuery)(Ea,[]),o=(0,wa.useLiveQuery)((()=>ya()),[])?.value,[i,l]=(0,r.useState)(ba),[s,c]=(0,r.useState)(!1),d=(0,r.useRef)(!1);if((0,r.useEffect)((()=>{if(!d.current&&a&&o){const e=a?.find((e=>e.id===o))??a[0];l(e),d.current=!0}}),[a,o]),!a||!o||i===ba)return null;const u=async e=>{const r=(await ya())?.value;if(r){if(e.id===r)return;await m(i.id)}if(await(a=e.id,pa.editor_settings.where("key").equals("activeBufferId").modify({value:a})),l(e),t.current&&n.current){const r=n.current.editor.createModel(e.value,oa);t.current.setModel(r),t.current.focus(),da(n.current,t.current)}var a;e.editorViewState&&t.current?.restoreViewState(e.editorViewState)},m=async(e,n)=>{const r=t.current?.saveViewState();await((e,t)=>pa.buffers.update(e,t))(e,{...n,...r?{editorViewState:r}:{}})},g=async e=>{const n=(await ya())?.value;if(void 0!==n&&n===e){const e=await pa.buffers.toCollection().filter((e=>!e.archived)).last();await u(e??ba)}else t.current?.focus()};return r.createElement(Ca.Provider,{value:{editorRef:t,monacoRef:n,insertTextAtCursor:e=>{t?.current&&((e,t)=>{e.trigger("keyboard","type",{text:t}),e.focus()})(t.current,e)},appendQuery:(e,n)=>{t?.current&&ca(t.current,e,n)},inFocus:s,buffers:a,activeBuffer:i,setActiveBuffer:u,addBuffer:async(e,{shouldSelectAll:r=!1}={})=>{const o=(await pa.buffers.filter((e=>e.label.startsWith(ba.label))).toArray()).map((e=>e.label.slice(ba.label.length+1))).filter(Boolean).map((e=>parseInt(e,10))).sort(),i=ha({...e,label:e?.label??`${ba.label} ${(()=>{for(let e=0;e<=o.length;e++){const t=e+1;if(!o.includes(t))return t}})()}`,position:a.filter((e=>!e.archived)).length}),l=await pa.buffers.add(i);if(await u(i),t.current&&n.current&&"string"==typeof i.value){const e=n.current?.editor.createModel(i.value,oa);t.current.setModel(e),r&&t.current?.setSelection(e.getFullModelRange())}return{id:l,...i}},deleteBuffer:async e=>{await(e=>pa.buffers.delete(e))(e),await g(e)},archiveBuffer:async e=>{await m(e,{archived:!0,archivedAt:(new Date).getTime(),position:-1}),await g(e)},deleteAllBuffers:async()=>{await pa.buffers.clear()},updateBuffer:m,editorReadyTrigger:e=>{e.focus(),c(!0),e.onDidFocusEditorWidget((()=>c(!0))),e.onDidBlurEditorWidget((()=>c(!1))),i.editorViewState&&e.restoreViewState(i.editorViewState)}}},e)},_a=()=>(0,r.useContext)(Ca);var ka=n(56883);const Sa=({children:e})=>{const{settings:t}=gr(),n=!t["posthog.enabled"]??!0;return r.createElement(ka.zf,{apiKey:null===t["posthog.api.key"]?void 0:t["posthog.api.key"],options:{disable_persistence:n,disable_session_recording:n,disable_surveys:n,advanced_disable_decide:n,advanced_disable_feature_flags:n,advanced_disable_feature_flags_on_first_load:n,advanced_disable_toolbar_metrics:n,autocapture:!n,capture_pageview:!n,capture_pageleave:!n}},e)},Ta={[O.TOO_MANY_OPEN_FILES]:{title:"System limit for open files",message:"Too many open files, please, increase the maximum number of open file handlers OS limit",link:"https://questdb.io/docs/deployment/capacity-planning/#maximum-open-files"},[O.DISK_FULL]:{title:"OS configuration",message:"No space left on device, please, extend the volume or free existing disk space up",link:"https://questdb.io/docs/deployment/capacity-planning/#os-configuration"},[O.OUT_OF_MMAP_AREAS]:{title:"Max virtual memory areas limit",message:"Out of virtual memory mapping areas, please, increase the maximum number of memory-mapped areas OS limit",link:"https://questdb.io/docs/deployment/capacity-planning/#max-virtual-memory-areas-limit"},[O.OUT_OF_MEMORY]:{title:"Out of memory",message:"Out of memory, please, analyze system metrics, and upgrade memory, if necessary",link:"https://questdb.io/docs/deployment/capacity-planning/#cpu-and-ram-configuration"},[O.UNSUPPORTED_FILE_SYSTEM]:{title:"Unsupported file system",message:"DB root is located on an unsupported file system, please, move the DB root to a volume with supported file system",link:"https://questdb.io/docs/operations/backup/#supported-filesystems"}},Na=(0,s.ZP)(Jt.z).withConfig({displayName:"SuspensionDialog__ErrorButton"})(["\n  background: #3e1b1b;\n  border: 1px #723131 solid;\n  color: #f47474;\n  padding: 3px 10px;\n  font-size: 1.3rem;\n"]),Oa=(0,s.ZP)(tn.V.Content).withConfig({displayName:"SuspensionDialog__StyledDialogContent"})(["\n  border-color: #723131;\n"]),Ra=(0,s.ZP)(tn.V.Description).withConfig({displayName:"SuspensionDialog__StyledDescription"})(["\n  display: grid;\n  gap: 2rem;\n"]),Ia=(0,s.ZP)(_e).attrs({align:"center",flexDirection:"column"}).withConfig({displayName:"SuspensionDialog__ContentBlockBox"})(["\n  width: 100%;\n"]),Pa=s.ZP.div.withConfig({displayName:"SuspensionDialog__FormWrapper"})(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: 100px auto;\n  gap: 1rem;\n"]),Aa=(0,s.ZP)(Rn.Input).withConfig({displayName:"SuspensionDialog__TransactionInput"})(["\n  width: 10rem;\n"]),La=(0,s.ZP)(_e).withConfig({displayName:"SuspensionDialog__Icon"})(["\n  height: 4.8rem;\n"]),Da=(0,s.ZP)(nn.I).withConfig({displayName:"SuspensionDialog__StyledInput"})(["\n  width: 100%;\n  font-family: ",";\n  background: #313340;\n  border-color: ",";\n"],(({theme:e})=>e.fontMonospace),(({theme:e})=>e.color.selection)),Ma="Error restarting transaction",Ba=({walTableData:e})=>{const[t,n]=(0,r.useState)(!1),{quest:a}=(0,r.useContext)(ra),[o,i]=(0,r.useState)(!1),[l,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(),u=parseFloat(e.sequencerTxn)-parseFloat(e.writerTxn);return(0,r.useEffect)((()=>{t&&(d(void 0),s(!1))}),[t]),r.createElement(tn.V.Root,{open:t,onOpenChange:e=>{e||k.publish(S.MSG_QUERY_SCHEMA)}},r.createElement(tn.V.Trigger,{asChild:!0},r.createElement(ye.A,null,r.createElement(Na,{prefixIcon:r.createElement(rn.j,{size:"18px"}),"data-hook":"schema-suspension-dialog-trigger",onClick:e=>{n(!0),e.stopPropagation()}},"Suspended"))),r.createElement(tn.V.Portal,null,r.createElement(ye.A,null,r.createElement(we.a,{primitive:tn.V.Overlay})),r.createElement(Oa,{"data-hook":"schema-suspension-dialog","data-table-name":e.name,onClick:e=>{e.stopPropagation()},onEscapeKeyDown:()=>n(!1),onPointerDownOutside:()=>n(!1)},r.createElement(tn.V.Title,null,r.createElement(_e,null,r.createElement(Bt.i,{size:20,color:"#FF5555"}),"Table is suspended: ",e.name)),r.createElement(Ra,null,r.createElement(_e,{gap:"3rem",flexDirection:"column",align:"center"},c&&r.createElement(Pe,{color:"red"},c),l&&r.createElement(Pe,{color:"green"},"WAL resumed successfully!"),e.errorTag&&Ta[e.errorTag]&&r.createElement(Pe,{color:"red","data-hook":"schema-suspension-dialog-error-message",size:"lg",align:"center"},Ta[e.errorTag].message),r.createElement(_e,{gap:"2rem",align:"flex-start"},r.createElement(_e,{gap:"1rem",flexDirection:"column",align:"center"},r.createElement(La,null,r.createElement("img",{src:"assets/icon-copy.svg",alt:"Copy icon",width:"48",height:"48"})),r.createElement(Pe,{color:"foreground",size:"lg"},e.sequencerTxn)),r.createElement(La,null,r.createElement("img",{src:"assets/line.svg",alt:"Broken transation illustration",width:"108",height:"18"})),r.createElement(_e,{gap:"1rem",flexDirection:"column",align:"center"},r.createElement(La,null,r.createElement("img",{src:"assets/icon-database.svg",alt:"Database icon",width:"36",height:"38"})),r.createElement(Pe,{color:"foreground",size:"lg"},e.writerTxn))),r.createElement(Pe,{color:"foreground",size:"lg"},u," transaction",1===u?"":"s"," behind"),e.errorMessage&&r.createElement(_e,{flexDirection:"column",gap:"1rem",style:{width:"100%"}},r.createElement(Pe,{color:"foreground"},"Server message:"),r.createElement(_e,{gap:"0.5rem",style:{width:"100%"}},r.createElement(Da,{name:"server_message",disabled:!0,value:e.errorMessage}),r.createElement(Jt.z,{skin:"secondary",onClick:()=>{navigator.clipboard.writeText(e.errorMessage??"")}},r.createElement(on.f,{size:"18px"})))),e.errorTag&&Ta[e.errorTag]&&r.createElement(Ia,{gap:"0.5rem"},r.createElement(Pe,{color:"foreground"},"Workarounds and documentation:"),r.createElement(rt,{color:"cyan",hoverColor:"cyan",href:Ta[e.errorTag].link,rel:"noreferrer",target:"_blank","data-hook":"schema-suspension-dialog-error-link"},r.createElement(_e,{align:"center",gap:"0.25rem"},r.createElement(ln.d,{size:"16px"}),Ta[e.errorTag].title))),r.createElement(Ia,{gap:"2rem"},r.createElement(Pe,{color:"gray2"},"If you have addressed the issue, restart the process:"),r.createElement(Rn,{name:"resume_transaction_form",onSubmit:async t=>{i(!0),d(void 0);try{const n=await a.query(`ALTER TABLE ${e.name} RESUME WAL${t.resume_transaction_id?` FROM TRANSACTION ${t.resume_transaction_id}`:""}`);n&&n.type===N.DDL?s(!0):d(Ma),i(!1)}catch(e){const t=e;i(!1),d(`${Ma}${t.error?`: ${t.error}`:""}`)}},defaultValues:{resume_transaction_id:void 0},validationSchema:Hn().object({resume_transaction_id:Hn().number().optional().allow("")})},r.createElement(Pa,null,r.createElement(Rn.Item,{name:"resume_transaction_id"},r.createElement(Aa,{name:"resume_transaction_id",placeholder:(parseInt(e.writerTxn)+1).toString()})),r.createElement(Rn.Submit,{disabled:o,prefixIcon:r.createElement(sn.G,{size:"18px"}),variant:"secondary","data-hook":"schema-suspension-dialog-restart-transaction"},o?"Restarting...":"Resume WAL")))))),r.createElement(tn.V.ActionButtons,null,r.createElement(tn.V.Close,{asChild:!0},r.createElement(Jt.z,{prefixIcon:r.createElement(an.W,{size:18}),skin:"secondary","data-hook":"schema-suspension-dialog-dismiss",onClick:()=>n(!1)},"Dismiss"))))))};var za=n(90281);function qa(){return qa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qa.apply(this,arguments)}const Fa=(0,s.ZP)(zt.x).attrs({align:"center",justifyContent:"center"}).withConfig({displayName:"checkbox__Root"})(["\n  width: 16px;\n  height: 16px;\n  flex-shrink: 0;\n  opacity: ",";\n  transition: opacity 275ms ease-in-out;\n  pointer-events: ",";\n"],(({$visible:e})=>e?1:0),(({$visible:e})=>e?"auto":"none")),Za=s.ZP.div.withConfig({displayName:"checkbox__Unchecked"})(["\n  width: 14px;\n  height: 14px;\n  border-radius: 50%;\n  border: 1px solid ",";\n  cursor: pointer;\n"],A("gray2")),Ua=({visible:e,checked:t,onClick:n})=>r.createElement(Fa,qa({},n?{onClick:n}:{},{$visible:e}),t?r.createElement(za.e,{size:"16px"}):r.createElement(Za,null)),ja=(0,s.ZP)(Pe).withConfig({displayName:"Row__Type"})(["\n  margin-right: 1rem;\n  flex: 0;\n  transition: opacity ","ms;\n"],Q.REG),Ha=(0,s.ZP)(Pe).withConfig({displayName:"Row__Title"})(["\n  cursor: ",";\n\n  .highlight {\n    background-color: #7c804f;\n    color: ",";\n  }\n"],(({kind:e})=>["folder","table"].includes(e)?"pointer":"initial"),(({theme:e})=>e.color.foreground)),Ga=(0,s.ZP)(Jt.z).withConfig({displayName:"Row__CopyButton"})(["\n  && {\n    position: absolute;\n    z-index: 2;\n    right: ",";\n    opacity: 0;\n    background: ",";\n    padding-top: 1.2rem;\n    padding-bottom: 1.2rem;\n    font-size: 1.3rem;\n\n    .highlight {\n      background-color: #7c804f;\n      color: ",";\n    }\n  }\n"],(({suspended:e})=>e?"13rem":"1rem"),(({theme:e})=>e.color.backgroundLighter),(({theme:e})=>e.color.foreground)),Va=s.ZP.div.withConfig({displayName:"Row__Wrapper"})(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  padding: ",";\n  padding-left: 1rem;\n  transition: background ","ms;\n\n  &:hover,\n  &:active {\n    background: ",";\n  }\n\n  &:hover\n    ",",\n    &:active\n    "," {\n    opacity: 1;\n  }\n\n  &:hover "," {\n    opacity: 0;\n  }\n"],(({suspended:e})=>e?"0":"0.5rem 0"),Q.REG,A("selection"),Ga,Ga,ja),Wa=(0,s.ZP)(Ha).withConfig({displayName:"Row__StyledTitle"})(["\n  z-index: 1;\n"]),$a=s.ZP.span.withConfig({displayName:"Row__TableActions"})(["\n  z-index: 1;\n  position: relative;\n"]),Qa=s.ZP.div.withConfig({displayName:"Row__FlexRow"})(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n  transform: translateX(",");\n  transition: transform 275ms ease-in-out;\n"],(({$selectOpen:e})=>e?"26px":"0")),Ya=s.ZP.span.withConfig({displayName:"Row__Spacer"})(["\n  flex: 1;\n"]),Ka=(0,s.ZP)(Lt.d).withConfig({displayName:"Row__InfoIcon"})(["\n  color: ",";\n"],A("purple")),Xa=(0,s.ZP)(Rt.w).withConfig({displayName:"Row__RocketIcon"})(["\n  color: ",";\n  margin-right: 1rem;\n"],A("orange")),Ja=(0,s.ZP)(It.l).withConfig({displayName:"Row__SortDownIcon"})(["\n  color: ",";\n  margin-right: 0.8rem;\n"],A("green")),eo=(0,s.ZP)(Pt.U).withConfig({displayName:"Row__RightArrowIcon"})(["\n  color: ",";\n  margin-right: 0.8rem;\n  cursor: pointer;\n"],A("gray2")),to=(0,s.ZP)(eo).withConfig({displayName:"Row__DownArrowIcon"})(["\n  transform: rotateZ(90deg);\n"]),no=(0,s.ZP)(At.B).withConfig({displayName:"Row__DotIcon"})(["\n  color: ",";\n  margin-right: 1rem;\n"],A("gray2")),ro=s.ZP.div.withConfig({displayName:"Row__InfoIconWrapper"})(["\n  display: flex;\n  padding: 0 1rem;\n  align-items: center;\n  justify-content: center;\n"]),ao=({className:e,designatedTimestamp:t,description:n,expanded:a,kind:o,indexed:i,name:l,partitionBy:s,walEnabled:c,walTableData:d,onClick:u,suffix:m,tooltip:g,type:p,selectOpen:f,selected:h,onSelectToggle:b})=>{const{query:E}=(0,r.useContext)(en);return r.createElement(Va,{"data-hook":"schema-row",className:e,expanded:a,suspended:d?.suspended&&"table"===o,onClick:e=>{"table"===o&&f&&b?b(l):u?.(e)}},r.createElement(zt.x,{align:"center",justifyContent:"flex-start",gap:"2rem",style:{width:"100%",position:"relative"}},"table"===o&&r.createElement("div",{style:{position:"absolute"}},r.createElement(Ua,{visible:f&&void 0!==b,checked:h})),r.createElement(Qa,{$selectOpen:f},"table"===o&&r.createElement(r.Fragment,null,r.createElement(Xt,{partitionBy:s,walEnabled:c,suspended:d?.suspended})),"column"===o&&i&&r.createElement(Ye,{icon:r.createElement(Xa,{size:"13px"}),placement:"top",tooltip:"Indexed"}),"folder"===o&&a&&r.createElement(to,{size:"14px"}),"folder"===o&&!a&&r.createElement(eo,{size:"14px"}),"column"===o&&!i&&l===t&&r.createElement(Ye,{icon:r.createElement(Ja,{size:"14px"}),placement:"top",tooltip:"Designated timestamp"}),"column"===o&&!i&&l!==t&&r.createElement(no,{size:"12px"}),r.createElement(Wa,{color:"foreground",ellipsis:!0,kind:o,"data-hook":`schema-${o}-title`},r.createElement(Mt(),{highlightClassName:"highlight",searchWords:[E??""],textToHighlight:l})),m,r.createElement(Ya,null),p&&r.createElement(ja,{_style:"italic",color:"pinkLighter",transform:"lowercase"},p),d?.suspended&&"table"===o&&r.createElement($a,null,r.createElement(Ba,{walTableData:d})),g&&n&&r.createElement(Ye,{icon:r.createElement(ro,null,r.createElement(Ka,{size:"10px"})),placement:"right",tooltip:n})),!g&&r.createElement(Pe,{color:"comment"},n)))};function oo(){return oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oo.apply(this,arguments)}const io=s.ZP.ul.withConfig({displayName:"Tree__Ul"})(["\n  padding: 0;\n  margin: 0;\n"]),lo=s.ZP.li.withConfig({displayName:"Tree__Li"})(["\n  list-style: none;\n  padding: 0 1rem;\n"]),so=e=>{const{name:t,kind:n,initiallyOpen:a,onOpen:o,render:i,children:l=[],wrapper:s}=e,[c,d]=(0,r.useState)(a??!1),[u,m]=(0,r.useState)(!1),[g,p]=(0,r.useState)(l),f=(0,r.useRef)(!0),h=(0,r.useCallback)((async()=>{const e={setChildren:e=>{f.current&&p(e)}};"function"==typeof o&&(m(!0),await o(e),f.current&&m(!1))}),[o]),b=(0,r.useCallback)((async()=>{u||c||await h(),d(!c)}),[c,u,h]);return(0,r.useEffect)((()=>(c&&"function"==typeof o&&0===g.length&&!u&&(async()=>{f.current&&await h()})(),()=>{f.current=!1})),[]),(0,r.useEffect)((()=>{d(a??!1)}),[a]),r.createElement(lo,null,"function"==typeof i?i({toggleOpen:b,isOpen:c,isLoading:u}):r.createElement(ao,{kind:n??"folder",name:t,onClick:()=>d(!c)}),c&&r.createElement(uo,{condition:Boolean(s),wrapper:e=>r.createElement(s??r.Fragment,{},e)},r.createElement(co,{root:g})))},co=({root:e})=>r.createElement(io,null,e.map((e=>r.createElement(so,oo({key:e.name},e))))),uo=({condition:e,wrapper:t,children:n})=>e?t(n):n;var mo=n(95726),go=n(849);const po=s.ZP.div.withConfig({displayName:"GithubBanner__Wrapper"})(["\n  position: fixed;\n  display: flex;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: 100%;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n  overflow: hidden;\n"],A("pink")),fo=s.ZP.span.withConfig({displayName:"GithubBanner__GithubLink"})(["\n  text-decoration: underline;\n"]),ho=(0,s.ZP)(ve.x).withConfig({displayName:"GithubBanner__CloseIcon"})(["\n  position: absolute;\n  right: 1rem;\n  color: ",";\n\n  &:hover {\n    cursor: pointer;\n  }\n"],A("black")),bo=(0,s.ZP)(go.U).withConfig({displayName:"GithubBanner__StarIcon"})(["\n  color: ",";\n"],A("yellow")),Eo=({onClick:e})=>r.createElement(po,null,r.createElement(rt,{hoverColor:"black",href:"https://github.com/questdb/questdb",weight:800},"If you like QuestDB, give us a ",r.createElement(bo,{size:"14px"}),"on",r.createElement(fo,null,"Github")),r.createElement(ho,{onClick:e,size:"20px"}));var yo=n(45020),wo=n(99106),vo=n(71073),Co=n(18373),xo=n(18226);const _o=s.ZP.div.withConfig({displayName:"BuildVersion__Wrapper"})(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n\n  & > :not(:last-child) {\n    margin-right: 1rem;\n  }\n"]),ko=(0,s.ZP)(se).withConfig({displayName:"BuildVersion__ReleaseNotesButton"})(["\n  position: relative;\n  ","\n  gap: 0.5rem;\n"],(({enterprise:e})=>e?"background: #322733;":"")),So=s.ZP.a.withConfig({displayName:"BuildVersion__ReleaseLink"})(["\n  text-decoration: none;\n"]),To=(0,s.ZP)(yo.k).withConfig({displayName:"BuildVersion__UpgradeIcon"})(["\n  color: ",";\n"],(({theme:e})=>e.color.green)),No=s.ZP.span.withConfig({displayName:"BuildVersion__NewestRelease"})(["\n  color: ",";\n  font-size: ",";\n"],(({theme:e})=>e.color.green),(({theme:e})=>e.fontSize.xs)),Oo={dev:{label:"QuestDB Dev"},oss:{label:"QuestDB"},enterprise:{icon:r.createElement(wo.S,{size:"18px"}),label:"QuestDB Enterprise"},"enterprise pro":{icon:r.createElement(vo.H,{size:"18px"}),label:"QuestDB Enterprise Pro"},"enterprise ultimate":{icon:r.createElement(Co.$,{size:"18px"}),label:"QuestDB Enterprise Ultimate"}},Ro=()=>{const{quest:e,buildVersion:t,commitHash:n}=(0,r.useContext)(ra),[a,o]=(0,r.useState)(null);if((0,r.useEffect)((()=>{t.version&&t.type.includes("oss")&&e.getLatestRelease().then((e=>{e.name&&o(e)})).catch((e=>{console.error(e)}))}),[t]),""===t.version&&!n.length)return null;const i=t.type.includes("enterprise"),l=((e,t)=>{if(void 0===t)return!1;const n=e.type.includes("enterprise");try{if(e.version){const r=(0,xo.qu)(e.version,t,"<");return!n&&r}return!1}catch(e){return!1}})(t,a?.name),s=l?a?.html_url:"https://github.com/questdb/questdb"+(t?`/releases/tag/${t.version}`:`/commit/${n}`),{label:c,icon:d}=Oo[t.type]??Oo.dev;return r.createElement(_o,null,r.createElement(So,{href:i?"https://questdb.io/enterprise":s,rel:"noopener noreferrer",target:"_blank"},r.createElement(ko,{enterprise:i,title:["dev","oss"].includes(t.type)?"Show "+(t?"release notes":"commit details"):""},d,c,t.version?` ${t.version}`:"",!i&&r.createElement(ln.d,{size:"16px"}),l&&r.createElement(r.Fragment,null,r.createElement(To,{size:"18px"}),r.createElement(No,null,a?.name)))))},Io=s.ZP.div.withConfig({displayName:"ConnectionStatus__Wrapper"})(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n"]),Po=s.ZP.div.withConfig({displayName:"ConnectionStatus__StatusIcon"})(["\n  display: block;\n  width: 0.6rem;\n  height: 0.6rem;\n  border-radius: 50%;\n  background-color: ",";\n  margin-right: 0.6rem;\n"],(e=>e.isConnected?A("green"):A("red"))),Ao=()=>{const[e,t]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{k.subscribe(S.MSG_CONNECTION_OK,(()=>{t(!0)})),k.subscribe(S.MSG_CONNECTION_ERROR,(()=>{t(!1)}))}),[e]),r.createElement(Io,null,r.createElement(Po,{isConnected:e}),e?r.createElement(Pe,{color:"white"},"Connected"):r.createElement(Pe,{color:"white"},"Error connecting to QuestDB"))},Lo=s.ZP.div.withConfig({displayName:"Footer__Wrapper"})(["\n  position: absolute;\n  display: flex;\n  height: 4rem;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding-left: 45px;\n"]),Do=s.ZP.div.withConfig({displayName:"Footer__LeftContainer"})(["\n  display: flex;\n  padding-left: 1rem;\n  align-items: center;\n  flex: 1;\n"]),Mo=s.ZP.div.withConfig({displayName:"Footer__RightContainer"})(["\n  display: flex;\n  padding-right: 1rem;\n  align-items: center;\n\n  & > *:not(:last-child) {\n    margin-right: 1rem;\n  }\n"]),Bo=(0,s.vJ)(["\n  .github-banner-enter {\n    max-height: 0;\n  }\n\n  .github-banner-enter-active {\n    max-height: 4rem;\n    transition: all ","ms;\n  }\n\n  .github-banner-exit,\n  .github-banner-enter-done {\n    max-height: 4rem;\n  }\n\n  .github-banner-exit-active {\n    max-height: 0;\n    transition: all ","ms;\n  }\n"],Q.REG,Q.REG),zo=()=>{const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(!0),o=(0,r.useCallback)((()=>{t(!1)}),[]),{consoleConfig:i}=gr();return(0,r.useEffect)((()=>{setTimeout((()=>{t(!0)}),2e3),k.subscribe(S.MSG_CONNECTION_ERROR,(()=>{a(!1)})),k.subscribe(S.MSG_CONNECTION_OK,(()=>{a(!0)}))}),[]),r.createElement(Lo,{id:"footer"},r.createElement(Do,null,r.createElement(Pe,{color:"foreground"},"Copyright  ",(new Date).getFullYear()," QuestDB")),r.createElement(Mo,null,r.createElement(Ao,null),n&&r.createElement(Ro,null),r.createElement(rt,{color:"foreground",hoverColor:"cyan",href:"https://github.com/questdb/questdb",rel:"noreferrer",target:"_blank"},r.createElement(mo.E,{size:"18px"}))),r.createElement(Bo,null),r.createElement(lt.Z,{classNames:"github-banner",in:e&&i.githubBanner,timeout:Q.REG,unmountOnExit:!0},r.createElement(Eo,{onClick:o})))};var qo=n(42884);const Fo="#2c2e3d",Zo={base:"vs-dark",inherit:!0,rules:[{background:Fo,token:""},{foreground:"6272a4",token:"comment"},{foreground:"f1fa8c",token:"string"},{foreground:"50fa7b",token:"number"},{foreground:"f1fa8c",token:"string.sql"},{foreground:"ff79c6",token:"operator.sql"},{foreground:"8be9fd",fontStyle:"italic",token:"dataType"},{foreground:"8be9fd",token:"predefined.sql"},{foreground:"8be9fd",token:"function"},{foreground:"bd93f9",token:"constant.numeric"},{foreground:"bd93f9",token:"constant.language"},{foreground:"bd93f9",token:"constant.character"},{foreground:"bd93f9",token:"constant.other"},{foreground:"ffb86c",token:"variable.other.readwrite.instance"},{foreground:"ff79c6",token:"constant.character.escaped"},{foreground:"ff79c6",token:"constant.character.escape"},{foreground:"ff79c6",token:"string source"},{foreground:"ff79c6",token:"string source.ruby"},{foreground:"ff79c6",token:"keyword"},{foreground:"ff79c6",token:"storage"},{foreground:"8be9fd",fontStyle:"italic",token:"storage.type"},{foreground:"50fa7b",fontStyle:"underline",token:"entity.name.class"},{foreground:"50fa7b",fontStyle:"italic underline",token:"entity.other.inherited-class"},{foreground:"50fa7b",token:"entity.name.function"},{foreground:"ffb86c",fontStyle:"italic",token:"variable.parameter"},{foreground:"ff79c6",token:"entity.name.tag"},{foreground:"50fa7b",token:"entity.other.attribute-name"},{foreground:"8be9fd",token:"support.function"},{foreground:"6be5fd",token:"support.constant"},{foreground:"66d9ef",fontStyle:" italic",token:"support.type"},{foreground:"66d9ef",fontStyle:" italic",token:"support.class"},{foreground:"f8f8f0",background:"ff79c6",token:"invalid"},{foreground:"f8f8f0",background:"bd93f9",token:"invalid.deprecated"},{foreground:"cfcfc2",token:"meta.structure.dictionary.json string.quoted.double.json"},{foreground:"6272a4",token:"meta.diff"},{foreground:"6272a4",token:"meta.diff.header"},{foreground:"ff79c6",token:"markup.deleted"},{foreground:"50fa7b",token:"markup.inserted"},{foreground:"e6db74",token:"markup.changed"},{foreground:"bd93f9",token:"constant.numeric.line-number.find-in-files - match"},{foreground:"e6db74",token:"entity.name.filename"},{foreground:"f83333",token:"message.error"},{foreground:"eeeeee",token:"punctuation.definition.string.begin.json - meta.structure.dictionary.value.json"},{foreground:"eeeeee",token:"punctuation.definition.string.end.json - meta.structure.dictionary.value.json"},{foreground:"8be9fd",token:"meta.structure.dictionary.json string.quoted.double.json"},{foreground:"f1fa8c",token:"meta.structure.dictionary.value.json string.quoted.double.json"},{foreground:"50fa7b",token:"meta meta meta meta meta meta meta.structure.dictionary.value string"},{foreground:"ffb86c",token:"meta meta meta meta meta meta.structure.dictionary.value string"},{foreground:"ff79c6",token:"meta meta meta meta meta.structure.dictionary.value string"},{foreground:"bd93f9",token:"meta meta meta meta.structure.dictionary.value string"},{foreground:"50fa7b",token:"meta meta meta.structure.dictionary.value string"},{foreground:"ffb86c",token:"meta meta.structure.dictionary.value string"}],colors:{"activityBar.activeBackground":"#bd93f910","activityBar.activeBorder":"#ff79c680","activityBar.background":"#343746","activityBar.foreground":"#f8f8f2","activityBar.inactiveForeground":"#6272a4","activityBarBadge.background":"#ff79c6","activityBarBadge.foreground":"#f8f8f2","badge.background":"#44475a","badge.foreground":"#f8f8f2","breadcrumb.activeSelectionForeground":"#f8f8f2","breadcrumb.background":Fo,"breadcrumb.focusForeground":"#f8f8f2","breadcrumb.foreground":"#6272a4","breadcrumbPicker.background":"#191a21","button.background":"#44475a","button.foreground":"#f8f8f2","button.secondaryBackground":Fo,"button.secondaryForeground":"#f8f8f2","button.secondaryHoverBackground":"#343746","debugToolBar.background":"#21222c","diffEditor.insertedTextBackground":"#50fa7b20","diffEditor.removedTextBackground":"#ff555550","dropdown.background":"#343746","dropdown.border":"#191a21","dropdown.foreground":"#f8f8f2","editor.background":Fo,"editor.findMatchBackground":"#ffb86c80","editor.findMatchHighlightBackground":"#ffffff40","editor.findRangeHighlightBackground":"#44475a75","editor.foldBackground":"#21222c","editor.foreground":"#f8f8f2","editor.hoverHighlightBackground":"#8be9fd50","editor.lineHighlightBorder":"#383b4b","editor.lineHighlightBackground":"#383b4b","editor.rangeHighlightBackground":"#bd93f915","editor.selectionBackground":"#44475a","editor.selectionHighlightBackground":"#424450","editor.snippetFinalTabstopHighlightBackground":Fo,"editor.snippetFinalTabstopHighlightBorder":"#50fa7b","editor.snippetTabstopHighlightBackground":Fo,"editor.snippetTabstopHighlightBorder":"#6272a4","editor.wordHighlightBackground":"#8be9fd50","editor.wordHighlightStrongBackground":"#50fa7b50","editorBracketHighlight.foreground1":"#f8f8f2","editorBracketHighlight.foreground2":"#ff79c6","editorBracketHighlight.foreground3":"#8be9fd","editorBracketHighlight.foreground4":"#50fa7b","editorBracketHighlight.foreground5":"#bd93f9","editorBracketHighlight.foreground6":"#ffb86c","editorBracketHighlight.unexpectedBracket.foreground":"#ff5555","editorCodeLens.foreground":"#6272a4","editorError.foreground":"#ff5555","editorGroup.border":"#bd93f9","editorGroup.dropBackground":"#44475a70","editorGroupHeader.tabsBackground":"#191a21","editorGutter.addedBackground":"#50fa7b80","editorGutter.deletedBackground":"#ff555580","editorGutter.modifiedBackground":"#8be9fd80","editorHoverWidget.background":Fo,"editorHoverWidget.border":"#6272a4","editorIndentGuide.activeBackground":"#ffffff45","editorIndentGuide.background":"#ffffff1a","editorLineNumber.foreground":"#6272a4","editorLink.activeForeground":"#8be9fd","editorMarkerNavigation.background":"#21222c","editorOverviewRuler.addedForeground":"#50fa7b80","editorOverviewRuler.border":"#191a21","editorOverviewRuler.currentContentForeground":"#50fa7b","editorOverviewRuler.deletedForeground":"#ff555580","editorOverviewRuler.errorForeground":"#ff555580","editorOverviewRuler.incomingContentForeground":"#bd93f9","editorOverviewRuler.infoForeground":"#8be9fd80","editorOverviewRuler.modifiedForeground":"#8be9fd80","editorOverviewRuler.selectionHighlightForeground":"#ffb86c","editorOverviewRuler.warningForeground":"#ffb86c80","editorOverviewRuler.wordHighlightForeground":"#8be9fd","editorOverviewRuler.wordHighlightStrongForeground":"#50fa7b","editorRuler.foreground":"#ffffff1a","editorSuggestWidget.background":"#21222c","editorSuggestWidget.foreground":"#f8f8f2","editorSuggestWidget.selectedBackground":"#44475a","editorWarning.foreground":"#8be9fd","editorWhitespace.foreground":"#ffffff1a","editorWidget.background":"#21222c",errorForeground:"#ff5555","extensionButton.prominentBackground":"#50fa7b90","extensionButton.prominentForeground":"#f8f8f2","extensionButton.prominentHoverBackground":"#50fa7b60",focusBorder:"#6272a4",foreground:"#f8f8f2","gitDecoration.conflictingResourceForeground":"#ffb86c","gitDecoration.deletedResourceForeground":"#ff5555","gitDecoration.ignoredResourceForeground":"#6272a4","gitDecoration.modifiedResourceForeground":"#8be9fd","gitDecoration.untrackedResourceForeground":"#50fa7b","input.background":Fo,"input.border":"#191a21","input.foreground":"#f8f8f2","input.placeholderForeground":"#6272a4","inputOption.activeBorder":"#bd93f9","inputValidation.errorBorder":"#ff5555","inputValidation.infoBorder":"#ff79c6","inputValidation.warningBorder":"#ffb86c","list.activeSelectionBackground":"#44475a","list.activeSelectionForeground":"#f8f8f2","list.dropBackground":"#44475a","list.errorForeground":"#ff5555","list.focusBackground":"#44475a75","list.highlightForeground":"#8be9fd","list.hoverBackground":"#44475a75","list.inactiveSelectionBackground":"#44475a75","list.warningForeground":"#ffb86c","listFilterWidget.background":"#343746","listFilterWidget.noMatchesOutline":"#ff5555","listFilterWidget.outline":"#424450","merge.currentHeaderBackground":"#50fa7b90","merge.incomingHeaderBackground":"#bd93f990","panel.background":Fo,"panel.border":"#bd93f9","panelTitle.activeBorder":"#ff79c6","panelTitle.activeForeground":"#f8f8f2","panelTitle.inactiveForeground":"#6272a4","peekView.border":"#44475a","peekViewEditor.background":Fo,"peekViewEditor.matchHighlightBackground":"#f1fa8c80","peekViewResult.background":"#21222c","peekViewResult.fileForeground":"#f8f8f2","peekViewResult.lineForeground":"#f8f8f2","peekViewResult.matchHighlightBackground":"#f1fa8c80","peekViewResult.selectionBackground":"#44475a","peekViewResult.selectionForeground":"#f8f8f2","peekViewTitle.background":"#191a21","peekViewTitleDescription.foreground":"#6272a4","peekViewTitleLabel.foreground":"#f8f8f2","pickerGroup.border":"#bd93f9","pickerGroup.foreground":"#8be9fd","progressBar.background":"#ff79c6","selection.background":"#bd93f9","settings.checkboxBackground":"#21222c","settings.checkboxBorder":"#191a21","settings.checkboxForeground":"#f8f8f2","settings.dropdownBackground":"#21222c","settings.dropdownBorder":"#191a21","settings.dropdownForeground":"#f8f8f2","settings.headerForeground":"#f8f8f2","settings.modifiedItemIndicator":"#ffb86c","settings.numberInputBackground":"#21222c","settings.numberInputBorder":"#191a21","settings.numberInputForeground":"#f8f8f2","settings.textInputBackground":"#21222c","settings.textInputBorder":"#191a21","settings.textInputForeground":"#f8f8f2","sideBar.background":"#21222c","sideBarSectionHeader.background":Fo,"sideBarSectionHeader.border":"#191a21","sideBarTitle.foreground":"#f8f8f2","statusBar.background":"#191a21","statusBar.debuggingBackground":"#ff5555","statusBar.debuggingForeground":"#191a21","statusBar.foreground":"#f8f8f2","statusBar.noFolderBackground":"#191a21","statusBar.noFolderForeground":"#f8f8f2","statusBarItem.prominentBackground":"#ff5555","statusBarItem.prominentHoverBackground":"#ffb86c","statusBarItem.remoteBackground":"#bd93f9","statusBarItem.remoteForeground":Fo,"tab.activeBackground":Fo,"tab.activeBorderTop":"#ff79c680","tab.activeForeground":"#f8f8f2","tab.border":"#191a21","tab.inactiveBackground":"#21222c","tab.inactiveForeground":"#6272a4","terminal.ansiBlack":"#21222c","terminal.ansiBlue":"#bd93f9","terminal.ansiBrightBlack":"#6272a4","terminal.ansiBrightBlue":"#d6acff","terminal.ansiBrightCyan":"#a4ffff","terminal.ansiBrightGreen":"#69ff94","terminal.ansiBrightMagenta":"#ff92df","terminal.ansiBrightRed":"#ff6e6e","terminal.ansiBrightWhite":"#ffffff","terminal.ansiBrightYellow":"#ffffa5","terminal.ansiCyan":"#8be9fd","terminal.ansiGreen":"#50fa7b","terminal.ansiMagenta":"#ff79c6","terminal.ansiRed":"#ff5555","terminal.ansiWhite":"#f8f8f2","terminal.ansiYellow":"#f1fa8c","terminal.background":Fo,"terminal.foreground":"#f8f8f2","titleBar.activeBackground":"#21222c","titleBar.activeForeground":"#f8f8f2","titleBar.inactiveBackground":"#191a21","titleBar.inactiveForeground":"#6272a4","walkThrough.embeddedEditorBackground":"#21222c"}},Uo={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\$\%\^\&\*\-\+\[\{\]\}\\\|\;\:\"\,\<\>\/\?\s]+)/g,comments:{lineComment:"--",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},jo=["ALL","AND","ANY","BETWEEN","EXISTS","IN","LIKE","NOT","OR","SOME","EXCEPT","INTERSECT","UNION","APPLY","CROSS","FULL","INNER","JOIN","LEFT","OUTER","RIGHT","CONTAINS","FREETEXT","IS","NULL","PIVOT","UNPIVOT","MATCHED","EXPLAIN"];var Ho=n(1924);const Go={defaultToken:"",tokenPostfix:".sql",ignoreCase:!0,brackets:[{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],dataTypes:Ho.DJ,keywords:Ho.Hw,operators:jo,builtinFunctions:Ho.wk,builtinVariables:["@@DATEFIRST","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","@@CURSOR_ROWS","@@FETCH_STATUS","@@DATEFIRST","@@PROCID","@@ERROR","@@IDENTITY","@@ROWCOUNT","@@TRANCOUNT","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACKET_ERRORS","@@PACK_RECEIVED","@@PACK_SENT","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE"],pseudoColumns:["$ACTION","$IDENTITY","$ROWGUID","$PARTITION"],tokenizer:{root:[{include:"@comments"},{include:"@whitespace"},{include:"@pseudoColumns"},{include:"@numbers"},{include:"@strings"},{include:"@complexIdentifiers"},{include:"@scopes"},[/[;,.]/,"delimiter"],[/[()]/,"@brackets"],[/[\w@#$]+/,{cases:{"@operators":"operator","@builtinVariables":"predefined","@builtinFunctions":"predefined","@keywords":"keyword","@dataTypes":"dataType","@default":"identifier"}}],[/[<>=!%&+\-*/|~^]/,"operator"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"],[/\/\*/,{token:"comment.quote",next:"@comment"}]],comment:[[/[^*/]+/,"comment"],[/\*\//,{token:"comment.quote",next:"@pop"}],[/./,"comment"]],pseudoColumns:[[/[$][A-Za-z_][\w@#$]*/,{cases:{"@pseudoColumns":"predefined","@default":"identifier"}}]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/N'/,{token:"string",next:"@string"}],[/'/,{token:"string",next:"@string"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],complexIdentifiers:[[/\[/,{token:"identifier.quote",next:"@bracketedIdentifier"}],[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],bracketedIdentifier:[[/[^\]]+/,"identifier"],[/]]/,"identifier"],[/]/,{token:"identifier.quote",next:"@pop"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]],scopes:[[/BEGIN\s+(DISTRIBUTED\s+)?TRAN(SACTION)?\b/i,"keyword"],[/BEGIN\s+TRY\b/i,{token:"keyword.try"}],[/END\s+TRY\b/i,{token:"keyword.try"}],[/BEGIN\s+CATCH\b/i,{token:"keyword.catch"}],[/END\s+CATCH\b/i,{token:"keyword.catch"}],[/(BEGIN|CASE)\b/i,{token:"keyword.block"}],[/END\b/i,{token:"keyword.block"}],[/WHEN\b/i,{token:"keyword.choice"}],[/THEN\b/i,{token:"keyword.choice"}]]}};let Vo=function(e){return e.High="1",e.MediumHigh="2",e.Medium="3",e.MediumLow="4",e.Low="5",e}({}),Wo=function(e){return e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet",e}({});const $o=({tables:e,range:t,priority:n,openQuote:r,nextCharQuote:a})=>e.map((e=>({label:e.table_name,kind:Wo.Class,insertText:r?e.table_name+(a?"":'"'):/^[a-z0-9_]+$/i.test(e.table_name)?e.table_name:`"${e.table_name}"`,sortText:n,range:t}))),Qo=({columns:e,range:t,withTableName:n,priority:r})=>n?e.map((e=>({label:{label:`${e.table_name}.${e.column_name}`,detail:"",description:e.data_type},kind:Wo.Enum,insertText:`${e.table_name}.${e.column_name}`,sortText:r,range:t}))):$(e.map((e=>e.column_name))).map((n=>{const a=e.filter((e=>e.column_name===n)).map((e=>e.table_name));return{label:{label:n,detail:` (${a.sort().join(", ")})`,description:a.length>1?"":e.find((e=>e.column_name===n))?.data_type},kind:Wo.Enum,insertText:n,sortText:r,range:t}})),Yo=e=>[...Ho.wk.map((t=>({label:t,kind:Wo.Function,insertText:t,range:e}))),...Ho.DJ.map((t=>({label:t,kind:Wo.Keyword,insertText:t,range:e}))),...Ho.Hw.map((t=>{const n=t.toUpperCase();return{label:n,kind:Wo.Keyword,insertText:n,range:e}})),...jo.map((t=>{const n=t.toUpperCase();return{label:n,kind:Wo.Operator,insertText:n.toUpperCase(),range:e}}))],Ko=e=>e.replace(/(^")|("$)/g,""),Xo={provideDocumentFormattingEdits(e,t){const n=D(e.getValue(),{indent:" ".repeat(t.tabSize)});return[{range:e.getFullModelRange(),text:n}]}},Jo={provideDocumentRangeFormattingEdits:(e,t,n)=>[{range:t,text:D(e.getValueInRange(t),{indent:" ".repeat(n.tabSize)})}]};var ei=function(e){return e.EXECUTE="execute",e.FOCUS_GRID="focus_grid",e.ADD_NEW_TAB="add_new_tab",e.CLOSE_ACTIVE_TAB="close_active_tab",e.SEARCH_DOCS="search_docs",e}(ei||{});const ti=s.ZP.div.withConfig({displayName:"QueryResult__Wrapper"})(["\n  display: flex;\n  align-items: center;\n  margin-top: 0.2rem;\n  overflow: hidden;\n  ",";\n\n  svg {\n    margin-right: 0.2rem;\n    color: ",";\n  }\n"],K,A("foreground")),ni=s.ZP.div.withConfig({displayName:"QueryResult__Details"})(["\n  display: flex;\n"]),ri=s.ZP.div.withConfig({displayName:"QueryResult__DetailsColumn"})(["\n  margin-left: 1rem;\n"]),ai=(0,s.ZP)(Pe).withConfig({displayName:"QueryResult__DetailsText"})(["\n  margin-right: 0.5rem;\n"]),oi=e=>Math.round(100*(e+Number.EPSILON))/100,ii=e=>"0"===e?r.createElement(Pe,{color:"gray2"},"0"):r.createElement(Pe,{color:"orange"},e),li=e=>0===e?"0":e>1e9?`${oi(e/1e9)}s`:e>1e6?`${oi(e/1e6)}ms`:e>1e3?`${oi(e/1e3)}s`:`${e}ns`,si=({compiler:e,authentication:t,count:n,execute:a,fetch:o,rowCount:i})=>r.createElement(ti,{_height:95,duration:Q.FAST},r.createElement("div",null,r.createElement(Pe,{color:"gray2"},i.toLocaleString()," row",i>1?"s":""," in",li(o))),r.createElement(ni,null,r.createElement(ri,null,r.createElement(ai,{color:"foreground"},"Execute: ",ii(li(a))),r.createElement(ai,{color:"foreground"},"Network:",ii(li(o-a))),r.createElement(ai,{color:"foreground"},"Total:",ii(li(o)))),r.createElement(ri,null,r.createElement(ai,{align:"right",color:"gray2",size:"sm"},"Count: ",li(n)),r.createElement(ai,{align:"right",color:"gray2",size:"sm"},"Authentication: ",li(t)),r.createElement(ai,{align:"right",color:"gray2",size:"sm"},"Compile: ",li(e))))),ci=(0,s.F4)(["\n  0% {\n    background-position: left bottom;\n  }\n\n  100% {\n    background-position: right bottom;\n  }\n"]),di=s.ZP.div.withConfig({displayName:"Loader__Wrapper"})(["\n  position: fixed;\n  height: 0.4rem;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 15;\n  background: linear-gradient(\n      to left,\n      "," 30%,\n      "," 80%,\n      "," 100%\n    )\n    repeat;\n  background-size: 50% 100%;\n  animation-name: ",";\n  animation-duration: 1s;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n"],A("selection"),A("foreground"),A("selection"),ci),ui=({show:e})=>{const[t,n]=(0,r.useState)(!1),a=(0,r.useRef)();return(0,r.useEffect)((()=>()=>{clearTimeout(a.current)}),[]),(0,r.useEffect)((()=>{clearTimeout(a.current),e?a.current=window.setTimeout((()=>{n(!0)}),500):n(!1)}),[e]),r.createElement(r.Fragment,null,r.createElement(lt.Z,{classNames:"fade-slow",in:t&&e,timeout:Q.SLOW,unmountOnExit:!0},r.createElement(di,null)))};function mi(){return mi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mi.apply(this,arguments)}const gi=(0,s.ZP)(Jt.z).withConfig({displayName:"CopyButton__StyledButton"})(["\n  padding: 1.2rem 0.6rem;\n"]),pi=(0,s.ZP)(za.e).withConfig({displayName:"CopyButton__StyledCheckboxCircle"})(["\n  position: absolute;\n  transform: translate(75%, -75%);\n  color: ",";\n"],(({theme:e})=>e.color.green)),fi=({text:e,iconOnly:t})=>{const[n,a]=(0,r.useState)(!1);return r.createElement(gi,mi({skin:"secondary",onClick:t=>{navigator.clipboard.writeText(e),t.stopPropagation(),a(!0),setTimeout((()=>a(!1)),2e3)}},!t&&{prefixIcon:r.createElement(on.f,{size:"16px"})}),n&&r.createElement(pi,{size:"14px"}),t?r.createElement(on.f,{size:"16px"}):"Copy")},hi=(0,s.ZP)(Pe).withConfig({displayName:"query-in-notification__StyledText"})(["\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]),bi=({query:e})=>e?r.createElement(zt.x,{gap:"1rem",align:"center"},r.createElement(hi,{color:"foreground",title:e},e),r.createElement(fi,{text:e,iconOnly:!0})):null;var Ei=n(82259);function yi(){return yi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yi.apply(this,arguments)}qo._m.config({paths:{vs:"assets/vs"}});const wi=(0,s.ZP)(at).withConfig({displayName:"Monaco__Content"})(["\n  position: relative;\n  overflow: hidden;\n\n  .monaco-editor .squiggly-error {\n    background: none;\n    border-bottom: 0.3rem "," solid;\n  }\n\n  .monaco-scrollable-element > .scrollbar > .slider {\n    background: ",";\n  }\n\n  .cursorQueryDecoration {\n    width: 0.2rem !important;\n    background: ",";\n    margin-left: 1.2rem;\n\n    &.hasError {\n      background: ",';\n    }\n  }\n\n  .cursorQueryGlyph,\n  .cancelQueryGlyph {\n    margin-left: 2rem;\n    z-index: 1;\n    cursor: pointer;\n\n    &:after {\n      display: block;\n      content: "";\n      width: 18px;\n      height: 18px;\n    }\n  }\n\n  .cursorQueryGlyph {\n    &:after {\n      background-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIGhlaWdodD0iMThweCIgd2lkdGg9IjE4cHgiIGFyaWEtaGlkZGVuPSJ0cnVlIiBmb2N1c2FibGU9ImZhbHNlIiBmaWxsPSIjNTBmYTdiIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJTdHlsZWRJY29uQmFzZS1zYy1lYTl1bGotMCBrZkRiTmwiPjxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMjR2MjRIMHoiPjwvcGF0aD48cGF0aCBkPSJNMTYuMzk0IDEyIDEwIDcuNzM3djguNTI2TDE2LjM5NCAxMnptMi45ODIuNDE2TDguNzc3IDE5LjQ4MkEuNS41IDAgMCAxIDggMTkuMDY2VjQuOTM0YS41LjUgMCAwIDEgLjc3Ny0uNDE2bDEwLjU5OSA3LjA2NmEuNS41IDAgMCAxIDAgLjgzMnoiPjwvcGF0aD48L3N2Zz4K");\n    }\n  }\n\n  .cancelQueryGlyph {\n    &:after {\n      background-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIGhlaWdodD0iMThweCIgd2lkdGg9IjE4cHgiIGFyaWEtaGlkZGVuPSJ0cnVlIiBmb2N1c2FibGU9ImZhbHNlIiBmaWxsPSIjZmY1NTU1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJTdHlsZWRJY29uQmFzZS1zYy1lYTl1bGotMCBqQ2hkR0siPjxwYXRoIGZpbGw9Im5vbmUiIGQ9Ik0wIDBoMjR2MjRIMHoiPjwvcGF0aD48cGF0aCBkPSJNNyA3djEwaDEwVjdIN3pNNiA1aDEyYTEgMSAwIDAgMSAxIDF2MTJhMSAxIDAgMCAxLTEgMUg2YTEgMSAwIDAgMS0xLTFWNmExIDEgMCAwIDEgMS0xeiI+PC9wYXRoPjwvc3ZnPgo=");\n    }\n  }\n\n  .errorGlyph {\n    margin-left: 2.5rem;\n    margin-top: 0.5rem;\n    z-index: 1;\n    width: 0.75rem !important;\n    height: 0.75rem !important;\n    border-radius: 50%;\n    background: ',";\n  }\n"],A("red"),A("selection"),A("green"),A("red"),A("red")),vi=(0,s.ZP)(Jt.z).withConfig({displayName:"Monaco__CancelButton"})(["\n  padding: 1.2rem 0.6rem;\n"]),Ci=()=>{const e=_a(),{buffers:t,editorRef:n,monacoRef:a,insertTextAtCursor:i,activeBuffer:l,updateBuffer:s,editorReadyTrigger:c,addBuffer:d}=e,{quest:u}=(0,r.useContext)(ra),[m,g]=(0,r.useState)(),[p,f]=(0,r.useState)(!1),[h,b]=(0,r.useState)(""),[E,y]=(0,r.useState)(!1),w=(0,o.I0)(),v=(0,o.v9)(ea.query.getRunning),C=(0,o.v9)(ea.query.getTables),x=(0,o.v9)(ea.query.getColumns),[_,T]=(0,r.useState)(),O=(0,r.useRef)(),R=(0,r.useRef)(v.value),I=(0,r.useRef)(l),P=(0,r.useRef)(m),A=(0,r.useRef)({}),[L,D]=(0,r.useState)(5+l.value.split("\n").length.toString().length-1),M=(e=!1)=>{w(Lr(e))},B=(e,t)=>{const n=sa(t),r=t.getModel();if(n&&null!==r){const a=I.current.id,o=e.editor.createModel(ia(r.getValue()),oa),i=ua(o,n.query);if(o.dispose(),i.length>0){const r=A.current&&A.current[a]?.error?.query===n.query,o=A.current&&A.current[a]?.range,l=i.find((e=>e.range.startLineNumber===n.row+1));l&&(O.current?.clear(),O.current=t.createDecorationsCollection([{range:new e.Range(l.range.startLineNumber,1,l.range.endLineNumber,1),options:{isWholeLine:!0,linesDecorationsClassName:"cursorQueryDecoration "+(r?"hasError":"")}},{range:new e.Range(l.range.startLineNumber,1,l.range.startLineNumber,1),options:{isWholeLine:!1,glyphMarginClassName:R.current&&P.current?.row&&P.current?.row+1===l.range.startLineNumber?"cancelQueryGlyph":R.current?"":"cursorQueryGlyph"}},...r&&o&&l.range.startLineNumber!==o.startLineNumber?[{range:new e.Range(o.startLineNumber,0,o.startLineNumber,0),options:{isWholeLine:!1,glyphMarginClassName:"errorGlyph"}}]:[]]))}}};(0,r.useEffect)((()=>{Object.keys(A.current).map((e=>{t.find((t=>t.id===parseInt(e)))||delete A.current[e]}))}),[t]),(0,r.useEffect)((()=>{I.current=l}),[l]),(0,r.useEffect)((()=>{!v.value&&m&&(u.abort(),w(Ar()),g(void 0))}),[m,u,w,v]),(0,r.useEffect)((()=>{if(R.current=v.value,v.value&&n?.current){a?.current&&da(a.current,n.current),a?.current&&n?.current&&B(a.current,n?.current);const t=v.isRefresh?{query:h,row:0,column:0}:(e=n.current,la(e)?(e=>{const t=e.getSelection(),n=la(e);if(t&&n){let e=n.length,r=n.charAt(e);for(;e>0&&(" "===r||"\n"===r||";"===r);)e--,r=n.charAt(e);if(e>0)return{query:n.substr(0,e+1),row:t.startLineNumber-1,column:t.startColumn}}})(e):sa(e));t?.query?(setTimeout((()=>{R.current&&w(Rr({type:Sr.LOADING,content:r.createElement(zt.x,{gap:"1rem",align:"center"},r.createElement(Pe,{color:"foreground"},"Running..."),r.createElement(vi,{skin:"error",onClick:()=>M()},r.createElement(Ei.d,{size:"18px"}))),sideContent:r.createElement(bi,{query:t.query})}))}),1e3),u.queryRaw(t.query,{limit:"0,1000",explain:!0}).then((e=>{g(void 0),delete A.current[l.id],w(Ar()),w(Pr(e)),e.type!==N.DDL&&e.type!==N.DML||(w(Rr({content:r.createElement(bi,{query:e.query})})),k.publish(S.MSG_QUERY_SCHEMA)),e.type===N.NOTICE&&(w(Rr({content:r.createElement(Pe,{color:"foreground",ellipsis:!0,title:e.query},e.notice,void 0!==e.query&&""!==e.query&&`: ${e.query}`),type:Sr.NOTICE})),k.publish(S.MSG_QUERY_SCHEMA)),e.type===N.DQL&&(b(t.query),w(Rr({jitCompiled:e.explain?.jitCompiled??!1,content:r.createElement(si,yi({},e.timings,{rowCount:e.count})),sideContent:r.createElement(bi,{query:e.query})})),k.publish(S.MSG_QUERY_DATASET,e))})).catch((e=>{if(A.current[l.id]={error:e},g(void 0),w(Ar()),w(Rr({content:r.createElement(Pe,{color:"red"},e.error),sideContent:r.createElement(bi,{query:t.query}),type:Sr.ERROR})),n?.current&&a?.current){const r=((e,t,n)=>{const r=((e,t)=>{const n=Math.min(t,e.query.length);let r=0,a=0;for(let t=0;t<n;t++)"\n"===e.query.charAt(t)?(r++,a=0):a++;return{lineNumber:r+1+e.row,column:(0===r?a+e.column:a)+1}})(t,n),a=e.getModel();if(a){const t=e.getSelection(),n=la(e);let o;if(o=t&&n?a.getWordAtPosition({column:t.startColumn+r.column,lineNumber:r.lineNumber}):a.getWordAtPosition(r),o)return{startColumn:o.startColumn,endColumn:o.endColumn,startLineNumber:r.lineNumber,endLineNumber:r.lineNumber}}return null})(n.current,t,e.position);r&&(A.current[l.id].range=r,((e,t,n,r)=>{const a=t.getModel();a&&e.editor.setModelMarkers(a,oa,[{message:r,severity:e.MarkerSeverity.Error,startLineNumber:n.startLineNumber,endLineNumber:n.endLineNumber,startColumn:n.startColumn,endColumn:n.endColumn}])})(a?.current,n.current,r,e.error),n?.current.focus(),n?.current.setPosition({lineNumber:r.startLineNumber,column:r.startColumn}),n?.current.revealPosition({lineNumber:r.startLineNumber,column:r.endColumn}))}})),g(t)):w(Ar())}else a?.current&&n?.current&&B(a?.current,n?.current);var e}),[v]),(0,r.useEffect)((()=>{P.current=m,a?.current&&n?.current&&B(a?.current,n?.current)}),[m]);const z=async()=>{p&&a?.current&&n?.current&&(_?.dispose(),y(!0),T(a.current.languages.registerCompletionItemProvider(oa,((e,t=[],n=[])=>({triggerCharacters:'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\n ."'.split(""),provideCompletionItems(r,a){const o=r.getWordUntilPosition(a),i=sa(e),l=r.getValueInRange({startLineNumber:a.lineNumber,startColumn:1,endLineNumber:a.lineNumber,endColumn:a.column});let s=[];const c=/^\s*$/.test(l),d=/(-- |--|\/\/ |\/\/)$/gim.test(l);if(c||d)return null;if(i){const e=ua(r,i.query);if(e.length>0){const l=e.find((e=>e.range.startLineNumber===i.row+1)),d=i.query.match(/(?<=FROM\s)([^ )]+)/gim),u=i.query.match(/(JOIN)\s+([^ ]+)/i),m=i.query.match(/(ALTER TABLE)\s+([^ ]+)/i);d?s=$(d):m&&m[2]&&s.push(m[2]),u&&u[2]&&s.push(u[2]),s=s.map(Ko);const g=r.getValueInRange({startLineNumber:l?.range.startLineNumber??1,startColumn:l?.range.startColumn??1,endLineNumber:a.lineNumber,endColumn:o.startColumn}),p={startLineNumber:a.lineNumber,endLineNumber:a.lineNumber,startColumn:o.startColumn,endColumn:o.endColumn},f=r.getValueInRange({startLineNumber:a.lineNumber,startColumn:o.endColumn,endLineNumber:a.lineNumber,endColumn:o.endColumn+1}),h='"'===g.substr(-1),b='"'==f;if(r.getValueInRange({startLineNumber:a.lineNumber,startColumn:1,endLineNumber:a.lineNumber,endColumn:a.column}),/(FROM|INTO|(ALTER|BACKUP|DROP|REINDEX|RENAME|TRUNCATE|VACUUM) TABLE|JOIN|UPDATE)\s$/gim.test(g)||/'$/gim.test(g)&&!g.endsWith("= '"))return{suggestions:$o({tables:t,range:p,priority:Vo.High,openQuote:h,nextCharQuote:b})};if(/(?:(SELECT|UPDATE).*?(?:(?:,(?:COLUMN )?)|(?:ALTER COLUMN ))?(?:WHERE )?(?: BY )?(?: ON )?(?: SET )?$|ALTER COLUMN )/gim.test(g)&&!c){if(s.length>0){const e=null!==g.match(/\sON\s/gim);return{suggestions:[...Qo({columns:n.filter((e=>s.includes(e.table_name))),range:p,withTableName:e,priority:Vo.High}),...Yo(p)]}}return{suggestions:[...Qo({columns:n,range:p,withTableName:!1,priority:Vo.High}),...$o({tables:t,range:p,priority:Vo.MediumHigh,openQuote:h,nextCharQuote:b}),...Yo(p)]}}if(o.word)return{suggestions:[...$o({tables:t,range:p,priority:Vo.High,openQuote:h,nextCharQuote:b}),...Yo(p)]}}}}}))(n.current,C,x))),y(!1))};return(0,r.useEffect)((()=>{E||z()}),[C,x,a,p]),(0,r.useEffect)((()=>{a.current&&n.current&&da(a.current,n.current)}),[l]),(0,r.useEffect)((()=>(window.addEventListener("focus",z),()=>window.removeEventListener("focus",z))),[]),r.createElement(wi,{onClick:e=>{(e.target.classList.contains("cursorQueryGlyph")||e.target.classList.contains("cancelQueryGlyph"))&&(n?.current?.focus(),M())}},r.createElement(qo.ZP,{beforeMount:e=>{(e=>{e.languages.register({id:oa}),e.languages.setMonarchTokensProvider(oa,Go),e.languages.setLanguageConfiguration(oa,Uo),e.languages.registerDocumentFormattingEditProvider(oa,Xo),e.languages.registerDocumentRangeFormattingEditProvider(oa,Jo)})(e),e.editor.defineTheme("dracula",Zo)},defaultLanguage:oa,onMount:(t,r)=>{a.current=r,n.current=t,r.editor.setTheme("dracula"),t.setModel(r.editor.createModel(l.value,oa)),f(!0),c(t),(({editor:e,insertTextAtCursor:t,toggleRunning:n})=>{k.subscribe(S.MSG_EDITOR_INSERT_COLUMN,(e=>{e&&t(e)})),k.subscribe(S.MSG_QUERY_FIND_N_EXEC,(t=>{if(t){const r=`${t.query};`;ca(e,r,t.options),n()}})),k.subscribe(S.MSG_QUERY_EXEC,(()=>{n(!0)})),k.subscribe(S.MSG_EDITOR_FOCUS,(()=>{const t=e.getPosition();t&&e.setPosition({lineNumber:t.lineNumber+1,column:t?.column}),e.focus()}))})({editor:t,insertTextAtCursor:i,toggleRunning:M}),(({editor:e,monaco:t,runQuery:n,dispatch:r,editorContext:a})=>{e.addAction({id:ei.EXECUTE,label:"Execute command",keybindings:[t.KeyCode.F9,t.KeyMod.CtrlCmd|t.KeyCode.Enter],run:()=>{n()}}),e.addAction({id:ei.ADD_NEW_TAB,label:"Add new tab",keybindings:[t.KeyMod.Alt|t.KeyCode.KeyT],run:()=>{a.addBuffer()}}),e.addAction({id:ei.CLOSE_ACTIVE_TAB,label:"Close current tab",keybindings:[t.KeyMod.Alt|t.KeyCode.KeyW],run:async()=>{const e=await Ea(),t=await ya();e.length>1&&t?.value&&"number"==typeof t?.value&&a.deleteBuffer(t.value)}}),e.addAction({id:ei.SEARCH_DOCS,label:"Search QuestDB Docs",keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.KeyK],run:()=>{const e=document.querySelector(".DocSearch-Button");e&&e.click()}})})({editor:t,monaco:r,runQuery:()=>{R.current||M()},dispatch:w,editorContext:e}),t.onDidChangeCursorPosition((()=>{const e=n.current?.getModel()?.getLineCount();e&&D(e.toString().length-1+5),B(r,t)}));const o=new URLSearchParams(window.location.search),s=o.get("query"),d=t.getModel();if(s&&d){const e=ua(d,s);e&&e.length>0?t.setSelection(e[0].range):ca(t,s,{appendAt:"end"})}o.get("executeQuery")&&M()},saveViewState:!1,onChange:e=>{s(l.id,{value:e})},options:{model:null,fixedOverflowWidgets:!0,fontSize:14,fontFamily:mt.fontMonospace,glyphMargin:!0,renderLineHighlight:"gutter",minimap:{enabled:!1},selectOnLineNumbers:!1,scrollBeyondLastLine:!1,tabSize:2,lineNumbersMinChars:L},theme:"vs-dark"}),r.createElement(ui,{show:!!m||!C}))};var xi=n(99637),_i=n(76410),ki=n(52655);const Si=s.ZP.div.withConfig({displayName:"styles__Wrapper"})(["\n  display: flex;\n  align-items: center;\n  border-right: none;\n  width: 100%;\n  height: ",";\n  ","\n  \n  padding: 0 1rem;\n\n  ",";\n"],(({isMinimized:e})=>e?"auto":"4.5rem"),(({isMinimized:e})=>!e&&`\n    border-bottom: 1px ${A("backgroundDarker")} solid;\n  `),X),Ti=s.ZP.div.withConfig({displayName:"styles__Content"})(["\n  display: flex;\n  margin-left: 0.5rem;\n  white-space: nowrap;\n"]),Ni=s.ZP.div.withConfig({displayName:"styles__SideContent"})(["\n  margin-left: auto;\n  padding-left: 1rem;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]);var Oi=n(46827),Ri=n(96035),Ii=n(60675);const Pi=(0,s.ZP)(Pe).withConfig({displayName:"Timestamp__TimestampText"})(["\n  display: flex;\n  margin-right: 0.5rem;\n  white-space: nowrap;\n"]),Ai=({createdAt:e})=>{const t=(0,r.useMemo)(z,[]);return r.createElement(Pi,{color:"gray2"},"[",(0,Ii.Z)(e,"pppp",{locale:W(t)}),"]")},Li=(0,s.ZP)(Oi.W).withConfig({displayName:"SuccessNotification__CheckmarkOutlineIcon"})(["\n  color: ",";\n  flex-shrink: 0;\n"],A("green")),Di=(0,s.ZP)(Ri.i).withConfig({displayName:"SuccessNotification__ZapIcon"})(["\n  color: ",";\n"],A("yellow")),Mi=e=>{const{createdAt:t,content:n,sideContent:a,jitCompiled:o,isMinimized:i}=e;return r.createElement(Si,{isMinimized:i},r.createElement(Ai,{createdAt:t}),o?r.createElement(Ye,{icon:r.createElement(Di,{size:"16px"}),placement:"top",tooltip:"JIT Compiled"}):r.createElement(Li,{size:"18px"}),r.createElement(Ti,null,n),r.createElement(Ni,null,a))};var Bi=n(2128);const zi=(0,s.ZP)(Bi.e).withConfig({displayName:"ErrorNotification__CloseOutlineIcon"})(["\n  color: ",";\n  flex-shrink: 0;\n"],A("red")),qi=e=>{const{createdAt:t,content:n,sideContent:a,isMinimized:o}=e;return r.createElement(Si,{isMinimized:o},r.createElement(Ai,{createdAt:t}),r.createElement(zi,{size:"18px"}),r.createElement(Ti,null,n),r.createElement(Ni,null,a))},Fi=e=>{const{createdAt:t,content:n,sideContent:a,isMinimized:o}=e;return r.createElement(Si,{isMinimized:o},r.createElement(Ai,{createdAt:t}),r.createElement(Ti,null,n),r.createElement(Ni,null,a))};var Zi=n(55122);const Ui=(0,s.ZP)(Zi.E).withConfig({displayName:"NoticeNotification__InfoOutlineIcon"})(["\n  color: ",";\n  flex-shrink: 0;\n"],A("yellow")),ji=e=>{const{createdAt:t,content:n,sideContent:a,isMinimized:o}=e;return r.createElement(Si,{isMinimized:o},r.createElement(Ai,{createdAt:t}),r.createElement(Ui,{size:"18px"}),r.createElement(Ti,null,n),r.createElement(Ni,null,a))},Hi=e=>{const{type:t}=e;return t===Sr.SUCCESS?r.createElement(Mi,e):t===Sr.ERROR?r.createElement(qi,e):t==Sr.NOTICE?r.createElement(ji,e):r.createElement(Fi,e)};function Gi(){return Gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gi.apply(this,arguments)}const Vi=(0,s.ZP)(ot).withConfig({displayName:"Notifications__Wrapper"})(["\n  flex: ",";\n  overflow: auto;\n  max-height: 35rem;\n  ","\n  background: ",";\n"],(e=>e.minimized?"initial":"1"),(({theme:e})=>`border-top: 2px ${e.color.backgroundDarker} solid;`),(({theme:e})=>e.color.backgroundLighter)),Wi=(0,s.ZP)(Te).withConfig({displayName:"Notifications__Menu"})(["\n  justify-content: space-between;\n  overflow: hidden;\n"]),$i=(0,s.ZP)(at).withConfig({displayName:"Notifications__Content"})(["\n  overflow: ",";\n  padding: ",";\n  flex: initial;\n  height: ",";\n"],(e=>e.minimized?"hidden":"auto"),(e=>e.minimized?"0":"0 0 1rem"),(e=>e.minimized?"4rem":"100%")),Qi=(0,s.ZP)(Pe).withConfig({displayName:"Notifications__Header"})(["\n  display: flex;\n  align-items: center;\n"]),Yi=s.ZP.div.withConfig({displayName:"Notifications__LatestNotification"})(["\n  margin-left: 1rem;\n  flex: 1;\n  width: calc(100% - 10rem);\n"]),Ki=(0,s.ZP)(xi.T).withConfig({displayName:"Notifications__TerminalBoxIcon"})(["\n  margin-right: 1rem;\n"]),Xi=s.ZP.div.withConfig({displayName:"Notifications__ClearAllNotifications"})(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  margin-top: auto;\n"]),Ji=()=>{const e=(0,o.v9)(ea.query.getNotifications),{sm:t}=$e(),[n,a]=(0,r.useState)(!0),i=(0,r.useRef)(null),l=(0,o.I0)(),s=()=>{i.current?.scrollTo({top:i.current?.scrollHeight})},c=(0,r.useCallback)((()=>{a(!n)}),[n]),d=(0,r.useCallback)((()=>{l(Ir())}),[l]);(0,r.useLayoutEffect)((()=>{e.length>0&&s()}),[e]),(0,r.useLayoutEffect)((()=>{s()}),[n]),(0,r.useEffect)((()=>{t&&a(!0)}),[t]);const u=e[e.length-1];return r.createElement(Vi,{minimized:n,"data-hook":"notifications-wrapper"},r.createElement(Wi,null,r.createElement(Qi,{color:"foreground"},r.createElement(Ki,{size:"18px"}),"Log"),r.createElement(Yi,{"data-hook":"notifications-collapsed"},n&&u&&r.createElement(Hi,Gi({isMinimized:!0},u))),r.createElement(Jt.z,{skin:"transparent",onClick:c},n?r.createElement(_i.f,{size:"18px"}):r.createElement(ki.I,{size:"18px"}))),!n&&r.createElement($i,{minimized:n,ref:i,"data-hook":"notifications-expanded"},e.filter((e=>e.type!==Sr.LOADING)).map((e=>r.createElement(Hi,Gi({isMinimized:!1,key:e.createdAt?e.createdAt.getTime():0},e)))),!n&&r.createElement(Xi,null,r.createElement(Jt.z,{skin:"secondary",disabled:0===e.length,onClick:d},"Clear all"))))};var el=n(72320),tl=n.n(el);const nl=e=>{},rl={title:"New tab",favicon:!1};let al=0;const ol=class{constructor(){this.draggabillies=[]}init(e,t){this.el=e,this.limit=t,this.instanceId=al,this.el.setAttribute("data-chrome-tabs-instance-id",this.instanceId+""),al+=1,this.setupCustomProperties(),this.setupStyleEl(),this.setupEvents(),this.layoutTabs(),this.setupNewTabButton(),this.setupDraggabilly()}emit(e,t){this.el.dispatchEvent(new CustomEvent(e,{detail:t}))}setupCustomProperties(){this.el.style.setProperty("--tab-content-margin","10px")}setupStyleEl(){this.styleEl=document.createElement("style"),this.el.appendChild(this.styleEl)}setupEvents(){window.addEventListener("resize",(e=>{this.cleanUpPreviouslyDraggedTabs(),this.layoutTabs()})),new ResizeObserver((e=>{this.cleanUpPreviouslyDraggedTabs(),this.layoutTabs()})).observe(this.el),this.el.addEventListener("click",(({target:e})=>{e instanceof Element&&e.classList.contains("new-tab-button")&&(this.emit("newTab",{}),this.setupNewTabButton())})),this.tabEls.forEach((e=>this.setTabCloseEventListener(e))),this.tabEls.forEach((e=>this.setTabRenameConfirmEventListener(e))),document.addEventListener("click",(({target:e})=>{e instanceof Element&&!e.classList.contains("chrome-tab-rename")&&!e.classList.contains("chrome-tab-content")&&this.tabEls.forEach((e=>{const t=e.querySelector(".chrome-tab-rename").value;null!==e.getAttribute("is-renaming")&&""!==t.trim()&&t.trim()!==e.getAttribute("data-tab-title")&&(e.setAttribute("data-tab-title",t),this.emit("tabRename",{tabEl:e,title:t})),this.hideRenameTab(e)}))}))}get tabEls(){return Array.prototype.slice.call(this.el.querySelectorAll(".chrome-tab"))}get tabContentEl(){return this.el.querySelector(".chrome-tabs-content")}get tabContentWidths(){const e=this.tabEls.length,t=this.el.clientWidth-90,n=1*(e-1),r=(t-20+n)/e,a=Math.max(24,Math.min(240,r)),o=Math.floor(a),i=[];let l=t-(o*e+20-n);for(let t=0;t<e;t+=1){const e=o<240&&l>0?1:0;i.push(o+e),l>0&&(l-=1)}return i}get tabContentPositions(){const e=[],t=this.tabContentWidths;let n=10;return t.forEach(((t,r)=>{const a=1*r;e.push(n-a),n+=t})),e}get tabPositions(){const e=[];return this.tabContentPositions.forEach((t=>{e.push(t-10)})),e}layoutTabs(){const e=this.tabContentWidths;this.tabEls.forEach(((t,n)=>{const r=e[n],a=r+20;t.style.width=a+"px",t.removeAttribute("is-small"),t.removeAttribute("is-smaller"),t.removeAttribute("is-mini"),r<84&&t.setAttribute("is-small",""),r<60&&t.setAttribute("is-smaller",""),r<48&&t.setAttribute("is-mini",""),t.querySelector(".chrome-tab-close").style.display=this.tabEls.length>1?"block":"none"}));let t="";this.tabPositions.forEach(((e,n)=>{t+=`\n            .chrome-tabs[data-chrome-tabs-instance-id="${this.instanceId}"] .chrome-tab:nth-child(${n+1}) {\n              transform: translate3d(${e}px, 0, 0)\n            }\n          `})),this.styleEl.innerHTML=t;const n=this.tabEls.length;this.el.offsetWidth-this.tabContentEl.offsetWidth>95||n<5?(this.tabContentEl.style.width=(this.tabEls[0]?this.tabEls[0].offsetWidth*n:0)-(n>0?10*n*2-24+10:0)+"px",this.tabContentEl.nextElementSibling.classList.remove("overflow-shadow")):this.tabContentEl.nextElementSibling.classList.add("overflow-shadow")}createNewTabEl(){const e=document.createElement("div");return e.innerHTML='\n      <div class="chrome-tab">\n        <div class="chrome-tab-dividers"></div>\n        <div class="chrome-tab-background">\n          <svg xmlns="http://www.w3.org/2000/svg"><defs><symbol id="chrome-tab-geometry-left" viewBox="0 0 214 36"><path d="M17 0h197v36H0v-2c4.5 0 9-3.5 9-8V8c0-4.5 3.5-8 8-8z"/></symbol><symbol id="chrome-tab-geometry-right" viewBox="0 0 214 36"><use xlink:href="#chrome-tab-geometry-left"/></symbol><clipPath id="crop"><rect class="mask" width="100%" height="100%" x="0"/></clipPath></defs><svg width="52%" height="100%"><use xlink:href="#chrome-tab-geometry-left" width="214" height="36" class="chrome-tab-geometry"/></svg><g transform="scale(-1, 1)"><svg width="52%" height="100%" x="-100%" y="0"><use xlink:href="#chrome-tab-geometry-right" width="214" height="36" class="chrome-tab-geometry"/></svg></g></svg>\n        </div>\n        <div class="chrome-tab-content">\n          <div class="chrome-tab-favicon"></div>\n          <div class="chrome-tab-title"></div>\n          <input class="chrome-tab-rename" type="text" />\n          <div class="chrome-tab-drag-handle"></div>\n          <div class="chrome-tab-close"></div>\n        </div>\n      </div>\n    ',e.firstElementChild}addTab(e,{animate:t=!0,background:n=!1}={}){const r=this.createNewTabEl();return r.oncontextmenu=e=>{this.emit("contextmenu",{tabEl:r,event:e})},t&&(r.classList.add("chrome-tab-was-just-added"),setTimeout((()=>r.classList.remove("chrome-tab-was-just-added")),500)),e=Object.assign({},rl,e),this.tabContentEl.appendChild(r),this.setTabCloseEventListener(r),this.setTabRenameConfirmEventListener(r),this.updateTab(r,e),this.emit("tabAdd",{tabEl:r}),n||this.setCurrentTab(r),this.cleanUpPreviouslyDraggedTabs(),this.layoutTabs(),this.setupDraggabilly(),r}setTabCloseEventListener(e){const t=t=>{t.stopImmediatePropagation(),this.emit("tabClose",{tabEl:e}),this.setupNewTabButton()};e.querySelector(".chrome-tab-close").addEventListener("click",t),e.addEventListener("auxclick",t)}setTabRenameConfirmEventListener(e){const t=e.querySelector(".chrome-tab-rename");t.addEventListener("keydown",(n=>{"Enter"===n.key&&""!==t.value?(e.setAttribute("data-tab-title",t.value),this.emit("tabRename",{tabEl:e,title:t.value}),this.toggleRenameTab(e)):"Escape"===n.key&&this.toggleRenameTab(e)}))}get activeTabEl(){return this.el.querySelector(".chrome-tab[active]")}hasActiveTab(){return!!this.activeTabEl}setCurrentTab(e){const t=this.activeTabEl;t!==e&&(t&&t.removeAttribute("active"),e.setAttribute("active",""),this.emit("activeTabChange",{tabEl:e}))}removeTab(e){e===this.activeTabEl&&(e.nextElementSibling?this.setCurrentTab(e.nextElementSibling):e.previousElementSibling&&this.setCurrentTab(e.previousElementSibling)),e.parentNode.removeChild(e),this.emit("tabRemove",{tabEl:e}),this.cleanUpPreviouslyDraggedTabs(),this.layoutTabs(),this.setupDraggabilly()}updateTab(e,t){e.setAttribute("data-tab-title",t.title),e.querySelector(".chrome-tab-title").textContent=t.title;const n=e.querySelector(".chrome-tab-rename");n.setAttribute("value",t.title),n.setAttribute("placeholder",t.title);const r=e.querySelector(".chrome-tab-favicon"),{favicon:a,faviconClass:o}=t;r.className="chrome-tab-favicon",r.style.backgroundImage="",a||o?(o&&(r.className=["chrome-tab-favicon",o].join(" ")),a&&(r.style.backgroundImage=`url('${a}')`),r?.removeAttribute("hidden")):(r?.setAttribute("hidden",""),r?.removeAttribute("style")),t.id&&e.setAttribute("data-tab-id",t.id)}showRenameTab(e){e.setAttribute("is-renaming",""),e.setAttribute("data-tab-title",e.textContent?.trim()||"");const t=e.querySelector(".chrome-tab-title"),n=e.querySelector(".chrome-tab-rename"),r=e.querySelector(".chrome-tab-close");t.style.display="none",n.style.display="block",r.style.display="none",n.focus(),n.select()}hideRenameTab(e){e.removeAttribute("is-renaming");const t=e.querySelector(".chrome-tab-title"),n=e.querySelector(".chrome-tab-rename");e.getAttribute("data-tab-title")&&(n.value=e.getAttribute("data-tab-title")||"",t.textContent=e.getAttribute("data-tab-title")||"");const r=e.querySelector(".chrome-tab-close");t.style.display="block",n.style.display="none",r.style.display=this.tabEls.length>1?"block":"none"}toggleRenameTab(e){"none"===e.querySelector(".chrome-tab-title").style.display?this.hideRenameTab(e):this.showRenameTab(e)}cleanUpPreviouslyDraggedTabs(){this.tabEls.forEach((e=>e.classList.remove("chrome-tab-was-just-dragged")))}setupDraggabilly(){const e=this.tabEls,t=this.tabPositions;this.isDragging&&(this.isDragging=!1,this.el.classList.remove("chrome-tabs-is-sorting"),this.draggabillyDragging.element.classList.remove("chrome-tab-is-dragging"),this.draggabillyDragging.element.style.transform="",this.draggabillyDragging.dragEnd(),this.draggabillyDragging.isDragging=!1,this.draggabillyDragging.positionDrag=nl,this.draggabillyDragging.destroy(),this.draggabillyDragging=null),this.draggabillies.forEach((e=>e.destroy())),e.forEach(((n,r)=>{const a=t[r],o=new(tl())(n,{axis:"x",handle:".chrome-tab-drag-handle",containment:this.tabContentEl});let i,l,s,c=0;this.draggabillies.push(o),o.on("pointerDown",((t,r)=>{const a=r.timeStamp;t.target===n.querySelector(".chrome-tab-drag-handle")&&(i===r.clientX&&l===r.clientY&&a-c<500&&s&&(e.forEach((e=>this.hideRenameTab(e))),this.showRenameTab(n),t.stopImmediatePropagation(),s=!1),s=n.hasAttribute("active"),i=r.clientX,l=r.clientY,c=a),this.emit("tabClick",{tabEl:n})})),o.on("dragStart",(e=>{this.isDragging=!0,this.draggabillyDragging=o,n.classList.add("chrome-tab-is-dragging"),this.el.classList.add("chrome-tabs-is-sorting"),this.emit("dragStart",{})})),o.on("dragEnd",(e=>{this.isDragging=!1;const t=parseFloat(n.style.left);n.style.transform="translate3d(0, 0, 0)",this.emit("dragEnd",{}),requestAnimationFrame((e=>{n.style.left="0",n.style.transform=`translate3d(${t}px, 0, 0)`,requestAnimationFrame((e=>{n.classList.remove("chrome-tab-is-dragging"),this.el.classList.remove("chrome-tabs-is-sorting"),n.classList.add("chrome-tab-was-just-dragged"),requestAnimationFrame((e=>{n.style.transform="",this.layoutTabs(),this.setupDraggabilly()}))}))}))})),o.on("dragMove",((e,r,o)=>{const i=this.tabEls,l=i.indexOf(n),s=((e,t)=>{let n=1/0,r=-1;return t.forEach(((t,a)=>{Math.abs(e-t)<n&&(n=Math.abs(e-t),r=a)})),r})(a+o.x,t),c=Math.max(0,Math.min(i.length,s));l!==c&&this.animateTabMove(n,l,c)}))}))}animateTabMove(e,t,n){n<t?e.parentNode.insertBefore(e,this.tabEls[n]):e.parentNode.insertBefore(e,this.tabEls[n+1]),this.emit("tabReorder",{tabEl:e,originIndex:t,destinationIndex:n}),this.layoutTabs()}setupNewTabButton(){const e=this.tabContentEl.parentNode?.querySelector(".new-tab-button-wrapper"),t=this.limit&&this.tabEls.length>=this.limit;e&&t?(e.parentNode?.removeChild(e),this.layoutTabs()):e||(this.tabContentEl.insertAdjacentHTML("afterend",'\n    <div class="new-tab-button-wrapper">\n      <button class="new-tab-button"></button>\n    </div>\n  '),this.layoutTabs())}};function il(){return il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},il.apply(this,arguments)}const ll=(0,r.forwardRef)(((e,t)=>{const n=["chrome-tabs"];return e.darkMode&&n.push("chrome-tabs-dark-theme"),e.className&&n.push(e.className),r.createElement("div",{ref:t,className:n.join(" "),style:{"--tab-content-margin":"9px"}},r.createElement("div",{className:"chrome-tabs-content"}))}));var sl=n(23701),cl=n.n(sl);function dl({tabs:e,limit:t,className:n,darkMode:a,onTabActive:o,onTabClose:i,onTabRename:l,onTabReorder:s,onContextMenu:c,onNewTab:d}){const u=(0,r.useRef)([]),m=(0,r.useRef)({tabId:"",fromIndex:-1,toIndex:-1}),g=(0,r.useCallback)(((e,t,n)=>{const[r]=u.current.splice(t,1);u.current.splice(n,0,r);const a=m.current.fromIndex;m.current={tabId:e,fromIndex:a>-1?a:t,toIndex:n}}),[]),p=(0,r.useCallback)((()=>{const{tabId:e,fromIndex:t,toIndex:n}=m.current;t>-1&&s?.(e,t,n),m.current={tabId:"",fromIndex:-1,toIndex:-1}}),[s]),{ChromeTabs:f,addTab:h,activeTab:b,removeTab:E,updateTab:y}=function(e,t){const n=(0,r.useRef)(null),a=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=new ol;a.current=e,e.init(n.current,t)}),[]),(0,r.useEffect)((()=>{const t=({detail:t})=>{const n=t.tabEl.getAttribute("data-tab-id");e.onTabActive?.(n)},n=({detail:t})=>{const{tabEl:n,title:r}=t,a=n.getAttribute("data-tab-id");e.onTabRename?.(a,r)},r=a.current?.el;return r?.addEventListener("tabClick",t),r?.addEventListener("tabRename",n),()=>{r?.removeEventListener("tabClick",t),r?.removeEventListener("tabRename",n)}}),[e.onTabActive]),(0,r.useEffect)((()=>{const t=a.current?.el,n=({detail:t})=>{const{tabEl:n,originIndex:r,destinationIndex:a}=t,o=n.getAttribute("data-tab-id");e.onTabReorder?.(o,r,a)};return t?.addEventListener("tabReorder",n),()=>{t?.removeEventListener("tabReorder",n)}}),[e.onTabReorder]),(0,r.useEffect)((()=>{const t=a.current?.el,n=({detail:t})=>{const n=t.tabEl.getAttribute("data-tab-id");e.onTabClose?.(n)};return t?.addEventListener("tabClose",n),()=>{t?.removeEventListener("tabClose",n)}}),[e.onTabClose]),(0,r.useEffect)((()=>{const t=()=>{e.onDragBegin?.()},n=a.current?.el;return n?.addEventListener("dragBegin",t),()=>{n?.removeEventListener("dragBegin",t)}}),[e.onDragBegin]),(0,r.useEffect)((()=>{const t=a.current?.el,n=({detail:t})=>{const n=t.tabEl;if(!n)return;const r=n.getAttribute("data-tab-id");e.onContextMenu?.(r,t.event)};return t?.addEventListener("contextmenu",n),()=>{t?.removeEventListener("contextmenu",n)}}),[e.onContextMenu]),(0,r.useEffect)((()=>{const t=()=>{e.onDragEnd?.()},n=a.current?.el;return n?.addEventListener("dragEnd",t),()=>{n?.removeEventListener("dragEnd",t)}}),[e.onDragEnd]),(0,r.useEffect)((()=>{const t=()=>{e.onNewTab?.()},n=a.current?.el;return n?.addEventListener("newTab",t),()=>{n?.removeEventListener("newTab",t)}}),[e.onNewTab]);const o=(0,r.useCallback)((e=>{a.current?.addTab(e)}),[]),i=(0,r.useCallback)((e=>{const t=n.current?.querySelector(`[data-tab-id="${e}"]`);t&&a.current?.removeTab(t)}),[]),l=(0,r.useCallback)((e=>{const t=n.current?.querySelector(`[data-tab-id="${e}"]`);t!==a.current?.activeTabEl&&a.current?.setCurrentTab(t)}),[]),s=(0,r.useCallback)(((e,t)=>{const r=n.current?.querySelector(`[data-tab-id="${e}"]`);r?a.current?.updateTab(r,{...t}):a.current?.addTab(t)}),[]);return{ChromeTabs:(0,r.useCallback)((function(e){return r.createElement(ll,il({},e,{ref:n}))}),[]),addTab:o,updateTab:s,removeTab:i,activeTab:l}}({onTabClose:i,onTabActive:o,onTabRename:l,onContextMenu:c,onNewTab:d,onDragEnd:p,onTabReorder:g},t);return(0,r.useEffect)((()=>{cl()(u.current,e)||(u.current.slice(e.length).forEach((e=>{E(e.id)})),e.forEach(((e,t)=>{const n=u.current[t];n?cl()(e,n)||y(n.id,e):h(e)})),e.forEach((e=>{e.active&&b(e.id)}))),u.current=e}),[e]),r.createElement(f,{className:n,darkMode:a})}var ul=n(93301),ml=n(66622),gl=n(30711),pl=n(75624),fl=n(59814);function hl(){return hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hl.apply(this,arguments)}const bl=(0,s.ZP)(zt.x).attrs({align:"center",justifyContent:"space-between"}).withConfig({displayName:"tabs__Root"})(["\n  width: 100%;\n  display: flex;\n  background: ",";\n  padding-right: 1rem;\n"],(({theme:e})=>e.color.backgroundLighter)),El=(0,s.ZP)(Jt.z).withConfig({displayName:"tabs__HistoryButton"})(["\n  &.active {\n    background: ",";\n  }\n"],(({theme:e})=>e.color.comment)),yl=(0,s.ZP)(pl.h.Content).withConfig({displayName:"tabs__DropdownMenuContent"})(["\n  margin-top: 0.5rem;\n  z-index: 100;\n  background: ",";\n"],(({theme:e})=>e.color.backgroundDarker)),wl=()=>{const{activeBuffer:e,buffers:t,setActiveBuffer:n,addBuffer:a,updateBuffer:o,deleteBuffer:i,archiveBuffer:l}=_a(),[s,c]=(0,r.useState)(!1),d=(0,r.useMemo)(z,[]),[u,m]=(0,r.useState)(!1),g=t.filter((e=>e.archived&&e.archivedAt&&-1===e.position)).sort(((e,t)=>e.archivedAt&&t.archivedAt?t.archivedAt-e.archivedAt:0));return(0,r.useLayoutEffect)((()=>{c(!0)}),[]),s?r.createElement(bl,null,r.createElement(dl,{limit:40,darkMode:!0,onTabClose:async e=>{const n=t.find((t=>t.id===parseInt(e)));n&&1!==t.filter((e=>!e.archived)).length&&(""!==n?.value?await l(parseInt(e)):await i(parseInt(e)),await(async e=>{const n=t.filter((t=>!t.archived&&t.id!==parseInt(e))).sort(((e,t)=>e.position-t.position));for(const e of n){const t=n.indexOf(e);e.id&&await o(e.id,{position:t})}})(e),g.length>=10&&await Promise.all(g.slice(9).map((e=>i(e.id)))))},onTabReorder:async(e,n,r)=>{const a=t.find((t=>t.id===parseInt(e)));if(!a)return;let i=t.filter((t=>t.id!==parseInt(e)&&!t.archived)).sort(((e,t)=>e.position-t.position));i.splice(r,0,a),i.forEach((async(e,t)=>{await o(e.id,{position:t})}))},onTabActive:async e=>{const r=t.find((t=>t.id===parseInt(e)));r&&await n(r)},onTabRename:async(e,t)=>{await o(parseInt(e),{label:t})},onNewTab:a,tabs:t.filter((e=>!e.archived)).sort(((e,t)=>e.position-t.position)).map((t=>({id:t.id?.toString(),favicon:"/assets/icon-file.svg",title:t.label,active:e.id===t.id})))}),r.createElement(pl.h.Root,{modal:!1,onOpenChange:m},r.createElement(pl.h.Trigger,{asChild:!0},r.createElement(ye.A,null,r.createElement(El,hl({skin:"transparent","data-hook":"editor-tabs-history-button",prefixIcon:r.createElement(ul.A,{size:"20px"})},u?{className:"active"}:{}),"History"))),r.createElement(pl.h.Portal,null,r.createElement(yl,{"data-hook":"editor-tabs-history"},0===g.length&&r.createElement("div",{style:{padding:"0 1rem"}},r.createElement(Pe,{color:"gray2"},"History is empty")),g.map((e=>r.createElement(pl.h.Item,{"data-hook":"editor-tabs-history-item",key:e.id,onClick:async()=>{await o(e.id,{archived:!1,archivedAt:void 0,position:t.length-1}),await n(e)}},r.createElement(zt.x,{align:"flex-start",justifyContent:"flex-start",gap:"0.5rem",title:e.label},r.createElement(ml.$,{size:"18px"}),r.createElement(zt.x,hl({flexDirection:"column",align:"flex-start",gap:"0"},e.archivedAt?{title:(0,Ii.Z)(new Date(e.archivedAt),"P pppp",{locale:W(d)})}:{}),r.createElement(Pe,{color:"foreground",ellipsis:!0},e.label.substring(0,30),e.label.length>30?"...":""),e.archivedAt&&r.createElement(Pe,{color:"gray2"},(0,fl.Z)(e.archivedAt,(new Date).getTime(),{locale:W(d)})," ago")))))),g.length>0&&r.createElement(r.Fragment,null,r.createElement(pl.h.Divider,null),r.createElement(pl.h.Item,{onClick:async()=>{for(const e of g)await i(e.id)},"data-hook":"editor-tabs-history-clear"},r.createElement(gl.r,{size:"18px"}),r.createElement(Pe,{color:"foreground"},"Clear history"))))))):null};function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vl.apply(this,arguments)}const Cl=(0,s.ZP)(ot).withConfig({displayName:"Editor__EditorPaneWrapper"})(["\n  height: 100%;\n  overflow: hidden;\n"]),xl=({innerRef:e,...t})=>r.createElement(Cl,vl({ref:e},t),r.createElement(wl,null),r.createElement(Ci,null),r.createElement(Ji,null)),_l=(e,t)=>r.createElement(xl,vl({},e,{innerRef:t})),kl=(0,r.forwardRef)(_l);var Sl=n(23945),Tl=n.n(Sl),Nl=n(23401),Ol=n(44609),Rl=n(14544),Il=n(22373);function Pl(e,t,n){const r={gridID:"qdb-grid",minColumnWidth:60,rowHeight:30,divCacheSize:64,viewportHeight:400,yMaxThreshold:1e7,maxRowsToAnalyze:100,minVpHeight:120,minDivHeight:160,scrollerGirth:10,dragHandleWidth:20,dataPageSize:1e3,layoutStoreTimeout:1e3},a="qg-c-active",o=0,i=3,l=4,s=(n||r.gridID)+".columnLayout",c=e,d=t;let u,m,g,p,f,h,b,E,y,w,v,C,x,_,k,S,T,N,O,R,I,P=0,A=[],L=[],D=[],M=0,B=-1,z=-1,q=[],F=-1,Z=!1;const U=r.divCacheSize,j=U-1,H=r.dataPageSize,G=Math.floor(H/3),V=2*G;let W,$,Q,Y,K=[],X=0,J=10,ee=0,te=0,ne=0,re=r.viewportHeight;const ae=r.rowHeight;let oe,ie,le,se,ce,de,ue,me,ge,pe,fe=[],he=-1,be=-1;const Ee={colLo:0,colHi:0,nextVisColumnLo:0,render:!1},ye=r.scrollerGirth;let we,ve,Ce,xe,_e,ke,Se,Te,Ne,Oe,Re,Ie=0,Pe=!0,Ae=!1,Le={};function De(e){return L[D[e]]}function Me(){const e=be;let t=0;P>0&&(t=P,P<=e&&(P=0,E.innerHTML="",on()));const n=Ve(e);for(let t=e;t>0;t--)R[t]=R[t-1]+n;R[0]=0;const r=e+1;for(let t=e;t>=0;t--){const e=g.childNodes[t].querySelector(".qg-col-resize-hysteresis");e&&(e.columnIndex=(e.columnIndex+1)%r)}-1!==B&&B<r&&(B=(B+1)%r),g.childNodes[0].before(g.childNodes[e]);const a=D[e];for(let t=e;t>0;t--)D[t]=D[t-1];D[0]=a,t>0&&(t<=e?sn(t+1):(E.childNodes[0].before(E.childNodes[e]),Ct(A,0,Math.min(P,M),X))),ee=0,Ct(fe,0,J,0),u.scrollLeft>0?u.scrollLeft=0:Dt(),_t(e),function(e){const t=rt();t.columnPositions=D,t.timestampIndex=B;for(let n=0;n<e;n++)t.deviants[De(n).name]=Ve(n);nt()}(r)}function Be(e,t,n,r){if(e.rowIndex!==t){const a=q[Math.floor(t/H)];if(a){const o=a[t%H];if(o){e.style.display="flex";for(let t=n;t<r;t++)yt(e.childNodes[t%J],o[D[t]]);e.rowIndex=t}else e.style.display="none",e.rowIndex=-1}else{for(let t=n;t<r;t++)e.childNodes[t%J].innerHTML="";e.rowIndex=-1}e.style.top=t*ae-ue+"px"}}function ze(e){u.scrollTop=e,h.scrollTop=e}function qe(){const e=Math.max(X,P),t=Math.min(e+J,M);Ct(fe,e,t,X)}function Fe(e){return null===q[e]||void 0===q[e]||0===q[e].length}function Ze(e,t){e.style.minWidth=t+"px",e.style.maxWidth=t+"px"}function Ue(e,t){Y&&clearTimeout(Y),Y=setTimeout((function(){!function(e,t){let n,r,a;if(function(){for(let e=0,t=q.length;e<t;e++)(e<W||e>$)&&q[e]&&delete q[e]}(),e!==t&&Fe(e)&&Fe(t))n=e*H,r=n+H*(t-e+1),a=function(n){q[e]=n.dataset.splice(0,H),q[t]=n.dataset,qe()};else if(!Fe(e)||Fe(t)&&e!==t){if(Fe(e)&&e!==t||!Fe(t))return void qe();n=t*H,r=n+H,a=function(e){q[t]=e.dataset,qe()}}else n=e*H,r=n+H,a=function(t){q[e]=t.dataset,qe()};d&&d(Q,n+1,r,a)}(e,t)}),75)}function je(){return{t:Math.max(0,Math.floor(le/ae)),b:Math.min(ie/ae,Math.ceil((le+re)/ae))}}function He(e){const t=je();let n=t.t,r=t.b;0!==e&&function(e,t,n){if(t!=t||n!=n)return;let r,a,o,i;if(r=Math.floor(t/H),o=Math.floor(n/H),e>0){if(i=n%H,r>=W&&o<$)return;if(o===$)return void(i>V&&($=o+1,W=o,Ue(o,o+1)));r<o?(Ue(r,o),W=r,$=o):i>V?(Ue(o,o+1),W=o,$=o+1):($=r,W=r,Ue(r,r))}else{if(a=t%H,r>W&&o<=$)return;if(r===W)return void(a<G&&W>0&&(W=Math.max(0,r-1),$=r,Ue(r-1,r)));r<o?(Ue(r,o),W=r,$=o):a<G&&r>0?(Ue(r-1,r),W=Math.max(0,r-1),$=r):(W=r,$=r,Ue(r,r))}}(e,n,r),0===n?r=U:r>oe-2&&(n=Math.max(0,r-U));for(let e=n;e<r;e++){const t=fe[e&j];t&&(Be(t,e,Math.min(M,Math.max(X,P)),J),Be(A[e&j],e,0,Math.min(P,M)))}}function Ge(e){return R[e]}function Ve(e){return R[e+1]-R[e]}function We(e){const t=De(e);if(t)switch(t.type){case"STRING":case"SYMBOL":case"VARCHAR":return!0;default:return!1}}function $e(e){xe||cn("header.click",{columnName:e.currentTarget.getAttribute("data-column-name")})}function Qe(){Se&&(clearTimeout(Se),Se=void 0)}function Ye(e,t){return ve+e-(t<P?0:u.scrollLeft)+"px"}function Ke(e){if(0===e.target.childNodes.length){e.preventDefault();const t=document.createElement("div");t.baguette=!0,ft(t,"qg-col-resize-hysteresis-enter"),e.target.append(t)}}function Xe(e){e.preventDefault(),e.target.childNodes.length>0&&e.target.childNodes[0].remove()}function Je(e){e.preventDefault(),Qe();const t=e.target.baguette?e.target.parentElement:e.target;e.target.childNodes.length>0&&e.target.childNodes[0].remove(),xe=t.columnIndex,_e=Ge(xe),ke=Ve(xe);const n=t.parentElement;ve=n.offsetLeft+n.getBoundingClientRect().width,Ce=e.clientX,document.onmousemove=et,document.onmouseup=at,O.style.top=0,O.style.left=Ye(0,xe),O.style.height=c.getBoundingClientRect().height-(Tt()?ye:0)+"px",O.style.visibility="visible",Ie=ke}function et(e){e.preventDefault();const t=e.clientX-Ce,n=ke+t;n>r.minColumnWidth&&(O.style.left=Ye(t,xe),Ie=n)}function tt(){window.localStorage.setItem(s,JSON.stringify(Le))}function nt(){Oe&&clearTimeout(Oe),Oe=setTimeout(tt,r.layoutStoreTimeout)}function rt(){let e=Le[Ne];return void 0===e&&(e={key:Te,deviants:{}},Le[Ne]=e),e}function at(e){var t,n;e.preventDefault(),document.onmousemove=null,document.onmouseup=null,function(e,t){!function(e,t){let n=R[e]+t;for(let t=e+1;t<=M;t++){const e=Ve(t);R[t]=n,n+=e}F=R[M]}(e,t),e<P&&(Ze(E.childNodes[e],t),Ct(A,0,Math.min(P,M),X),zt(),nn()),Ze(g.childNodes[e],t),Bt(),Ct(fe,X,X+J,X),Dt()}(xe,Ie),O.style.visibility="hidden",O.style.left=0,Se=setTimeout((()=>{xe=void 0}),500),t=De(xe).name,n=Ie,rt().deviants[t]=n,nt()}function ot(e){return Math.max(r.minColumnWidth,Math.ceil(8*e*1.2))}function it(e){k||(e.preventDefault(),C.style.left=f+"px",C.style.display="block",C.style.height=re-(Tt()?ye:0)+"px",x.style.height=C.style.height,T=e.offsetY-_.getBoundingClientRect().height/2,k=e.pageY,_.style.top=T+"px")}function lt(e){const t=e.relatedTarget;t===_||t===C||t===v||S||(e.preventDefault(),C.style.display="none",k=void 0)}function st(e){const t=e.pageX-S,n=f+t;C.style.left=n+"px",w=P;let r=n;for(let e=0;e<M;e++){const t=Ve(e);if(r-=t,r<0){w=-r/t<.5?e+1:e;break}}w>P&&u.scrollLeft>0&&(w=P),x.style.left=Ge(w)+"px",x.style.display="block",ut(e)}function ct(){document.onmousemove=void 0,document.onmouseup=void 0,C.style.display="none",x.style.display="none",k=void 0,S=void 0,c.style.cursor=null,_.style.cursor=null,N.style.cursor=null,sn(w)}function dt(e){e.preventDefault(),S=e.pageX,document.onmousemove=st,document.onmouseup=ct,c.style.cursor="grabbing",_.style.cursor="grabbing",N.style.cursor="grabbing"}function ut(e){if(k){e.preventDefault();const t=e.pageY-k;_.style.top=Math.min(re-_.getBoundingClientRect().height-(Tt()?ye:0),Math.max(0,T+t))+"px"}}function mt(e,t,n,r){for(let r=t,a=t+n;r<a;r++){const t=De(r),n=document.createElement("div");ft(n,"qg-header"),Ze(n,Ve(r)),n.setAttribute("data-column-name",t.name),We(r)&&ft(n,"qg-header-l");const a=document.createElement("span");ft(a,"qg-header-type"),a.innerHTML=t.type.toLowerCase();const o=document.createElement("span");ft(o,"qg-header-name"),o.innerHTML=t.name;const i=document.createElement("div");ft(i,"qg-col-resize-hysteresis"),i.columnIndex=r,i.onmousedown=Je,i.onmouseenter=Ke,i.onmouseleave=Xe;const l=document.createElement("span");ft(l,"qg-header-border"),n.append(i,l),n.append(o,a),n.onclick=$e,e.append(n)}if(r){const t=document.createElement("div");return t.className="qg-header qg-stub",t.style.width=ye+"px",e.append(t),t}return null}function gt(){R=[],F=0;for(let e=0;e<M;e++){const t=De(e),n=ot(t.name.length+t.type.length);R.push(F),F+=n}R.push(F)}function pt(e,t){e.classList.remove(t)}function ft(e,t){e&&e.classList.add(t)}function ht(e){pt(e,a)}function bt(){ft(ge,a)}function Et(e){!e||ge===e&&e.classList.contains(a)||(ge&&ht(ge),ge=e,be=e.columnIndex,bt())}function yt(e,t){null!==t?(e.innerHTML=(e=>{const t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[<>"']/g,(e=>t[e]))})(t.toString()),e.classList.remove("qg-null")):(e.innerHTML="null",e.classList.add("qg-null"))}function wt(e,t,n){const r=e.childNodes[n%J];Qt(r,n),yt(r,t[D[n]])}function vt(e){return Math.max(P,e)}function Ct(e,t,n,r){if(e.length>0&&M>0&&t<n){Ee.colLo=t,Ee.colHi=n,Ee.nextVisColumnLo=r,Ee.render=!1;const a=je();let o=a.t,i=a.b;o-=o&j,i=i-(i&j)+U;for(let r=o;r<i;r++){const a=e[r&j];a.style.width=F+"px";const o=Math.floor(r/H),i=r%H;let l,s;if(o<q.length&&(l=q[o])&&i<l.length&&(s=l[i]))for(let e=t;e<n;e++)wt(a,s,e);else Ee.render=!0}X=Math.max(0,Math.min(r,M-J)),Kt()}}function xt(e){const t=u.scrollLeft;u.scrollLeft=e,g.scrollLeft=e,t===u.scrollLeft&&bt()}function _t(e){if(-1!==e){be=e;const t=be<P?y.childNodes[be]:me.childNodes[be%J];t.columnIndex=be,Et(t)}}function kt(e){e===i&&X>0&&M>J?Ct(fe,P,J,0):e===l&&X+J<M&&Ct(fe,vt(M-J),M,M-J);const t=Ge(be),n=Ve(be);if(e!==o&&(be>=P||e===i)){const e=Math.max(0,t-f);if(e<u.scrollLeft)xt(e);else if(e>u.scrollLeft){const e=t+n;e>u.scrollLeft+u.clientWidth&&xt(e-u.clientWidth)}}_t(be)}function St(e){if(he>0){he=Math.max(0,he-e),Rt(),Lt(),Ot(),kt(o);const t=he*ae-ue-5;t<u.scrollTop&&ze(Math.max(0,t))}}function Tt(){return u.scrollWidth>ne}function Nt(e){const t=e[he&j];return t.className="qg-r qg-r-active",t}function Ot(){me=Nt(fe),y=Nt(A)}function Rt(){me&&(me.className="qg-r"),y&&(y.className="qg-r")}function It(e){if(he>-1&&he<oe-1){he=Math.min(oe-1,he+e),Rt(),Lt(),Ot(),kt(o);const t=Math.min(he*ae+ae-ue,u.scrollHeight)-re,n=Tt()?ye:0;t>u.scrollTop&&ze(t+n)}}function Pt(){const e=ee+te,t=ee,n=u.scrollLeft,r=u.getBoundingClientRect().width;if(R)if(n+r>e){let t=-1,r=ee;for(let e=X,a=J+X;e<a;e++)if(r+=Ve(e),r>n){t=e;break}if(t>X)Ct(fe,vt(J+X),Math.min(J+t,M),t);else if(-1===t){let t=e,r=J+X;for(;t<n;)t+=Ve(++r);Ct(fe,vt(r),Math.min(J+r,M),r)}}else if(t>n){let e=X,t=ee;for(;t>n&&e>0;)t-=Ve(--e);const r=Math.min(J,X-e);Ct(fe,vt(e),Math.min(r+e,M),e)}}function At(){Pe||(ft(c,"qg-hover"),Pe=!0)}function Lt(){Pe&&(pt(c,"qg-hover"),Pe=!1)}function Dt(e){const t=u.scrollLeft,n=u.scrollTop;if(g.scrollLeft!==t&&(g.scrollLeft=t),P>0&&(t>0?ft(p,"qg-panel-scrolled-left"):pt(p,"qg-panel-scrolled-left")),n>0?(ft(g,"qg-panel-scrolled-top"),ft(E,"qg-panel-scrolled-top")):(pt(g,"qg-panel-scrolled-top"),pt(E,"qg-panel-scrolled-top")),Pt(),n!==ce||!e){const e=le;n>=se-re?(le=Math.max(0,ie-re),ce=n,ue=Math.max(0,le-ce),It(oe-he)):(0===n&&ce>0?(le=0,ue=0,St(he)):le+=n-ce,ce=n),He(le-e)}qt(),bt()}function Mt(){const e=u.getBoundingClientRect().width;if(Z=0===e,!Z)if(F<e)J=M,X=0,Kt();else{let t=0,n=0,r=0,a=0;for(;n<M;){const o=Ve(n);r+o>e?(a<n-t+1&&(a=n-t+1),r-=Ve(t),t++):(r+=o,n++)}a=Math.max(a,n-t+1),J=Math.min(a,M);const o=X+J-M;o>0&&X>=o&&(X-=o,Kt())}}function Bt(){we&&(Tt()&&Math.abs(u.scrollHeight-u.getBoundingClientRect().height)>.8?pt(we,"qg-stub-transparent"):ft(we,"qg-stub-transparent"));const e=J;Mt(),e<J?function(e){for(let t=0,n=fe.length;t<n;t++){const n=fe[t];for(let t=0;t<e;t++){const e=document.createElement("div");e.className="qg-c",n.append(e)}for(let e=0;e<J;e++)Qt(n.childNodes[e],X+e)}Ct(fe,vt(X),X+J,X)}(J-e):e>J&&function(e){for(let t=0,n=fe.length;t<n;t++){const n=fe[t];for(let t=J;t<e;t++)n.childNodes[J].remove()}Ct(fe,vt(X),X+J,X)}(e)}function zt(){let e=0;const t=Math.min(P,M);for(let n=0;n<t;n++)e+=Ve(n);f=e}function qt(){const e=u.clientHeight+g.clientHeight;p.style.height=e+"px",h.style.height=u.clientHeight+"px",h.scrollTop=u.scrollTop}function Ft(){u.scrollTop=h.scrollTop}function Zt(){if(0===q.length||0===q[W].length)return Pt(),void He(0);if(Ae&&(Ae=!1,function(){Xt();for(let e=0;e<P;e++)Ze(E.childNodes[e],Ve(e));for(let e=0,t=M-P;e<t;e++)Ze(g.childNodes[e],Ve(e+P))}()),Z&&(tn(),rn()),qt(),"none"!==c.style.display){re=Math.max(u.getBoundingClientRect().height,r.minVpHeight),pe=Math.floor(re/ae);const e=u.getBoundingClientRect().width;ne!==e&&(ne=e,Bt()),Dt()}}function Ut(){Rt(),this.focus(),he=this.parentElement.rowIndex,Ot(),Et(this)}function jt(e){e.preventDefault();const t=e.target;if(t&&!S){const e=t.parentElement.rowIndex&j;ft(fe[e],"qg-r-hover"),ft(A[e],"qg-r-hover")}}function Ht(e){e.preventDefault();const t=e.target;if(t&&!S){const e=t.parentElement.rowIndex&j;pt(fe[e],"qg-r-hover"),pt(A[e],"qg-r-hover")}}function Gt(e){delete K["which"in e?e.which:e.keyCode]}function Vt(){Le[Ne]=void 0,nt(),ln(0),E.innerHTML="",on(),en(),B=z,g.innerHTML="",gt(),Xt(),f=0,we=mt(g,0,M,!0),Bt(),zt(),nn(),Ct(fe,vt(X),X+J,X),Ct(A,0,P,X),u.scrollLeft=0,Jt()}function Wt(){return K[17]||K[91]||K[224]}function $t(e){const t="which"in e?e.which:e.keyCode;let n=!0;switch(t){case 33:St(pe);break;case 38:K[91]?St(he):St(1);break;case 40:K[91]?It(oe-he):It(1);break;case 34:It(pe);break;case 39:be>-1&&be<M-1&&(Lt(),be++,kt(2));break;case 37:be>0&&(Lt(),be--,kt(1));break;case 35:K[17]?It(oe-he):be>-1&&be!==M-1&&(Lt(),be=M-1,kt(l));break;case 36:K[17]?St(he):(be>0||u.scrollLeft>0)&&(Lt(),be=0,kt(i));break;case 113:ge&&ht(ge),cn("yield.focus");break;case 67:case 45:Wt()&&ge&&(Re&&clearTimeout(Re),ft(ge,"qg-c-active-pulse"),navigator.clipboard.writeText(ge.innerHTML).then(void 0),Re=setTimeout((()=>{pt(ge,"qg-c-active-pulse")}),1e3));break;case 66:Wt()&&Vt();break;case 191:Me();break;default:K[t]=!0,n=!1}n&&e.preventDefault()}function Qt(e,t){const n=Ge(t);e.style.left=n+"px",e.style.width=Ge(t+1)-n+"px",e.style.height=r.rowHeight+"px",e.style.textAlign=We(t)?"left":"right",e.onclick=Ut,e.onmouseenter=jt,e.onmouseleave=Ht,e.classList.contains("qg-timestamp")&&pt(e,"qg-timestamp"),e.columnIndex===M-1&&pt(e,"qg-last-col"),e.columnIndex=t,t===B&&ft(e,"qg-timestamp"),e.columnIndex===M-1&&ft(e,"qg-last-col")}function Yt(e,t,n,r){for(let a=0;a<U;a++){const o=document.createElement("div");o.className="qg-r",o.tabIndex=a+a;for(let e=0;e<n;e++){const t=document.createElement("div");t.className="qg-c",Qt(t,e),o.append(t),0===a&&0===e&&Et(t)}o.style.top="-100",o.style.height=ae.toString()+"px",o.style.width=r+"px",t.push(o),e.append(o)}}function Kt(){if(Z)return;let e=0;for(let t=0;t<X;t++)e+=Ve(t);let t=0;for(let e=X,n=X+J;e<n;e++)t+=Ve(e);ee=e,te=t}function Xt(){const e=.8*u.getBoundingClientRect().width;if(Ae=e<.1,!Ae&&q&&q.length>0){const t=Le[Ne],n=void 0!==t?t.deviants:void 0,r=q[0],a=r.length;ln(void 0!==t?t.freezeLeft:0);let o=0;for(let t=0;t<M;t++){let i;if(n&&(i=n[De(t).name]),void 0===i){i=Ve(t);for(let n=0;n<a;n++){R[t]=o;const a=r[n][t],l=null!==a?a.toString():"null";i=Math.min(e,Math.max(i,ot(l.length)))}}else R[t]=o;o+=i}R[M]=o,F=o}}function Jt(){_t(0),me.focus()}function en(){D=[];for(let e=0;e<M;e++)D.push(e)}function tn(){Mt(),Kt()}function nn(){p.style.width=f+"px"}function rn(){if(Z)return;const e=Le[Ne];e&&e.columnPositions&&(D=e.columnPositions,B=e.timestampIndex),Xt(),zt(),we=mt(g,0,M,!0),P>0?(mt(E,0,Math.min(P,M),!1),an()):on(),nn(),Yt(m,fe,J,F),Yt(b,A,Math.min(P,M),f),function(){oe=I,ie=oe*ae,se=ie<r.yMaxThreshold?ie:r.yMaxThreshold,de=ie/se;const e=(0===se?1:se)+"px";m.style.height=e,b.style.height=e}(),ze(0),Zt(),he=0,me=fe[he],y=A[he],Jt()}function an(){p.style.display="block",N.style.display="none",h.scrollTop=u.scrollTop}function on(){p.style.display="none",N.style.display="block";for(let e=0,t=A.length;e<t;e++)A[e].innerHTML=""}function ln(e){P=void 0!==e?e:0,cn("freeze.state",{freezeLeft:P})}function sn(e){if(void 0!==e&&e!==P){if(e<P){for(let t=0,n=A.length;t<n;t++){const n=A[t];for(let t=e;t<P;t++)n.childNodes[e].remove()}for(let t=e;t<P;t++)E.childNodes[e].remove();0===e&&on()}else{for(let t=0,n=A.length;t<n;t++){const n=A[t];for(let t=P;t<e;t++){const e=document.createElement("div");e.className="qg-c",Qt(e,t),n.append(e)}}mt(E,P,e-P,!1),an()}ln(e),rt().freezeLeft=P,nt(),Ct(A,0,Math.min(P,M),X),zt(),nn(),Ct(fe,vt(X),X+J,X)}}function cn(e,t){c.dispatchEvent(new CustomEvent(e,{detail:t}))}return function(){g=document.createElement("div"),ft(g,"qg-header-row"),u=document.createElement("div"),u.onscroll=Dt,ft(u,"qg-viewport"),m=document.createElement("div"),m.className="qg-canvas",m.onkeydown=$t,m.onkeyup=Gt,O=document.createElement("div"),O.className="qg-col-resize-ghost",u.append(m,O),p=document.createElement("div"),ft(p,"qg-panel-left"),E=document.createElement("div"),ft(E,"qg-header-left-row"),h=document.createElement("div"),h.onscroll=Ft,ft(h,"qg-viewport-left"),b=document.createElement("div"),b.className="qg-canvas",b.onkeydown=$t,b.onkeyup=Gt,h.append(b),v=document.createElement("div"),ft(v,"qg-panel-left-hysteresis"),v.onmouseenter=it,v.onmouseleave=lt,v.onmousemove=ut,v.onmousedown=dt,C=document.createElement("div"),ft(C,"qg-panel-left-ghost"),C.onmousemove=ut,C.onmouseleave=lt,_=document.createElement("div"),ft(_,"qg-panel-left-ghost-handle"),_.onmouseleave=lt,_.onmousedown=dt,C.append(_),p.append(E,h,v),x=document.createElement("div"),ft(x,"qg-panel-left-snap-ghost"),N=document.createElement("div"),ft(N,"qg-panel-left-initial-hysteresis"),N.onmouseenter=it,N.onmouseleave=lt,N.onmousemove=ut,N.onmousedown=dt,c.append(g,u,p,C,x,N),c.onmousemove=At,c.style.position="relative";const e=window.localStorage.getItem(s);e&&(Le=JSON.parse(e)),new ResizeObserver((function(){c.getBoundingClientRect().height>0&&c.getBoundingClientRect().width>0&&Zt()})).observe(c)}(),Zt(),{clearCustomLayout:function(){Vt()},shuffleFocusedColumnToFront:function(){Me()},toggleFreezeLeft:function(){sn(P>0?0:1),_t(be)},show:function(){c.style.display="flex",Zt()},hide:function(){c.style.display="none"},focus:function(){ge&&me&&(Et(ge),me.focus())},setData:function(e){!function(e){setTimeout((()=>{(function(e){ce=0,le=0,ue=0,oe=0,g.innerHTML="",E.innerHTML="",m.innerHTML="",b.innerHTML="",fe=[],A=[],q=[],Q=null,W=0,$=0,K=[],M=0,I=0,me=null,y=null,ge=null,be=-1,X=0,J=10,ne=0,B=-1,z=-1,he=-1,Ae=!1,xe=void 0,Qe(),Te=void 0,Ne=void 0,f=0,Z=!1,ln(0),At(),Q=e.query,q.push(e.dataset),L=e.columns,M=L.length,en(),z=e.timestamp,B=z,I=e.count,gt(),tn()})(e),function(e){const t=[];for(let e=0;e<M;e++){const n=De(e);t.push({name:n.name,type:n.type})}Te=JSON.stringify(t),Ne=(e=>{let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return new Uint32Array([t])[0].toString(36)})(Te),e()}(rn)}),0)}(e)},getSQL:function(){return Q},render:function(){Zt()},addEventListener:function(e,t){!function(e,t,n){{const n=e=>{t.call(c,e)};c.addEventListener(e,n)}}(e,t)}}}n(60985),n(91499),n(21287),n(50591);var Al=n(99400),Ll=n(91074),Dl=n(37579),Ml=n(28670),Bl=n.n(Ml);const zl="#eee",ql=function(){return{axisLine:{lineStyle:{color:zl}},axisTick:{lineStyle:{color:zl}},axisLabel:{textStyle:{color:zl}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:zl}}}},Fl=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],Zl={color:Fl,backgroundColor:"#282a36",tooltip:{axisPointer:{lineStyle:{color:zl},crossStyle:{color:zl}}},legend:{textStyle:{color:zl}},textStyle:{color:zl},title:{textStyle:{color:zl}},toolbox:{iconStyle:{normal:{borderColor:zl}}},dataZoom:{textStyle:{color:zl}},timeline:{lineStyle:{color:zl},itemStyle:{normal:{color:Fl[1]}},label:{normal:{textStyle:{color:zl}}},controlStyle:{normal:{color:zl,borderColor:zl}}},timeAxis:ql(),logAxis:ql(),valueAxis:ql(),categoryAxis:ql(),line:{symbol:"circle"},graph:{color:Fl},gauge:{title:{textStyle:{color:zl}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}},textStyle:{fontFamily:'"Open Sans", -apple-system, BlinkMacSystemFont, Helvetica, Roboto, sans-serif'}};var Ul=n(94349);Al.D$([Ll.N,Dl.N]);const jl=s.ZP.div.withConfig({displayName:"Result__Root"})(["\n  display: flex;\n  flex: 1;\n  width: 100%;\n"]),Hl=(0,s.ZP)(ot).withConfig({displayName:"Result__Wrapper"})(["\n  overflow: hidden;\n"]),Gl=(0,s.ZP)(at).withConfig({displayName:"Result__Content"})(["\n  flex: 1 1 0;\n  color: ",";\n\n  *::selection {\n    background: ",";\n    color: ",";\n  }\n"],A("foreground"),A("red"),A("foreground")),Vl=s.ZP.div.withConfig({displayName:"Result__Actions"})(["\n  display: grid;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n  gap: 0;\n  align-items: center;\n  justify-content: flex-end;\n  padding: 0 1rem;\n  width: 100%;\n  height: 4.5rem;\n  background: ",";\n"],(({theme:e})=>e.color.backgroundDarker)),Wl=(0,s.ZP)(Il.L).withConfig({displayName:"Result__TableFreezeColumnIcon"})(["\n  transform: scaleX(-1);\n"]),$l=(0,s.ZP)(Pe).withConfig({displayName:"Result__RowCount"})(["\n  margin-right: 1rem;\n"]),Ql=({viewMode:e})=>{const{quest:t}=(0,r.useContext)(ra),[n,a]=(0,r.useState)(),i=(0,o.v9)(ea.query.getResult),l=(0,o.v9)(ea.console.getActiveSidebar),s=(0,r.useRef)(),[c,d]=(0,r.useState)(0);(0,r.useEffect)((()=>{const e=Pl(document.getElementById("grid"),(async function(e,n,r,a){const o=await t.queryRaw(e,{limit:`${n},${r}`,nm:!0});o.type===N.DQL&&a(o)}));s.current=e,function(e,t,n){let r=e;const a=Tl()("#_qvis_frm_draw");let o,i,l,s,c,d,u;const m=new Set,g={title:{},tooltip:{},legend:{data:["Series"]},xAxis:{data:[]},yAxis:{},series:[{name:"Y-axis",type:"bar",data:[]}]};let p,f,h=!1;const b=new(Bl())({select:"#_qvis_frm_chart_type"}),E=new(Bl())({select:"#_qvis_frm_axis_x"}),y=new(Bl())({select:"#_qvis_frm_axis_y"});function w(){i.resize()}function v(){a.html('<i class="icon icon-play"></i><span>Draw</span>'),a.removeClass("js-chart-cancel").addClass("js-chart-draw")}function C(e){try{let t;const n=e.columns,r=e.dataset;if(n&&r){const e=new Map;for(t=0;t<n.length;t++)e.set(n[t].name,t);let a;if(null!=c){let n=e.get(c);const o=[];for(t=0;t<r.length;t++)o[t]=r[t][n];a={type:"category",name:c,data:o}}else a={};let o=[];if(d.length>0)for(t=0;t<d.length;t++){const n=e.get(d[t]);if(n){let e=[];for(let t=0;t<r.length;t++)e[t]=r[t][n];o[t]="area"===u?{type:"line",name:d[t],data:e,areaStyle:{},smooth:!0,symbol:"none"}:{name:d[t],type:u,data:e,large:!0}}}const l={tooltip:{trigger:"axis",axisPointer:{label:{show:!1}}},legend:{},xAxis:a,yAxis:{type:"value"},series:o};i.setOption(l,!0)}}finally{w(),v()}}async function x(){a.html('<i class="icon icon-stop"></i><span>Cancel</span>'),a.removeClass("js-chart-draw").addClass("js-chart-cancel"),h=!0,u=b.selected();const e=E.selected(),t=y.selected();if((0,Ul.arrayEquals)(e,c)&&(0,Ul.arrayEquals)(t,d)&&l===f)C(p);else{m.clear(),c=E.selected(),c&&m.add(c),d=y.selected(),function(e,t){for(let n=0;n<e.length;n++)t.add(e[n])}(y.selected(),m);let e="";m.forEach((function(t){""!==e&&(e+=","),e+=t})),s=(new Date).getTime();const t=await n.queryRaw(l,{count:!1,timings:!1,cols:e,src:"vis"});t.type===N.DQL?(r=t,h=!1,k.publish(S.MSG_QUERY_OK,{delta:(new Date).getTime()-s,count:r.count}),p=r,f=l,C(r)):function(e){h=!1,v(),k.publish(S.MSG_QUERY_ERROR,{query:f,r:e.responseJSON,status:e.status,statusText:e.statusText,delta:(new Date).getTime()-s})}(t),k.publish(S.MSG_QUERY_RUNNING)}var r}function _(){i.setOption(g,!0)}o=r.find(".quick-vis-canvas")[0],Tl()(window).resize(w),k.subscribe(S.MSG_ACTIVE_SIDEBAR,w),i=Al.S1(o,Zl),k.subscribe(S.MSG_QUERY_DATASET,(function(e){let t=[];const n=e.columns;for(let e=0;e<n.length;e++)t[e]={text:n[e].name,value:n[e].name};E.setData(t),y.setData(t),y.set(t.slice(1).map((e=>e.text))),l=e.query,_()})),a.click((function(){return h?n.abort():x(),x(),!1})),_(),w()}(Tl()("#quick-vis"),window.bus,t),e.addEventListener("header.click",(function(e){k.publish(S.MSG_EDITOR_INSERT_COLUMN,e.detail.columnName)})),e.addEventListener("yield.focus",(function(){k.publish(S.MSG_EDITOR_FOCUS)})),e.addEventListener("freeze.state",(function(e){d(e.detail.freezeLeft)}))}),[]),(0,r.useEffect)((()=>{i?.type===N.DQL&&(a(i.count),s?.current?.setData(i))}),[i]),(0,r.useEffect)((()=>{const t=document.getElementById("grid"),n=document.getElementById("quick-vis");t&&n&&("grid"===e?(n.style.display="none",s?.current?.show()):(s?.current?.hide(),n.style.display="flex"))}),[e]),(0,r.useEffect)((()=>{s?.current?.render()}),[l]);const u=[{tooltipText:"Freeze left column",trigger:r.createElement(vt,{onClick:()=>{s?.current?.toggleFreezeLeft(),s?.current?.focus()},selected:c>0},r.createElement(Wl,{size:"18px"}))},{tooltipText:"Move selected column to the front",trigger:r.createElement(Jt.z,{skin:"transparent",onClick:s?.current?.shuffleFocusedColumnToFront},r.createElement(Rl.W,{size:"18px"}))},{tooltipText:"Reset grid layout",trigger:r.createElement(Jt.z,{skin:"transparent",onClick:s?.current?.clearCustomLayout},r.createElement(Ol.A,{size:"18px"}))},{tooltipText:"Refresh",trigger:r.createElement(Jt.z,{skin:"transparent",onClick:()=>{const e=s?.current?.getSQL();e&&k.publish(S.MSG_QUERY_EXEC,{q:e})}},r.createElement(or.h,{size:"18px"}))}];return(0,r.useEffect)((()=>{i?.type===N.DQL&&a(i.count)}),[i]),r.createElement(jl,null,r.createElement(Hl,null,r.createElement(Vl,null,n&&r.createElement($l,{color:"foreground"},`${n.toLocaleString()} row${n>1?"s":""}`),"grid"===e&&u.map(((e,t)=>r.createElement(st,{key:t,delay:350,placement:"bottom",trigger:e.trigger},r.createElement(St,null,e.tooltipText)))),r.createElement(st,{delay:350,placement:"bottom",trigger:r.createElement(Jt.z,{skin:"transparent",onClick:()=>{const e=s?.current?.getSQL();e&&t.exportQueryToCsv(e)}},r.createElement(Nl.Q,{size:"18px"}))},r.createElement(St,null,"Download result as a CSV file"))),r.createElement(Gl,null,r.createElement("div",{id:"grid"}),r.createElement("div",{id:"quick-vis"},r.createElement("div",{className:"quick-vis-controls"},r.createElement("form",{className:"v-fit",role:"form"},r.createElement("div",{className:"form-group"},r.createElement("label",null,"Chart type"),r.createElement("select",{id:"_qvis_frm_chart_type"},r.createElement("option",null,"bar"),r.createElement("option",null,"line"),r.createElement("option",null,"area"))),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Labels"),r.createElement("select",{id:"_qvis_frm_axis_x","data-hook":"chart-panel-labels-select"})),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Series"),r.createElement("select",{id:"_qvis_frm_axis_y","data-hook":"chart-panel-series-select",multiple:!0})),r.createElement("button",{className:"button-primary js-chart-draw",id:"_qvis_frm_draw","data-hook":"chart-panel-draw-button"},r.createElement("i",{className:"icon icon-play"}),r.createElement("span",null,"Draw")))),r.createElement("div",{className:"quick-vis-canvas"})))))};var Yl=n(2590),Kl=n(83332),Xl=n(19663),Jl=n(79609);function es(){return es=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},es.apply(this,arguments)}A("backgroundDarker"),A("selection"),A("foreground"),A("selection"),A("foreground");const ts=s.ZP.div.withConfig({displayName:"Table__Wrapper"})(["\n  position: relative;\n  display: flex;\n  margin-top: 0.5rem;\n  align-items: stretch;\n  flex-direction: column;\n  overflow: hidden;\n  font-family: ",";\n\n  ",";\n"],(({theme:e})=>e.fontMonospace),K),ns=(0,s.ZP)(ao).withConfig({displayName:"Table__Title"})(["\n  display: flex;\n  align-items: stretch;\n  font-weight: ",";\n\n  &:hover {\n    cursor: pointer;\n  }\n"],(({expanded:e})=>e?800:400)),rs=s.ZP.div.withConfig({displayName:"Table__Columns"})(['\n  position: relative;\n  display: flex;\n  margin-left: 2rem;\n  flex-direction: column;\n\n  &:before {\n    position: absolute;\n    height: 100%;\n    width: 2px;\n    left: -0.4rem;\n    top: 0;\n    content: "";\n    background: ',";\n  }\n"],A("gray1")),as=(0,s.ZP)(Xl.o).withConfig({displayName:"Table__Loader"})(["\n  margin-left: 1rem;\n  color: ",";\n  ",";\n"],A("orange"),p),os=({column:e,designatedTimestamp:t})=>({toggleOpen:n})=>r.createElement(ao,es({},e,{designatedTimestamp:t,kind:"column",name:e.column,onClick:()=>n()})),is=({description:e,isScrolling:t,designatedTimestamp:n,table_name:a,partitionBy:i,expanded:l=!1,walEnabled:s,walTableData:c,onChange:d,dedup:u,selected:m,selectOpen:g,onSelectToggle:p})=>{const{quest:f}=(0,r.useContext)(ra),[h,b]=(0,r.useState)(),E=(0,o.v9)(ea.query.getTables),y=(0,o.I0)(),w=async e=>{try{const t=await f.showColumns(e);if(t&&t.type===N.DQL)return t}catch(t){y(Rr({content:r.createElement(Pe,{color:"red"},"Cannot show columns from table '",e,"'"),type:Sr.ERROR}))}};(0,r.useEffect)((()=>{(async()=>{if(E&&l&&a){const e=await w(a);e&&e.data&&b(e.data)}})()}),[E,a]);const v=[{name:a,kind:"table",initiallyOpen:l,children:[{name:"Columns",initiallyOpen:!0,wrapper:rs,async onOpen({setChildren:e}){d(a);const t=await w(a);t&&t.data&&t.data.length>0?(b(t.data),e(t.data.map((e=>({name:e.column,render:os({column:e,designatedTimestamp:n})}))))):e([{name:"error",render:()=>r.createElement(Pe,{color:"gray2"},"No columns found")}])},render:({toggleOpen:e,isOpen:t,isLoading:n})=>r.createElement(ao,{expanded:t&&!n,kind:"folder",name:"Columns",onClick:()=>e(),suffix:n&&r.createElement(as,{size:"18px"})})}],render:({toggleOpen:t,isLoading:n})=>r.createElement(Jl.W4,{id:a},r.createElement(ns,{description:e,kind:"table",name:a,onClick:()=>{t(),d(a)},partitionBy:i,walEnabled:s,walTableData:c,suffix:n&&r.createElement(as,{size:"18px"}),tooltip:!!e,selectOpen:g,selected:m,onSelectToggle:p}))}];return r.createElement(ts,{_height:h?30*h.length:0},r.createElement(co,{root:v}))};var ls=n(82885);const ss=s.ZP.div.withConfig({displayName:"LoadingError__Wrapper"})(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  width: 100%;\n  height: 100%;\n"]),cs=(0,s.ZP)(ls.N).withConfig({displayName:"LoadingError__CloudOffIcon"})(["\n  height: 3rem;\n"]),ds=(0,s.ZP)(Pe).withConfig({displayName:"LoadingError__ErrorTextLine"})(["\n  margin-top: 1rem;\n"]),us=({error:e})=>r.createElement(ss,null,r.createElement(cs,null),r.createElement(ds,{color:"white"},"Cannot load tables"),e&&r.createElement(ds,{color:"gray2",size:"sm"},e.error));var ms=n(78882);const gs=({name:e,partitionBy:t,timestamp:n,walEnabled:r,dedup:a,schemaColumns:o})=>{const i=n&&o.find((e=>e.column===n&&"TIMESTAMP"===e.type));let l=`CREATE TABLE '${e}' (`;for(let e=0;e<o.length;e++){const{column:t,type:n,indexed:r,indexBlockCapacity:a,symbolCached:i,symbolCapacity:s}=o[e];l+=`${t} ${n} `,"SYMBOL"===n&&(l+=s?`capacity ${s} `:"",i&&(l+="CACHE ")),r&&(l+="index ",a&&(l+=`capacity ${a} `)),l=(0,ms.Z)(l),e!==o.length-1&&(l+=", ")}if(l+=")",i&&(l+=` timestamp (${n})`),"NONE"!==t&&(l+=` PARTITION BY ${t} ${r?"WAL":"BYPASS WAL"}`),r&&a&&i){const e=o.filter((e=>e.upsertKey));e.length>0&&(l+=` DEDUP UPSERT KEYS(${(e.find((e=>e.column===n))?e:[...e,{column:n}]).map((e=>e.column)).join(",")})`)}return`${D(l)};`};var ps=n(85506);const fs=(0,s.ZP)(zt.x).attrs({justifyContent:"space-between",gap:"1rem",alignItems:"center"}).withConfig({displayName:"toolbar__Root"})(["\n  width: 100%;\n  padding: 0 2rem;\n  margin-bottom: 1rem;\n"]),hs=s.ZP.div.withConfig({displayName:"toolbar__Filter"})(["\n  position: relative;\n  display: flex;\n  width: 100%;\n"]),bs=(0,s.ZP)(ps.P).withConfig({displayName:"toolbar__FilterIcon"})(["\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  left: 1rem;\n  color: ",";\n"],(({theme:e})=>e.color.gray2)),Es=(0,s.ZP)(ve.x).withConfig({displayName:"toolbar__CloseIcon"})(["\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  right: 0.5rem;\n"]),ys=(0,s.ZP)(nn.I).withConfig({displayName:"toolbar__StyledInput"})(["\n  padding-left: 3.5rem;\n  padding-right: 3.5rem;\n  width: 100%;\n\n  &::placeholder {\n    color: ",";\n  }\n"],(({theme:e})=>e.color.foreground)),ws=(0,s.ZP)(Jt.z).withConfig({displayName:"toolbar__StyledButton"})(["\n  &:disabled {\n    border: none;\n  }\n"]),vs=(0,s.ZP)(zt.x).attrs({gap:"0.5rem"}).withConfig({displayName:"toolbar__Error"})(["\n  &,\n  button {\n    color: ",";\n    cursor: ",";\n  }\n"],(({theme:e,suspendedTablesCount:t})=>e.color[t>0?"red":"gray1"]),(({suspendedTablesCount:e})=>e>0?"pointer":"default")),Cs=({suspendedTablesCount:e,filterSuspendedOnly:t,setFilterSuspendedOnly:n})=>{const{setQuery:a}=(0,r.useContext)(en),o=r.useRef(null);return r.createElement(fs,null,r.createElement(hs,null,r.createElement(bs,{size:"20px"}),o.current?.value&&r.createElement(Es,{size:"20px",onClick:()=>{a(""),o.current?.value&&(o.current.value="")},"data-hook":"schema-search-clear-button"}),r.createElement(ys,{ref:o,name:"table_filter",placeholder:"Filter...",onChange:e=>a(e.target.value)})),e>0&&r.createElement(vs,{suspendedTablesCount:e},r.createElement(st,{placement:"bottom",trigger:r.createElement(ws,{skin:"transparent",onClick:()=>n(!t),prefixIcon:r.createElement(rn.j,{size:"18px"}),"data-hook":"schema-filter-suspended-button"},r.createElement("span",null,e))},r.createElement(St,null,"Show suspended tables"))))},xs=(e,t)=>isNaN(parseInt(e))?t:parseInt(e),_s={authPayload:"",editorCol:1,editorLine:1,editorSplitterBasis:350,resultsSplitterBasis:350,updateSettings:(e,t)=>{},exampleQueriesVisited:!1,autoRefreshTables:!0},ks=(0,r.createContext)(_s),Ss=({children:e})=>{const[t,n]=(0,r.useState)(In(T.AUTH_PAYLOAD)),[a,o]=(0,r.useState)(xs(In(T.EDITOR_COL),10)),[i,l]=(0,r.useState)(xs(In(T.EDITOR_LINE),10)),[s,c]=(0,r.useState)(xs(In(T.EDITOR_SPLITTER_BASIS),350)),[d,u]=(0,r.useState)(xs(In(T.RESULTS_SPLITTER_BASIS),350)),[m,g]=(0,r.useState)("true"===In(T.EXAMPLE_QUERIES_VISITED)),[p,f]=(0,r.useState)(!In(T.AUTO_REFRESH_TABLES)||"true"===In(T.AUTO_REFRESH_TABLES));return r.createElement(ks.Provider,{value:{authPayload:t,editorCol:a,editorLine:i,editorSplitterBasis:s,resultsSplitterBasis:d,updateSettings:(e,t)=>{Pn(e,t.toString()),(e=>{const t=In(e);switch(e){case T.AUTH_PAYLOAD:n(t);break;case T.EDITOR_COL:o(xs(t,10));break;case T.EDITOR_LINE:l(xs(t,10));break;case T.EXAMPLE_QUERIES_VISITED:g("true"===t);break;case T.EDITOR_SPLITTER_BASIS:c(xs(t,350));break;case T.RESULTS_SPLITTER_BASIS:u(xs(t,350));break;case T.AUTO_REFRESH_TABLES:f("true"===t)}})(e)},exampleQueriesVisited:m,autoRefreshTables:p}},e)},Ts=()=>(0,r.useContext)(ks);function Ns(){return Ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ns.apply(this,arguments)}const Os=(0,s.iv)(["\n  display: flex;\n  justify-content: center;\n"]),Rs=(0,s.ZP)(ot).withConfig({displayName:"Schema__Wrapper"})(["\n  overflow-x: auto;\n  height: 100%;\n"]),Is=(0,s.ZP)(at).withConfig({displayName:"Schema__Content"})(["\n  display: block;\n  overflow: auto;\n  ",";\n"],(({_loading:e})=>e&&Os)),Ps=(0,s.ZP)(Yl.G).withConfig({displayName:"Schema__Loader"})(["\n  margin-left: 1rem;\n  align-self: center;\n  color: ",";\n  ",";\n"],A("foreground"),p),As=s.ZP.div.withConfig({displayName:"Schema__FlexSpacer"})(["\n  flex: 1;\n"]),Ls=(0,s.ZP)(vt).withConfig({displayName:"Schema__ToolbarToggleButton"})(["\n  &&:not(:disabled) {\n    width: auto;\n    padding: 0 1rem;\n    height: 3rem;\n  }\n"]),Ds=()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=setTimeout((()=>t(!0)),1e3);return()=>clearTimeout(e)}),[]),e?r.createElement(Ps,{size:"22px"}):null};var Ms=function(e){return e[e.loading=0]="loading",e[e.error=1]="error",e[e.ready=2]="ready",e}(Ms||{});const Bs={view:Ms.loading},zs=(e,t)=>({...e,...t}),qs=({innerRef:e,...t})=>{const[n,a]=(0,r.useReducer)(zs,Bs),{quest:i}=(0,r.useContext)(ra),[l,s]=(0,r.useState)(null),c=(0,r.useRef)(null),[d,u]=(0,r.useState)(),[m,g]=(0,r.useState)(),[p,f]=(0,r.useState)(),[h,b]=(0,r.useState)(!1),E=(0,o.I0)(),[y,w]=(0,r.useState)(!0),v=(0,r.useRef)(null),[C,x]=(0,r.useState)(!1),[_,O]=(0,r.useState)(""),[R,I]=(0,r.useState)(!1),[P,A]=(0,r.useState)(),{autoRefreshTables:L,updateSettings:D}=Ts(),[M,z]=(0,r.useState)(!1),[q,F]=(0,r.useState)([]),[Z,U]=(0,r.useState)(!1),j=(0,r.useRef)(!1),H=e=>{f(e===p?void 0:e)},G=async()=>{try{const e=await i.showTables();if(e&&e.type===N.DQL){c.current=null,u(e.data),E(Dr(e.data));const t=await i.query("wal_tables()");t&&t.type===N.DQL&&g(t.data.filter((t=>e.data.map((e=>e.table_name)).includes(t.name)))),a({view:Ms.ready})}else a({view:Ms.error})}catch(e){a({view:Ms.error})}},V=async()=>{try{const e=await i.query("information_schema.columns()");e&&e&&e.type===N.DQL&&(A(e.data),E(Mr(e.data)))}catch(e){a({view:Ms.error})}},W=e=>{q.includes(e)?F(q.filter((t=>t!==e))):F([...q,e])};(0,r.useEffect)((()=>{G(),V(),k.subscribe(S.MSG_CONNECTION_ERROR,(e=>{e&&(c.current=e,s(e))})),k.subscribe(S.MSG_CONNECTION_OK,(()=>{null!==c.current&&(G(),V())}))}),[]);const $=()=>{j.current&&(G(),V())};(0,r.useEffect)((()=>{L?(k.subscribe(S.MSG_QUERY_SCHEMA,(()=>{G(),V()})),window.addEventListener("focus",$),U(!0),j.current=!0):Z&&(k.unsubscribe(S.MSG_QUERY_SCHEMA),window.removeEventListener("focus",$),U(!1),j.current=!1)}),[L]);const Q={[Ms.loading]:()=>r.createElement(Ds,null),[Ms.error]:()=>l?r.createElement(us,{error:l}):r.createElement(As,null),[Ms.ready]:()=>r.createElement(r.Fragment,null,d&&d.length>0&&r.createElement(Cs,{suspendedTablesCount:m?.filter((e=>e.suspended)).length??0,filterSuspendedOnly:R,setFilterSuspendedOnly:I}),d&&d.filter((e=>{const t=e.table_name.toLowerCase(),n=_.toLowerCase();return t.includes(n)&&(!R||e.walEnabled&&m?.find((t=>t.name===e.table_name))?.suspended)})).map((e=>r.createElement(is,{designatedTimestamp:e.designatedTimestamp,expanded:e.table_name===p,isScrolling:h,key:e.table_name,table_name:e.table_name,onChange:H,partitionBy:e.partitionBy,walEnabled:e.walEnabled,walTableData:m?.find((t=>t.name===e.table_name)),dedup:e.dedup,selectOpen:M,selected:q.includes(e.table_name),onSelectToggle:W}))))};return r.createElement(en.Provider,{value:{query:_,setQuery:O}},r.createElement(Rs,Ns({ref:e},t),r.createElement(De.Header,{title:"Tables",afterTitle:r.createElement("div",{style:{display:"flex",marginRight:"1rem"}},d&&r.createElement(_e,{align:"center",gap:"0"},M&&r.createElement(st,{delay:350,placement:"bottom",trigger:r.createElement(Jt.z,{skin:"transparent","data-hook":"schema-copy-to-clipboard-button",disabled:0===q.length,onClick:async()=>{if(!d)return;let e=[];const t=await Promise.all(q.map((async t=>{try{const e=await i.showColumns(t),n=d.find((e=>e.table_name===t));if(n&&e.type===N.DQL&&e.data.length>0)return((e,t,n,r,a)=>{const o=n.find((e=>e.designated));return gs({name:e,partitionBy:t,timestamp:o?o.column:"",walEnabled:r,dedup:a,schemaColumns:n.map((e=>B(e,["column","type","indexed","indexBlockCapacity","symbolCached","symbolCapacity","designated","upsertKey"])))})})(n.table_name,n.partitionBy,e.data,n.walEnabled,n.dedup)}catch(n){e.push(t)}})));0===e.length?((e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)})(t.join("\n\n")),E(Rr({content:r.createElement(Pe,{color:"foreground"},"Schemas copied to clipboard")}))):E(Rr({content:r.createElement(Pe,{color:"red"},"Cannot copy schemas from tables:"," ",e.sort().join(", ")),type:Sr.ERROR}))}},r.createElement(on.f,{size:"18px"}))},r.createElement(St,null,"Copy schemas to clipboard")),M&&r.createElement(st,{delay:350,placement:"bottom",trigger:r.createElement(Jt.z,{skin:"transparent","data-hook":"schema-select-all-button",onClick:()=>{q.length===d?.length?F([]):F(d?.map((e=>e.table_name))??[])}},r.createElement(Ua,{visible:!0,checked:q.length===d?.length}))},r.createElement(St,null,q.length===d?.length?"Deselect":"Select"," ","all")),M&&r.createElement(st,{delay:350,placement:"bottom",trigger:r.createElement(Jt.z,{"data-hook":"schema-cancel-select-button",skin:"transparent",onClick:()=>{F([]),z(!1)}},r.createElement(ve.x,{size:"18px"}))},r.createElement(St,null,"Cancel")),!M&&r.createElement(st,{delay:350,placement:"right",trigger:r.createElement(Ls,Ns({"data-hook":"schema-select-button",onClick:()=>{M&&F([]),z(!M)}},M?{className:"selected"}:{},{selected:M,disabled:0===d?.length}),r.createElement(Kl.e,{size:"18px"}))},r.createElement(St,null,"Select")),!M&&r.createElement(st,{delay:350,placement:"right",trigger:r.createElement(Ls,{"data-hook":"schema-auto-refresh-button",onClick:()=>{D(T.AUTO_REFRESH_TABLES,!L),G(),V()},selected:L},r.createElement(or.h,{size:"18px"}))},r.createElement(St,null,"Auto refresh"," ",L?"enabled":"disabled")))),shadow:!y}),r.createElement(Is,{_loading:n.view===Ms.loading,ref:v,onScroll:()=>w(0===v?.current?.scrollTop)},Q[n.view]())))},Fs=(e,t)=>r.createElement(qs,Ns({},e,{innerRef:t})),Zs=(0,r.forwardRef)(Fs);var Us=n(83381);const js=s.ZP.div.withConfig({displayName:"start__Items"})(["\n  display: grid;\n  grid-auto-flow: row;\n  grid-auto-columns: max-content;\n  gap: 4rem;\n  text-align: center;\n  justify-items: center;\n"]),Hs=(0,s.ZP)(Us.X).withConfig({displayName:"start__StyledHeading"})(["\n  color: ",";\n"],(({theme:e})=>e.color.foreground)),Gs=s.ZP.div.withConfig({displayName:"start__Actions"})(["\n  display: grid;\n  gap: 2rem;\n  grid-template-columns: repeat(2, 1fr);\n"]),Vs=(0,s.ZP)(zt.x).attrs({flexDirection:"column",gap:"2rem"}).withConfig({displayName:"start__Action"})(["\n  padding: 2rem;\n  border-radius: ",";\n  background: #2c2e3d;\n  cursor: pointer;\n\n  &,\n  &:hover {\n    ",";\n  }\n\n  > * {\n    opacity: 0.8;\n  }\n\n  &:hover {\n    background: #3f4252;\n\n    > * {\n      opacity: 1;\n    }\n  }\n"],(({theme:e})=>e.borderRadius),X),Ws=()=>{const e=(0,o.I0)();return r.createElement(js,null,r.createElement(Hs,{level:3},"Enter a query and press ",r.createElement(Pe,{color:"green"},"Run")," to view results."),r.createElement(Gs,null,r.createElement(Vs,{onClick:()=>e(Or.setActiveBottomPanel("import"))},r.createElement("img",{alt:"File upload icon",width:"60",height:"80",src:"assets/upload.svg"}),r.createElement(Us.X,{level:5},"Import CSV")),r.createElement(Vs,{onClick:()=>e(Or.setActiveSidebar("create"))},r.createElement("img",{alt:"Create table icon",width:"60",height:"80",src:"assets/create-table.svg"}),r.createElement(Us.X,{level:5},"Create table"))))},$s=(0,s.ZP)(at).withConfig({displayName:"zero-state__StyledPaneContent"})(["\n  align-items: center;\n  justify-content: center;\n"]),Qs=()=>{const{quest:e}=(0,r.useContext)(ra),[t,n]=(0,r.useState)(!0),[a,o]=(0,r.useState)([]);return(0,r.useEffect)((()=>{(async()=>{try{const t=await e.showTables();t&&t.type===N.DQL&&o(t.data)}catch(e){return}finally{n(!1)}})()}),[]),r.createElement(ot,null,r.createElement($s,null,!t&&a.length<=2&&r.createElement(Ws,null)))},Ys=(0,s.ZP)(_e).attrs({flexDirection:"column"}).withConfig({displayName:"Sidebar"})(["\n  width: 4.5rem;\n  height: 100%;\n  background: ",";\n  gap: 1rem;\n  flex-shrink: 0;\n  justify-content: ",";\n  align-items: center;\n"],(({theme:e})=>e.color.backgroundDarker),(({align:e})=>"top"===e?"flex-start":"flex-end")),Ks=(0,s.ZP)(vt).withConfig({displayName:"navigation__Navigation"})(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n\n  & > span {\n    margin-left: 0 !important;\n  }\n\n  & > :not(:first-child) {\n    margin-top: 0.3rem;\n  }\n"]);var Xs=n(61520),Js=n(29155),ec=n(92973),tc=n(16836);const nc=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],rc=(e,t=0,n=1e3)=>e<n?`${((e,t=2)=>Math.round((e+Number.EPSILON)*10**t)/10**t)(e)} ${nc[t]}`:rc(e/n,t+1);var ac=n(36607);const oc=(0,s.ZP)(za.e).withConfig({displayName:"file-status__CheckboxCircleIcon"})(["\n  color: ",";\n"],(({theme:e})=>e.color.green)),ic=(0,s.ZP)(_e).withConfig({displayName:"file-status__StyledBox"})(["\n  gap: 0.5rem;\n  white-space: nowrap;\n"]),lc=({file:e})=>{const t=(e=>{if(!e.isUploading&&e.uploaded&&e.uploadResult)return{label:`Imported ${e.uploadResult.rowsImported.toLocaleString()} row${e.uploadResult.rowsImported>1||0===e.uploadResult.rowsImported?"s":""}`,type:ut.SUCCESS,icon:r.createElement(oc,{size:"16px"})};if(e.error)return{label:"Upload error",type:ut.ERROR};if(e.isUploading)return{label:`Uploading: ${e.uploadProgress.toFixed(2)}%`,type:ut.WARNING};switch(e.status){case R.EXISTS:return{label:"Table already exists",type:ut.WARNING};case R.RESERVED_NAME:return{label:"Reserved table name",type:ut.ERROR};case R.DOES_NOT_EXIST:return{label:"Ready to upload",type:ut.SUCCESS}}})(e);return t?r.createElement(_e,{gap:"1rem",align:"flex-start",flexDirection:"column"},r.createElement(ac.C,{type:t.type},r.createElement(ic,null,t.icon," ",t.label))):r.createElement(r.Fragment,null)};var sc=n(90342),cc=n(54830),dc=n(30942),uc=n(7218);const mc="yyyy-MM-ddTHH:mm:ss.SSSUUUz",gc=5e5,pc=(0,s.ZP)(uc.O).withConfig({displayName:"upload-settings-dialog__SettingsIcon"})(["\n  color: ",";\n"],(({theme:e})=>e.color.foreground)),fc=(0,s.ZP)(_e).attrs({justifyContent:"space-between",gap:"2rem"}).withConfig({displayName:"upload-settings-dialog__Row"})(["\n  width: 100%;\n"]),hc=(0,s.ZP)(_e).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"upload-settings-dialog__Items"})(["\n  height: 100%;\n"]),bc=(0,s.ZP)(_e).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"upload-settings-dialog__Inputs"})(["\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n"]),Ec=(0,s.ZP)(Ze.GroupItem).withConfig({displayName:"upload-settings-dialog__Option"})(["\n  width: 100%;\n\n  &:nth-child(even) {\n    background: #242531;\n  }\n"]),yc=s.ZP.div.withConfig({displayName:"upload-settings-dialog__InputWrapper"})(["\n  flex-shrink: 0;\n  width: 30%;\n"]),wc=({file:e,open:t,onOpenChange:n,onSubmit:a})=>{const{delimiter:o,overwrite:i,forceHeader:l,skipLev:s,atomicity:c,maxUncommitedRows:d}=e.settings,u={delimiter:o,overwrite:i,forceHeader:l,skipLev:s,atomicity:c,maxUncommitedRows:d},[m,g]=r.useState(u),p=[{type:"input",name:"maxUncommitedRows",label:"Maximum number of uncommited rows",placeholder:gc.toString(),description:r.createElement(r.Fragment,null,"Set this parameter to determine the size of the commit batch based on the RAM size of the machine to avoid running out of memory during an import."),defaultValue:m.maxUncommitedRows},{type:"input",name:"delimiter",label:"Delimiter",placeholder:"Automatic",description:r.createElement(r.Fragment,null,"Delimiter character. When not set, import will try to detect the delimiter automatically. You can define the parameter here to disable auto-detection and allow single-line file import."),defaultValue:m.delimiter},{type:"select",name:"atomicity",label:"Atomicity",description:r.createElement(r.Fragment,null,"Behavior when an error is detected in the data.",r.createElement("br",null),r.createElement("strong",null,"Abort"),": the entire file will be skipped.",r.createElement("br",null),r.createElement("strong",null,"Skip row"),": the row is skipped.",r.createElement("br",null),r.createElement("strong",null,"Skip column"),": the column is skipped."),defaultValue:m.atomicity,options:[{label:"Skip column",value:"skipCol"},{label:"Skip row",value:"skipRow"},{label:"Abort import",value:"abort"}]},{type:"switch",name:"forceHeader",label:"Force header",description:r.createElement(r.Fragment,null,"When set to ",r.createElement("strong",null,"false"),", QuestDB will try to infer if the first line of the file is the header line.",r.createElement("br",null),"When set to ",r.createElement("strong",null,"true"),", QuestDB will expect that line to be the header line."),defaultValue:m.forceHeader},{type:"switch",name:"skipLev",label:"Skip line extra values",description:r.createElement(r.Fragment,null,"When set to ",r.createElement("strong",null,"true"),", the parser will ignore extra values. When set to ",r.createElement("strong",null,"false"),", the parser will ignore the entire line. An extra value is something in addition to what is defined by the header."),defaultValue:m.skipLev}];return r.createElement(Ze,{open:t,title:r.createElement(_e,null,r.createElement(pc,{size:"20px"}),r.createElement(Pe,{color:"foreground"},"Settings for ",e.fileObject.name)),trigger:r.createElement(Jt.z,{skin:"secondary",prefixIcon:r.createElement(uc.O,{size:"18px"}),onClick:()=>n(!0)},"Settings"),onDismiss:()=>{g(u),n(!1)},afterTitle:r.createElement(_e,{gap:"1rem"},r.createElement(Jt.z,{prefixIcon:r.createElement(an.W,{size:18}),skin:"secondary",onClick:()=>{g(u),n(!1)},type:"button"},"Dismiss"),r.createElement(Jt.z,{prefixIcon:r.createElement(uc.O,{size:18}),skin:"success",onClick:()=>{a(m),n(!1)}},"Submit"))},r.createElement(Ze.ContentWrapper,null,r.createElement(hc,null,r.createElement(bc,null,p.map((e=>r.createElement(Ec,{key:e.name},r.createElement(fc,{key:e.name},r.createElement(_e,{gap:"1rem",flexDirection:"column",align:"flex-start",justifyContent:"flex-start"},r.createElement(Pe,{color:"foreground",weight:600},e.label),e.description&&r.createElement(Pe,{color:"gray2",size:"sm"},e.description)),r.createElement(yc,null,"input"===e.type&&r.createElement(nn.I,{name:e.name,defaultValue:e.defaultValue,placeholder:e.placeholder,onChange:t=>g({...m,[e.name]:t.target.value})}),"select"===e.type&&r.createElement(_n.P,{name:e.name,defaultValue:e.defaultValue,onChange:t=>g({...m,[e.name]:t.target.value}),options:e.options}),"switch"===e.type&&r.createElement(dc.r,{checked:e.defaultValue,onChange:t=>g({...m,[e.name]:t})}))))))))))},vc=({file:e,onUpload:t,onRemove:n,onSettingsChange:a})=>{const[o,i]=(0,r.useState)(!1);return r.createElement(_e,{gap:"1rem",align:"center"},r.createElement(wc,{open:o,onOpenChange:i,onSubmit:a,file:e}),r.createElement(Jt.z,{disabled:e.isUploading,skin:"primary",prefixIcon:r.createElement(cc.C,{size:"18px"}),onClick:()=>t(e.id)},e.isUploading?"Uploading...":"Upload"),r.createElement(st,{placement:"top",trigger:r.createElement(Jt.z,{disabled:e.isUploading,skin:"secondary",onClick:()=>{n(e.id)}},r.createElement(ve.x,{size:"18px"}))},r.createElement(St,null,"Remove file from queue")))};var Cc=n(3512);const xc=e=>{const t=e.length;if(t>127)return!1;if(["telemetry","telemetry_config"].includes(e))return!1;for(let n=0;n<t;n++)switch(e.charAt(n)){case".":if(0==n||n==t-1||"."==e.charAt(n-1))return!1;break;case"?":case",":case"'":case'"':case"\\":case"/":case":":case")":case"(":case"+":case"*":case"%":case"~":case"\0":case"":case"":case"":case"":case"":case"":case"":case"\b":case"\t":case"\v":case"\f":case"\r":case"\n":case"":case"":case"":case"0xfeff":return!1}return e.length>0&&" "!=e.charAt(0)&&" "!=e.charAt(t-1)},_c=s.ZP.ul.withConfig({displayName:"rename-table-dialog__List"})(["\n  list-style-position: inside;\n  padding-left: 0;\n\n  li {\n    margin-bottom: 1rem;\n  }\n"]),kc=(0,s.ZP)(tn.V.Description).withConfig({displayName:"rename-table-dialog__StyledDescription"})(["\n  display: grid;\n  gap: 2rem;\n"]),Sc=Hn().object({name:Hn().string().required().custom(((e,t)=>xc(e)?e:t.error("string.validTableName"))).messages({"string.empty":"Please enter a name","string.validTableName":"Invalid table name"})}),Tc=({open:e,onOpenChange:t,onNameChange:n,file:a})=>{const o=a.table_name??a.fileObject.name;return r.createElement(tn.V.Root,{open:e},r.createElement(tn.V.Trigger,{asChild:!0},r.createElement(ye.A,null,r.createElement(Jt.z,{skin:"transparent",prefixIcon:r.createElement(Cc.I,{size:"14px"}),onClick:()=>t(a)},P(o,20)))),r.createElement(tn.V.Portal,null,r.createElement(ye.A,null,r.createElement(we.a,{primitive:tn.V.Overlay})),r.createElement(tn.V.Content,{onEscapeKeyDown:()=>t(void 0),onInteractOutside:()=>t(void 0)},r.createElement(Rn,{name:"rename-table",defaultValues:{name:o},onSubmit:e=>{n(e.name),t(void 0)},validationSchema:Sc},r.createElement(tn.V.Title,null,r.createElement(_e,null,r.createElement(Cc.I,{size:20}),"Change table name")),r.createElement(kc,null,r.createElement(Rn.Item,{name:"name",label:"Table name"},r.createElement(Rn.Input,{name:"name"})),r.createElement(Pe,{color:"foreground"},r.createElement(_c,null,r.createElement("li",null,"Max 127 characters"),r.createElement("li",null,"Must not contain dot at the beginning"),r.createElement("li",null,"Must not contain the following characters:"," ",r.createElement("strong",null,"? , ' \" \\ / : ) ( + * & ~ \r \n")),r.createElement("li",null,"No control characters and UTF-8 BOM (Byte Order Mark)"),r.createElement("li",null,"Cannot be named ",r.createElement("strong",null,"telemetry")," or"," ",r.createElement("strong",null,"telemetry_config"))))),r.createElement(tn.V.ActionButtons,null,r.createElement(tn.V.Close,{asChild:!0},r.createElement(Jt.z,{prefixIcon:r.createElement(an.W,{size:18}),skin:"secondary",onClick:()=>t(void 0)},"Dismiss")),r.createElement(tn.V.Close,{asChild:!0},r.createElement(ye.A,null,r.createElement(Rn.Submit,{prefixIcon:r.createElement(Cc.I,{size:18}),variant:"success"},"Change"))))))))};var Nc=n(12619);const Oc="yyyy-MM-ddTHH:mm:ss.SSSUUUz",Rc=s.ZP.div.withConfig({displayName:"controls__Controls"})(["\n  display: grid;\n  grid-template-columns: var(--columns);\n  gap: 1rem;\n  width: 100%;\n  align-items: flex-end;\n  justify-items: center;\n"]),Ic=({url:e,text:t,tooltipText:n="Documentation"})=>r.createElement(st,{placement:"bottom",trigger:r.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},r.createElement(Jt.z,{skin:"transparent",type:"button"},r.createElement(Lt.d,{size:"14"}),t&&r.createElement("span",null,t)))},r.createElement(St,null,n));function Pc(){return Pc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pc.apply(this,arguments)}const Ac=[{label:"AUTO",value:""},{label:"BINARY",value:"BINARY"},{label:"BOOLEAN",value:"BOOLEAN"},{label:"BYTE",value:"BYTE"},{label:"CHAR",value:"CHAR"},{label:"DATE",value:"DATE"},{label:"DOUBLE",value:"DOUBLE"},{label:"FLOAT",value:"FLOAT"},{label:"GEOHASH",value:"GEOHASH"},{label:"INT",value:"INT"},{label:"IPV4",value:"IPV4"},{label:"LONG",value:"LONG"},{label:"LONG256",value:"LONG256"},{label:"SHORT",value:"SHORT"},{label:"STRING",value:"STRING"},{label:"VARCHAR",value:"VARCHAR"},{label:"SYMBOL",value:"SYMBOL"},{label:"TIMESTAMP",value:"TIMESTAMP"},{label:"UUID",value:"UUID"}],Lc=(0,s.ZP)(Pe).attrs({color:"foreground"}).withConfig({displayName:"column__IndexNumber"})([""]),Dc=s.ZP.div.withConfig({displayName:"column__Root"})(["\n  display: grid;\n  gap: 1rem;\n  grid-template-columns: 40px auto;\n  padding: 2rem;\n  ",";\n"],(({odd:e})=>e&&"background-color: #242531;")),Mc=(0,s.ZP)(_e).attrs({gap:"0",align:"center",justifyContent:"center"}).withConfig({displayName:"column__Index"})(["\n  width: 4rem;\n  height: 3rem;\n"]),Bc=(0,s.ZP)(Rc).withConfig({displayName:"column__TimestampControls"})(["\n  justify-items: flex-start;\n"]),zc=({action:e,disabled:t,column:n,index:a,onSetTimestamp:o,onFocus:i,timestamp:l,lastFocusedIndex:s})=>{const[c,d]=(0,r.useState)(n.name);return n?r.createElement(Dc,{key:n.name,odd:a%2!=0,disabled:t,onFocus:()=>i(a)},r.createElement(Mc,null,r.createElement(Lc,{color:"foreground"},a+1)),r.createElement(_e,{flexDirection:"column",gap:"1rem",align:"stretch"},r.createElement(Rc,null,r.createElement(Rn.Item,{name:`schemaColumns.${a}.name`},r.createElement(Rn.Input,Pc({placeholder:"Name",disabled:t,defaultValue:n.name,onChange:e=>d(e.target.value),name:`schemaColumns.${a}.name`,autoComplete:"off",required:!0},s===a&&{autoFocus:!0}))),r.createElement(Rn.Item,{name:`schemaColumns.${a}.type`},r.createElement(Rn.Select,{defaultValue:"import"===e?n.type:"VARCHAR",name:`schemaColumns.${a}.type`,options:Ac.filter((t=>""!==t.value||"add"!==e))}))),"TIMESTAMP"===n.type&&r.createElement(_e,{flexDirection:"column",gap:"1rem"},r.createElement(Bc,null,"import"===e&&r.createElement(Rn.Item,{name:`schemaColumns.${a}.pattern`},r.createElement(Rn.Input,{name:`schemaColumns.${a}.pattern`,placeholder:"Pattern",defaultValue:""!==n.pattern?n.pattern:Oc,required:!0})),r.createElement(Ye,{icon:r.createElement(Jt.z,{disabled:""===c,skin:""!==l&&""!==n.name&&l===n.name?"success":"secondary",onClick:()=>o(n.name),type:"button",prefixIcon:r.createElement("input",{type:"checkbox",checked:""!==l&&""!==n.name&&l===n.name,onChange:()=>{}})},"Designated"),tooltip:"Mark this column as a designated timestamp",placement:"top"})),"import"===e&&r.createElement(Pe,{color:"gray2"},"Example: ",Oc,r.createElement("br",null),r.createElement(Ic,{url:"https://questdb.io/docs/reference/function/date-time/#timestamp-format",text:"Timestamp format docs",tooltipText:"Timestamp format documentation"}))),"GEOHASH"===n.type&&r.createElement(Rc,null,r.createElement(Rn.Item,{name:`schemaColumns.${a}.precision`},r.createElement(Rn.Input,{name:`schemaColumns.${a}.precision`,placeholder:"Precision",required:!0})),r.createElement(Ic,{url:"https://questdb.io/docs/concept/geohashes/#specifying-geohash-precision",text:"Docs",tooltipText:"GEOHASH type documentation"})))):null},qc=(0,s.ZP)(_e).attrs({align:"center",gap:"1.5rem"}).withConfig({displayName:"columns__Disclaimer"})(["\n  width: 100%;\n  padding: 2rem;\n  color: ",";\n"],(({theme:e,isEditLocked:t})=>e.color[t?"orange":"foreground"])),Fc=s.ZP.div.withConfig({displayName:"columns__SchemaRoot"})(["\n  width: 100%;\n  height: 100%;\n"]),Zc=(0,s.ZP)(Ze.GroupItem).attrs({direction:"column"}).withConfig({displayName:"columns__Error"})(["\n  align-items: center;\n"]),Uc=({action:e,isEditLocked:t,onColumnFocus:n,lastFocusedIndex:a})=>{const{formState:o,getValues:i,setValue:l,watch:s}=(0,cn.Gc)(),c=s("timestamp"),d=i().schemaColumns,u=(0,r.useCallback)((o=>{const i=s(`schemaColumns.${o}`);return r.createElement(r.Fragment,null,r.createElement(zc,{action:e,column:i,disabled:t,index:o,lastFocusedIndex:a,onFocus:n,onSetTimestamp:e=>{l("timestamp",c===e?"":e)},timestamp:c}))}),[c,d.length,d.map((e=>e.type)).join(",")]),m=o.errors.schemaColumns;return r.createElement(r.Fragment,null,"import"===e&&!t&&r.createElement(qc,{isEditLocked:!1},r.createElement(Lt.d,{size:"20px"}),r.createElement(Pe,{color:"foreground"},"Column names have to match the CSV header.",r.createElement("br",null),"Order is not important.")),m&&(Array.isArray(m)?m:[m]).map(((e,t)=>r.createElement(Zc,{key:t},r.createElement(Pe,{color:"red"},e.message)))),r.createElement(Fc,null,d.length>0&&r.createElement(Ot,{itemContent:u,totalCount:d.length,followOutput:!0})),r.createElement(Rn.Input,{name:"timestamp",hidden:!0}))};var jc=n(98501),Hc=n(72506),Gc=n(69968);const Vc=({action:e,ctaText:t,lastFocusedIndex:n,onAdded:a,isEditLocked:o})=>{const i={name:"",type:"import"===e?"":"VARCHAR",pattern:"",precision:""},{insert:l}=(0,cn.Dq)({name:"schemaColumns"}),{getValues:s,setValue:c}=(0,cn.Gc)(),d=s().schemaColumns;return r.createElement(_e,{gap:"1rem"},!o&&r.createElement(r.Fragment,null,r.createElement(st,{trigger:r.createElement(Jt.z,{disabled:0===d.length||void 0===n,skin:"secondary",type:"button",onClick:()=>{c("schemaColumns",d.filter(((e,t)=>t!==n))),a(void 0)}},r.createElement(jc.X,{size:"18px"})),placement:"bottom"},r.createElement(St,null,void 0!==n&&`Remove column ${n+1}`)),r.createElement(st,{trigger:r.createElement(Jt.z,{disabled:0===d.length||void 0===n,skin:"secondary",type:"button",onClick:()=>{const e=void 0!==n?n:d.length;l(e,i),a(e)}},r.createElement(Hc.v,{size:"20px"})),placement:"bottom"},r.createElement(St,null,void 0!==n?`Insert column above ${n+1}`:"Insert column")),r.createElement(st,{trigger:r.createElement(Jt.z,{skin:"secondary",type:"button",onClick:()=>{const e=void 0!==n?n+1:d.length;l(e,i),a(e)}},r.createElement(Gc.D,{size:"20px"})),placement:"bottom"},r.createElement(St,null,void 0!==n?`Insert column below ${n+1}`:"Insert column"))),r.createElement(Rn.Submit,{prefixIcon:r.createElement(Bt.i,{size:18}),variant:"success"},t))},Wc=(0,s.ZP)(Ze.ContentWrapper).withConfig({displayName:"dialog__StyledContentWrapper"})(["\n  --columns: auto 120px; /* magic numbers to fit input, type dropdown and remove button nicely */\n"]),$c=(0,s.ZP)(_e).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"dialog__Items"})(["\n  height: 100%;\n"]),Qc=(0,s.ZP)(_e).attrs({gap:"0",flexDirection:"column"}).withConfig({displayName:"dialog__Inputs"})(["\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n"]),Yc=s.ZP.div.withConfig({displayName:"dialog__Controls"})(["\n  display: grid;\n  grid-template-columns: ",";\n  gap: 1rem;\n  align-items: flex-start;\n  width: 100%;\n"],(({action:e})=>"add"===e?"auto 120px 120px":"1fr")),Kc=["NONE","HOUR","DAY","MONTH","YEAR"],Xc=({action:e,name:t,schema:n,partitionBy:a,timestamp:i,open:l,isEditLocked:s,hasWalSetting:c,walEnabled:d,onOpenChange:u,onSchemaChange:m,trigger:g,tables:p,ctaText:f})=>{const h={name:t,schemaColumns:n,partitionBy:a,timestamp:i,walEnabled:c?"false":void 0},[b,E]=(0,r.useState)(h),[y,w]=(0,r.useState)(h),[v,C]=(0,r.useState)(),x=(0,o.I0)(),_=()=>{E({name:t,schemaColumns:n,partitionBy:a,timestamp:i,walEnabled:c&&void 0!==d?d.toString():void 0})},k=Hn().object({name:Hn().string().required().custom(((t,n)=>xc(t)?"add"===e&&p?.find((e=>e.table_name.toLowerCase()===t.toLowerCase()))?n.error("string.uniqueTableName"):t:n.error("string.validTableName"))).messages({"string.empty":"Please enter a name","string.validTableName":"Invalid table name","string.uniqueTableName":"Table name must be unique"}),partitionBy:Hn().string().required().custom(((e,t)=>"NONE"!==e&&""===y.timestamp?t.error("string.timestampRequired"):e)).messages({"string.timestampRequired":"Designated timestamp is required when partitioning is set to anything other than NONE"}),walEnabled:Hn().any().allow("true","false").empty(),timestamp:Hn().string().allow(""),schemaColumns:Hn().array().custom(((t,n)=>"add"===e&&0===t.length?n.error("array.required"):t)).unique(((e,t)=>e.name===t.name)).messages({"array.required":"Please add at least one column","array.unique":"Column names must be unique"})});(0,r.useEffect)((()=>{n&&_()}),[n]),(0,r.useEffect)((()=>{l&&C(void 0)}),[l]);const S=b.schemaColumns.length;return r.createElement(Ze,{mode:"add"===e?"side":"modal",open:l,trigger:g??r.createElement(Jt.z,{skin:S>0?"transparent":"secondary",prefixIcon:S>0?r.createElement(Cc.I,{size:"18px"}):r.createElement(Bt.i,{size:"18px"}),onClick:()=>u(t)},S>0?`${S} col${S>1?"s":""}`:"Add"),onDismiss:()=>{_(),u(void 0)},onOpenChange:t=>{t&&"add"===e&&x(Or.setActiveSidebar(t?"create":void 0))}},r.createElement(Wc,{mode:"add"===e?"side":"modal","data-hook":"create-table-panel"},r.createElement(Rn,{name:"table-schema",defaultValues:b,onSubmit:e=>{m(e),u(void 0)},onChange:e=>w(e),validationSchema:k},r.createElement(De.Header,{title:""!==t?`Table schema for ${t}`:"Create table",afterTitle:r.createElement(Vc,{ctaText:f,action:e,isEditLocked:s,lastFocusedIndex:v,onAdded:C})}),r.createElement($c,null,r.createElement(Qc,null,r.createElement(Ze.GroupItem,{direction:"column"},r.createElement(Yc,{action:e},"add"===e&&r.createElement(Rn.Item,{name:"name",label:"Table name"},r.createElement(Rn.Input,{name:"name",autoComplete:"off",autoFocus:!0})),r.createElement(_e,{align:"flex-end"},r.createElement(Rn.Item,{name:"partitionBy",label:r.createElement(st,{trigger:r.createElement(_e,{align:"center",justifyContent:"center",gap:"0.5rem"},r.createElement(Nc.Z,{size:"14"}),r.createElement("span",null,"Partition by")),placement:"bottom"},r.createElement(St,null,"Splits data into smaller chunks by intervals of time in order to improve the performance and scalability of the database system."))},r.createElement(Rn.Select,{name:"partitionBy",options:Kc.map((e=>({label:e,value:e})))}))),c&&r.createElement(_e,{align:"flex-end"},r.createElement(Rn.Item,{name:"walEnabled",label:r.createElement(st,{trigger:r.createElement(_e,{align:"center",justifyContent:"center",gap:"0.5rem"},r.createElement(Nc.Z,{size:"14"}),r.createElement("span",null,"WAL")),placement:"bottom"},r.createElement(St,null,"WAL (Write-Ahead Log) allows concurrent data ingestion and modifications via multiple interfaces as well as table schema changes.","NONE"===y.partitionBy&&r.createElement(r.Fragment,null,r.createElement("br",null),r.createElement("br",null),"To enable WAL, set `Partition by` to a value other than NONE.")))},r.createElement(Rn.Select,{name:"walEnabled",disabled:"NONE"===y.partitionBy,options:[{label:"Enabled",value:"true"},{label:"Disabled",value:"false"}]}))),"import"===e&&r.createElement(Pe,{color:"gray2"},"If you're changing the partitioning strategy, you'll need to set `Write mode` to `Overwrite` in Settings."))),r.createElement(Ze.GroupHeader,null,r.createElement(Pe,{color:"foreground"},"Columns")),r.createElement(Uc,{action:e,isEditLocked:s,onColumnFocus:C,lastFocusedIndex:v}))))))};var Jc=n(82589);const ed=(0,s.ZP)(Jc.o).withConfig({displayName:"upload-result-dialog__SearchIcon"})(["\n  color: ",";\n"],(({theme:e})=>e.color.foreground)),td=(0,s.ZP)(tc.i).withConfig({displayName:"upload-result-dialog__StyledTable"})(["\n  width: 100%;\n  table-layout: fixed;\n  border-collapse: separate;\n  border-spacing: 0 2rem;\n  padding: 0 2rem;\n\n  th {\n    padding: 0 1.5rem;\n    color: ",";\n  }\n\n  td {\n    padding: 1.5rem;\n  }\n\n  tbody td {\n    background: #242531;\n\n    &:first-child {\n      border-top-left-radius: ",";\n      border-bottom-left-radius: ",";\n    }\n\n    &:last-child {\n      border-top-right-radius: ",";\n      border-bottom-right-radius: ",";\n    }\n  }\n"],(({theme:e})=>e.color.foreground),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius)),nd=(0,s.ZP)(_e).attrs({justifyContent:"space-between",gap:"2rem"}).withConfig({displayName:"upload-result-dialog__Stat"})(["\n  width: 100%;\n"]),rd=(0,s.ZP)(Jt.z).withConfig({displayName:"upload-result-dialog__DetailsButton"})(["\n  position: relative;\n"]),ad=s.ZP.span.withConfig({displayName:"upload-result-dialog__NotificationCircle"})(["\n  position: absolute;\n  right: -0.4rem;\n  top: -0.4rem;\n  width: 0.8rem;\n  height: 0.8rem;\n  border-radius: 50%;\n  background-color: ",";\n"],(({theme:e})=>e.color.red)),od=({file:e})=>{const t=e.table_name??e.fileObject.name,n=[{label:"Header forced",value:e.uploadResult?.header.toString()},{label:"Table name",value:e.uploadResult?.location},{label:"Imported rows",value:e.uploadResult?.rowsImported.toLocaleString()},{label:"Rejected rows",value:e.uploadResult?.rowsRejected.toLocaleString()}],a=e.uploadResult?.columns.reduce(((e,t)=>e+t.errors),0)??0;return r.createElement(Ze,{title:r.createElement(_e,null,r.createElement(ed,{size:20}),r.createElement(Pe,{color:"foreground"},"Import details for ",t)),trigger:r.createElement(rd,{skin:"success",prefixIcon:r.createElement(Jc.o,{size:"14px"})},a>0&&r.createElement(ad,null),"Details"),withCloseButton:!0},r.createElement(_e,{flexDirection:"column",gap:"0"},n.map((e=>r.createElement(Ze.GroupItem,{key:e.label,direction:"column"},r.createElement(nd,null,r.createElement(Pe,{color:"gray2"},e.label),r.createElement(Pe,{color:"foreground"},e.value))))),r.createElement(Ze.GroupHeader,null,r.createElement(Pe,{color:"foreground"},"Table schema")),r.createElement(td,{columns:[{header:"Name",render:({data:e})=>r.createElement(Pe,{color:"foreground"},e.name)},{header:"Type",align:"flex-end",render:({data:e})=>r.createElement(Pe,{color:"foreground"},e.type)},{header:"Size",width:"100px",align:"flex-end",render:({data:e})=>r.createElement(Pe,{color:"foreground"},e.size.toLocaleString())},{header:"Errors",width:"100px",align:"flex-end",render:({data:e})=>r.createElement(Pe,{color:e.errors>0?"red":"foreground"},e.errors.toLocaleString())}],rows:e.uploadResult?.columns??[]})))},id=(0,s.ZP)(_e).attrs({flexDirection:"column"}).withConfig({displayName:"dropbox__Root"})(["\n  flex: 1;\n  width: 100%;\n  padding: 4rem 0 0;\n  gap: 2rem;\n  background: ",";\n  border: 3px dashed ",";\n  box-shadow: inset 0 0 10px 0 #1b1c23;\n  transition: all 0.15s ease-in-out;\n"],(({theme:e})=>e.color.backgroundLighter),(({isDragging:e})=>e?"#7f839b":"#333543")),ld=({files:e,onFilesDropped:t,dialogOpen:n,render:a})=>{const[o,i]=(0,r.useState)(!1),[l,s]=(0,r.useState)([]),c=(0,r.useRef)(null),d=(0,r.useRef)(e.map((e=>e.table_name))),u=e=>{e.preventDefault(),e.stopPropagation(),i("dragenter"===e.type||"dragover"===e.type)},m=e=>{const n=((e,t)=>Array.from(e).filter((e=>t.includes(e.name))))(e,d.current);s(n),t(Array.from(e).filter((e=>!n.includes(e)))),c.current?.setAttribute("value","")},g=e=>{const t=e,n=t.clipboardData?.files;n&&m(n)};return(0,r.useEffect)((()=>()=>{window.removeEventListener("paste",g)}),[]),(0,r.useEffect)((()=>{n?window.removeEventListener("paste",g):window.addEventListener("paste",g)}),[n]),(0,r.useEffect)((()=>{d.current=e.map((e=>e.table_name))}),[e]),r.createElement(id,{onDragEnter:u,onDragOver:u,onDragLeave:u,onDrop:e=>{e.preventDefault(),e.stopPropagation(),i(!1),m(e.dataTransfer.files)},isDragging:o,"data-hook":"import-dropbox"},a({duplicates:l,addToQueue:m}))},sd=(0,s.ZP)(_e).attrs({flexDirection:"column",gap:"2rem"}).withConfig({displayName:"files-to-upload__Root"})(["\n  padding: 2rem;\n"]),cd=(0,s.ZP)(tc.i).withConfig({displayName:"files-to-upload__StyledTable"})(["\n  width: 100%;\n  table-layout: fixed;\n  border-collapse: separate;\n  border-spacing: 0 2rem;\n\n  th {\n    padding: 0 1.5rem;\n  }\n\n  td {\n    padding: 1.5rem;\n  }\n\n  tbody td {\n    background: #242531;\n\n    &:first-child {\n      border-top-left-radius: ",";\n      border-bottom-left-radius: ",";\n    }\n\n    &:last-child {\n      border-top-right-radius: ",";\n      border-bottom-right-radius: ",";\n    }\n  }\n"],(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius),(({theme:e})=>e.borderRadius)),dd=(0,s.ZP)(_e).attrs({justifyContent:"center"}).withConfig({displayName:"files-to-upload__EmptyState"})(["\n  width: 100%;\n  background: #242531;\n  border-radius: ",";\n  padding: 1rem;\n"],(({theme:e})=>e.borderRadius)),ud=(0,s.ZP)(_e).withConfig({displayName:"files-to-upload__FileTextBox"})(["\n  padding: 0 1.1rem;\n"]),md=s.ZP.span.withConfig({displayName:"files-to-upload__BrowseTextLink"})(["\n  text-decoration: underline;\n  cursor: pointer;\n\n  &:hover {\n    text-decoration: none;\n  }\n"]),gd=({files:e,onDialogToggle:t,onFileRemove:n,onFilePropertyChange:a,onFileUpload:o,onFilesDropped:i,onViewData:l,dialogOpen:s})=>{const c=(0,r.useRef)(null),[d,u]=r.useState(),[m,g]=r.useState();return(0,r.useEffect)((()=>{t(void 0!==d||void 0!==m)}),[d,m]),r.createElement(ld,{files:e,onFilesDropped:i,dialogOpen:s,render:({duplicates:t,addToQueue:i})=>r.createElement(sd,null,r.createElement(Us.X,{level:3},"Upload queue"),r.createElement("input",{type:"file",id:"file",onChange:e=>{null!==e.target.files&&i(e.target.files)},multiple:!0,ref:c,style:{display:"none"},value:""}),r.createElement(Pe,{color:"foreground"},"You can drag and drop more files or"," ",r.createElement(md,{onClick:()=>{c.current?.click()}},"browse from disk")),t.length>0&&r.createElement(Pe,{color:"red"},"File",t.length>1?"s":""," already added to queue:"," ",t.map((e=>e.name)).join(", "),". Change target table name and try again."),r.createElement(cd,{columns:[{header:"File",align:"flex-start",...e.length>0&&{width:"400px"},render:({data:e})=>{const t=r.createElement(ud,{align:"center",gap:"1rem"},r.createElement(Pe,{color:"foreground"},P(e.fileObject.name,20)),r.createElement(Pe,{color:"gray2",size:"sm"},rc(e.fileObject.size)));return r.createElement(_e,{align:"center",gap:"1rem"},r.createElement(sc.M,{size:"46px"}),r.createElement(_e,{gap:"1rem",align:"flex-4tart",flexDirection:"column"},e.fileObject.name.length>20&&r.createElement(st,{placement:"top",trigger:t},r.createElement(St,null,e.fileObject.name)),e.fileObject.name.length<=20&&t,r.createElement(_e,{gap:"1rem",align:"center"},r.createElement(lc,{file:e}),!e.isUploading&&void 0!==e.uploadResult&&r.createElement(r.Fragment,null,r.createElement(od,{file:e}),r.createElement(Jt.z,{skin:"secondary",prefixIcon:r.createElement(Xs.r,{size:"18px"}),onClick:()=>l(e.uploadResult)},"Result"))),e.uploadResult&&e.uploadResult.rowsRejected>0||e.error&&r.createElement(ud,{flexDirection:"column",gap:"1rem",align:"flex-start"},e.uploadResult&&e.uploadResult.rowsRejected>0&&r.createElement(Pe,{color:"orange",size:"sm"},e.uploadResult.rowsRejected.toLocaleString()," ","row",e.uploadResult.rowsRejected>1?"s":""," ","rejected"),e.error&&r.createElement(Pe,{color:"red",size:"sm"},e.error))))}},{header:"Table name",align:"flex-end",width:"200px",render:({data:e})=>r.createElement(Tc,{open:d===e.id,onOpenChange:e=>u(e?.id),onNameChange:t=>{a(e.id,{table_name:t})},file:e})},{header:r.createElement(st,{placement:"top",trigger:r.createElement(_e,{align:"center",gap:"0.5rem"},"Schema",r.createElement(Lt.d,{size:"16px"}))},r.createElement(St,null,"Optional. By default, QuestDB will infer schema from the CSV file structure")),align:"center",width:"150px",render:({data:e})=>{const t=e.table_name??e.fileObject.name;return r.createElement(Xc,{action:"import",open:m===e.id,onOpenChange:t=>g(t?e.id:void 0),onSchemaChange:t=>{a(e.id,{schema:t.schemaColumns,partitionBy:t.partitionBy,timestamp:t.timestamp})},name:t,schema:e.schema,partitionBy:e.partitionBy,timestamp:e.timestamp,isEditLocked:e.exists&&e.table_name===e.fileObject.name,hasWalSetting:!1,ctaText:"Save"})}},{header:r.createElement(st,{placement:"top",trigger:r.createElement(_e,{align:"center",gap:"0.5rem"},"Write mode",r.createElement(Lt.d,{size:"16px"}))},r.createElement(St,null,r.createElement("strong",null,"Append"),": data will be appended to the set.",r.createElement("br",null),r.createElement("strong",null,"Overwrite"),": any existing data or structure will be overwritten. Required for partitioning and timestamp related changes.")),align:"center",width:"150px",render:({data:e})=>r.createElement(_n.P,{name:"overwrite",defaultValue:e.settings.overwrite?"true":"false",onChange:t=>a(e.id,{settings:{...e.settings,overwrite:"true"===t.target.value}}),options:[{label:"Append",value:"false"},{label:"Overwrite",value:"true"}]})},{align:"flex-end",width:"300px",render:({data:e})=>r.createElement(vc,{file:e,onUpload:o,onRemove:n,onSettingsChange:t=>{a(e.id,{settings:t})}})}],rows:e}),0===e.length&&r.createElement(dd,null,r.createElement(Pe,{color:"gray2",align:"center"},"No files in queue")))})},pd=e=>e.startsWith("GEOHASH"),fd=e=>{const t=/\(([^)]+)\)/g.exec(e);return t&&t.length>1?t[1]:""},hd=e=>pd(e)?"GEOHASH":e.toUpperCase(),bd=e=>"GEOHASH"===e.type?{...e,type:`GEOHASH(${e.precision})`}:e,Ed=()=>("00000000000000000"+(0x10000000000000000*Math.random()).toString(16)).slice(-16),yd=()=>{const e=Ed(),t=Ed();return e.slice(0,8)+"-"+e.slice(8,12)+"-4"+e.slice(13)+"-a"+t.slice(1,4)+"-"+t.slice(4)};var wd=n(23167);const vd=(0,s.ZP)(_e).attrs({flexDirection:"column",gap:"2rem"}).withConfig({displayName:"upload__Actions"})(["\n  margin: auto;\n"]),Cd=s.ZP.div.withConfig({displayName:"upload__Info"})(["\n  margin-top: 1rem;\n  padding: 2rem;\n  background: ",";\n  border-radius: ",";\n  text-align: center;\n"],(({theme:e})=>e.color.backgroundDarker),(({theme:e})=>e.borderRadius)),xd=(0,s.ZP)(ar.x).withConfig({displayName:"upload__InfoText"})(["\n  line-height: 1.75;\n  color: #8b8fa7;\n\n  a {\n    color: ",";\n  }\n"],(({theme:e})=>e.color.foreground)),_d=()=>r.createElement("a",{href:"https://questdb.io/docs/guides/import-csv/#import-csv-via-copy-sql",target:"_blank",rel:"noopener noreferrer"},"here"),kd=({files:e,onFilesDropped:t,dialogOpen:n})=>{const{quest:a}=(0,r.useContext)(ra),[o,i]=(0,r.useState)(!1),l=(0,r.useRef)(null);return(0,r.useEffect)((()=>{(async()=>{try{const e=await a.query("(show parameters) where property_path ilike 'cairo.sql.copy.root'");"dql"===e.type&&e.count>0&&i(null!==e.data[0].value&&"null"!==e.data[0].value)}catch(e){return}})()}),[]),r.createElement(ld,{files:e,onFilesDropped:t,dialogOpen:n,render:({duplicates:e,addToQueue:t})=>r.createElement(r.Fragment,null,r.createElement(vd,null,r.createElement("img",{alt:"File upload icon",width:"60",height:"80",src:"assets/upload.svg"}),r.createElement(Us.X,{level:3},"Drag CSV files here or paste from clipboard"),r.createElement("input",{type:"file",id:"file",onChange:e=>{null!==e.target.files&&t(e.target.files)},multiple:!0,ref:l,style:{display:"none"},value:""}),r.createElement(Jt.z,{onClick:()=>{l.current?.click()},prefixIcon:r.createElement(wd.L,{size:"18px"}),skin:"secondary"},"Browse from disk"),e.length>0&&r.createElement(ar.x,{color:"red"},"File",e.length>1?"s":""," already added to queue:"," ",e.map((e=>e.name)).join(", "),". Change target table name and try again."),r.createElement(Cd,null,o?r.createElement(xd,null,"Suitable for small batches of CSV file upload.",r.createElement("br",null),"For database migrations, we recommend the ",r.createElement(_d,null)," ","command."):r.createElement(xd,null,"Note: COPY SQL is not available for CSV Import on this database. Refer ",r.createElement(_d,null)," to enable it."))))})},Sd=(0,s.ZP)(_e).attrs({gap:"4rem",flexDirection:"column"}).withConfig({displayName:"ImportCSVFiles__Root"})(["\n  flex: 1;\n"]),Td=({onViewData:e,onUpload:t})=>{const{quest:n}=(0,r.useContext)(ra),[a,i]=(0,r.useState)([]),[l,s]=(0,r.useState)(!1),c=(0,o.v9)(ea.query.getTables),d=(0,r.useRef)(null),u=(e=>{const[t,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const t=new IntersectionObserver((([e])=>n(e.isIntersecting)));return e.current&&t.observe(e.current),()=>{t.disconnect()}}),[e]),t})(d),[m,g]=(0,r.useState)("upload"),p=(e,t)=>{i((n=>n.map((n=>n.id===e?{...n,...t}:n))))},f=(e,t)=>{p(e.id,{isUploading:t})},h=async e=>{const t=await(async e=>await Promise.all(e.map((async e=>{const t=await n.checkCSVFile(e.name),r=t.status===R.EXISTS?await(async()=>{const t=await n.showColumns(e.name);return t&&t.type===N.DQL?t.data.map((e=>({name:e.column,type:hd(e.type),pattern:mc,precision:pd(e.type)?fd(e.type):""}))):[]})():[],a=t.status===R.EXISTS&&c?await(async()=>{const t=c.find((t=>t.table_name===e.name));return t?.partitionBy??"NONE"})():"NONE",o=t.status===R.EXISTS&&c?await(async()=>{const t=c.find((t=>t.table_name===e.name));return t?.designatedTimestamp??""})():"";return{id:yd(),fileObject:e,table_name:e.name,status:t.status,exists:t.status===R.EXISTS,schema:r,partitionBy:a,timestamp:o,settings:{forceHeader:!1,overwrite:!1,skipLev:!1,delimiter:"",atomicity:"skipCol",maxUncommitedRows:gc},isUploading:!1,uploaded:!1,uploadResult:void 0,uploadProgress:0}}))))(e);i((e=>[...e,...t])),g("list")};return(0,r.useEffect)((()=>{u&&(async()=>{const e=await Promise.all(a.map((async e=>{const t=await n.checkCSVFile(e.table_name);return{...e,status:t.status}})));i(e)})()}),[u]),r.createElement(Sd,{ref:d},"upload"===m&&r.createElement(kd,{files:a,onFilesDropped:h,dialogOpen:l}),"list"===m&&r.createElement(gd,{dialogOpen:l,files:a,onViewData:e,onFilesDropped:h,onDialogToggle:s,onFileUpload:async e=>{const r=a.find((t=>t.id===e));if(!r.isUploading){f(r,!0);try{const e=await n.uploadCSVFile({file:r.fileObject,name:r.table_name,settings:r.settings,schema:r.schema.map(bd),partitionBy:r.partitionBy,timestamp:r.timestamp,onProgress:e=>{p(r.id,{uploadProgress:e})}});p(r.id,{uploaded:"OK"===e.status,uploadResult:"OK"===e.status?e:void 0,schema:"OK"===e.status?e.columns.map((e=>{const t=r.schema.find((t=>t.name===e.name));return{...B(e,["name"]),type:hd(e.type),pattern:"TIMESTAMP"===e.type?t?.pattern?t?.pattern:mc:"",precision:pd(e.type)?fd(e.type):void 0}})):r.schema,error:"OK"===e.status?void 0:e.status}),f(r,!1),t(e)}catch(e){f(r,!1),p(r.id,{uploaded:!1,uploadResult:void 0,uploadProgress:0,error:"Upload error"})}}},onFileRemove:e=>{const t=a.find((t=>t.id===e));i(a.filter((e=>e.fileObject.name!==t.fileObject.name)))},onFilePropertyChange:async(e,t)=>{const r=await Promise.all(a.map((async r=>{if(r.id===e){const e=t.table_name?await n.checkCSVFile(t.table_name):await Promise.resolve({status:r.status});return{...r,...t,status:e.status,error:t.table_name?void 0:r.error}}return r})));i(r)}}))},Nd=()=>r.createElement(ot,null,r.createElement(at,null,r.createElement(Td,{onUpload:e=>{k.publish(S.MSG_QUERY_SCHEMA)},onViewData:e=>{"OK"===e.status&&(k.publish(S.MSG_QUERY_SCHEMA),k.publish(S.MSG_QUERY_FIND_N_EXEC,{query:`"${e.location}"`,options:{appendAt:"end"}}))}})));var Od=n(9077);const Rd=({size:e})=>r.createElement("svg",{width:e,height:e,viewBox:"0 0 26 26",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M25 22.3704H1V24.1481H25V22.3704Z",fill:"currentColor"}),r.createElement("path",{d:"M1 19.2593V21.037H25V19.7037L21.8889 13.4815H16.1111V16.5926H9.88889V13.4815H4.11111L1 19.2593Z",fill:"currentColor"}),r.createElement("path",{d:"M13 1.92593L6.33337 8.59259H11.2223V14.8148H14.3334V8.59259H19.6667L13 1.92593Z",fill:"currentColor"}));function Id(){return Id=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Id.apply(this,arguments)}const Pd=s.ZP.div.withConfig({displayName:"Console__Root"})(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  max-height: 100%;\n"]),Ad=s.ZP.div.withConfig({displayName:"Console__Top"})(["\n  display: flex;\n  height: 100%;\n  flex: 1;\n  position: relative;\n  overflow: hidden;\n"]),Ld=s.ZP.div.withConfig({displayName:"Console__Bottom"})(["\n  display: flex;\n  height: 100%;\n  flex: 1;\n  min-height: 0px;\n"]),Dd=s.ZP.div.withConfig({displayName:"Console__Tab"})(["\n  display: flex;\n  width: calc(100% - 4.5rem);\n  height: 100%;\n  overflow: auto;\n"]),Md=[{icon:r.createElement(Xs.r,{size:b}),mode:"grid",tooltipText:"Grid"},{icon:r.createElement(Js.u,{size:b}),mode:"chart",tooltipText:"Chart"}],Bd=()=>{const e=(0,o.I0)(),{sm:t}=$e(),{editorSplitterBasis:n,resultsSplitterBasis:a,updateSettings:i}=Ts(),[l,s]=(0,r.useState)(0!==n?n:300),c=(0,o.v9)(ea.query.getResult),d=(0,o.v9)(ea.console.getActiveBottomPanel),{consoleConfig:u}=gr(),[m,g]=(0,r.useState)("grid"),p=r.useRef(null),f=r.useRef(null),h=r.useRef(null),E=r.useRef(null);return(0,r.useEffect)((()=>{p.current&&c?e(Or.setActiveBottomPanel("result")):f.current&&e(Or.setActiveBottomPanel("zeroState"))}),[c]),(0,r.useEffect)((()=>{var e;e=d,p.current&&(p.current.style.display="result"===e?"flex":"none"),f.current&&(f.current.style.display="zeroState"===e?"flex":"none"),h.current&&(h.current.style.display="import"===e?"flex":"none")}),[d]),r.createElement(Pd,null,r.createElement(Od.oL,{vertical:!0,onDragEnd:e=>{i(T.RESULTS_SPLITTER_BASIS,e[0])}},r.createElement(Od.oL.Pane,{minSize:100,preferredSize:a},r.createElement(Ad,null,r.createElement(Ys,{align:"top"},!t&&r.createElement(st,{placement:"bottom",trigger:r.createElement(Ks,{"data-hook":"tables-panel-button",direction:"left",onClick:()=>{e(Or.setActiveTopPanel(0===n?"tables":void 0)),i(T.EDITOR_SPLITTER_BASIS,0===n?l:0)},selected:0!==n},r.createElement(ec.L,{size:b}))},r.createElement(St,null,0===a?"Show":"Hide"," tables"))),r.createElement(Od.oL,{ref:E,onDragEnd:e=>{0!==e[0]&&s(e[0]),i(T.EDITOR_SPLITTER_BASIS,e[0])},snap:!0},r.createElement(Od.oL.Pane,{preferredSize:n,visible:0!==n&&!t,minSize:250},r.createElement(Zs,null)),r.createElement(Od.oL.Pane,null,r.createElement(kl,null))))),r.createElement(Od.oL.Pane,{minSize:100},r.createElement(Ld,null,r.createElement(Ys,{align:"bottom"},c&&Md.map((({icon:t,mode:n,tooltipText:a})=>r.createElement(st,{key:n,placement:"right",trigger:r.createElement(Ks,{"data-hook":`${n}-panel-button`,direction:"left",onClick:()=>{e(Or.setActiveBottomPanel("result")),g(n)},selected:"result"===d&&m===n},t)},r.createElement(St,null,a)))),r.createElement(st,{placement:"right",trigger:r.createElement(vt,Id({readOnly:u.readOnly},!u.readOnly&&{onClick:()=>{e(Or.setActiveBottomPanel("import"))}},{selected:"import"===d,"data-hook":"import-panel-button"}),r.createElement(Rd,{size:b}))},r.createElement(St,null,u.readOnly?"To use this feature, turn off read-only mode in the configuration file":"Import files from CSV"))),r.createElement(Dd,{ref:p},c&&r.createElement(Ql,{viewMode:m})),r.createElement(Dd,{ref:f},r.createElement(Qs,null)),r.createElement(Dd,{ref:h},r.createElement(Nd,null))))))},zd=s.ZP.div.withConfig({displayName:"SideMenu__Backdrop"})(["\n  position: fixed;\n  top: 4rem;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: rgba(0, 0, 0, 0.3);\n  z-index: 24;\n\n  &:hover {\n    cursor: pointer;\n  }\n"]),qd=s.ZP.div.withConfig({displayName:"SideMenu__Wrapper"})(["\n  position: fixed;\n  top: 4rem;\n  right: 0;\n  bottom: 0;\n  width: ","px;\n  background: ",";\n  border-left: 1px solid ",";\n  z-index: 25;\n\n  &.side-menu-slide-enter {\n    width: 0;\n  }\n\n  &.side-menu-slide-enter-active {\n    width: ","px;\n    transition: width ","ms;\n  }\n\n  &.side-menu-slide-exit {\n    width: ","px;\n  }\n\n  &.side-menu-slide-exit-active {\n    width: 0;\n    transition: width ","ms;\n  }\n"],280,A("backgroundDarker"),A("black"),280,Q.REG,280,Q.REG),Fd=()=>{const e=(0,o.v9)(ea.console.getSideMenuOpened),t=(0,o.I0)(),n=(0,r.useCallback)((()=>{t(Or.toggleSideMenu())}),[t]);return r.createElement(r.Fragment,null,r.createElement(lt.Z,{classNames:"fade-reg",in:e,timeout:Q.REG,unmountOnExit:!0},r.createElement(zd,{onClick:n})),r.createElement(lt.Z,{classNames:"side-menu-slide",in:e,timeout:Q.REG,unmountOnExit:!0},r.createElement(qd,null,r.createElement(Zs,null))))};var Zd=n(70775),Ud=n(79038),jd=n(60782),Hd=n(23737),Gd=n(44752),Vd=n(78613),Wd=n(4888);const $d=(0,s.iv)(["\n  background: ",";\n"],A("selection")),Qd=s.ZP.div.withConfig({displayName:"Row__Wrapper"})(["\n  display: flex;\n  height: 2.4rem;\n  padding: 0 0.6rem;\n  line-height: 2.4rem;\n  align-items: center;\n  transition: background ","ms;\n  cursor: pointer;\n  user-select: none;\n\n  ",";\n\n  > span:not(:last-child) {\n    margin-right: 0.6rem;\n  }\n"],Q.FAST,(({active:e})=>e&&$d)),Yd=(0,s.ZP)(Pe).withConfig({displayName:"Row__Value"})(["\n  flex: 1 1 auto;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  opacity: 0.7;\n"]),Kd=(0,s.ZP)(Wd.E).withConfig({displayName:"Row__FileIcon"})(["\n  height: 2.2rem;\n  flex: 0 0 12px;\n  margin: 0 0.6rem;\n  color: ",";\n"],A("orange")),Xd=(0,s.ZP)(Pe).withConfig({displayName:"Row__Name"})(["\n  flex: 0 0 auto;\n"]),Jd=({active:e,onMouseEnter:t,onMouseLeave:n,onClick:a,query:o})=>r.createElement(Qd,{active:e,onClick:a,onMouseEnter:t,onMouseLeave:n},r.createElement(Kd,{size:"12px"}),o.name&&r.createElement(Xd,{color:"foreground",size:"sm"},o.name),r.createElement(Yd,{color:"foreground",size:"sm"},o.value));function eu(){return eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eu.apply(this,arguments)}const tu=s.ZP.div.withConfig({displayName:"QueryPicker__Wrapper"})(["\n  display: flex;\n  max-height: 650px;\n  width: 600px;\n  max-width: 100vw;\n  padding: 0.6rem 0;\n  flex-direction: column;\n  background: ",";\n  box-shadow: "," 0px 5px 8px;\n  border: 1px solid ",";\n  border-radius: 4px;\n  overflow: auto;\n"],A("backgroundDarker"),A("black"),A("black")),nu=(0,s.ZP)(Pe).withConfig({displayName:"QueryPicker__Helper"})(["\n  padding: 1rem;\n  text-align: center;\n  opacity: 0.5;\n"]),ru=(0,s.ZP)(Pe).withConfig({displayName:"QueryPicker__Esc"})(["\n  padding: 0 2px;\n  background: ",";\n  border-radius: 2px;\n"],A("foreground")),au=({type:e})=>"query"===e,ou=(0,s.ZP)(Pe).withConfig({displayName:"QueryPicker__Title"})(["\n  padding: 0.6rem 1.2rem 0.4rem;\n  margin-top: 0.6rem;\n  border-top: 1px solid ",";\n  background: ",";\n"],(({theme:e})=>e.color.selection),(({theme:e})=>e.color.black40)),iu=(0,s.ZP)(Pe).withConfig({displayName:"QueryPicker__Description"})(["\n  padding: 0 1.2rem 1rem;\n  color: ",";\n  opacity: 0.7;\n  background: ",";\n"],(({theme:e})=>e.color.foreground),(({theme:e})=>e.color.black40)),lu=({hidePicker:e,queries:t,ref:n})=>{const a=Ue("ArrowDown"),o=Ue("ArrowUp"),i=Ue("Enter"),[l,s]=(0,r.useState)(-1),[c,d]=(0,r.useState)([]),{appendQuery:u}=_a();(0,r.useEffect)((()=>{d((e=>{const t=[...e],n=[];let r=0;for(;t.length;){const e=t.shift();if(void 0===e.queries)n.push({type:"query",id:r,data:e});else{const a=e;n.push({type:"descriptor",id:r,data:a}),t.unshift(...a.queries)}r++}return n})(t))}),[t]);const m=(0,r.useCallback)((t=>{e(),u(t.value,{appendAt:"end"})}),[e]);return(0,r.useEffect)((()=>{if(c.length){if(a){const e=c.find(au)?.id??0,t=c.slice(l+1).find(au)?.id??e;s(t)}if(o){const e=[...c].reverse(),t=e.find(au)?.id??c.length-1,n=[...c].slice(0,l).reverse().find(au)?.id??t;s(n)}}}),[o,a,c]),(0,r.useEffect)((()=>{if(i){const e=c.find((({id:e,type:t})=>e===l&&"query"===t));e&&m(e.data)}}),[l,i,e,t,m]),r.createElement(tu,{ref:n},r.createElement(nu,{_style:"italic",color:"foreground",size:"xs"},"Navigate the list with ",r.createElement(Gd.j,{size:"16px"}),r.createElement(Vd.o,{size:"16px"})," keys, exit with",r.createElement(ru,{_style:"normal",size:"ms",weight:700},"Esc")),c.map((t=>{if("query"===t.type){const n=t.data;return r.createElement(Jd,{active:t.id===l,hidePicker:e,key:t.id,onClick:()=>m(n),onMouseEnter:()=>s(t.id),onMouseLeave:()=>s(-1),query:n})}const{title:n,description:a}=t.data;return r.createElement(r.Fragment,{key:t.id},r.createElement(ou,{color:"foreground",size:"md"},n),r.createElement(iu,{color:"foreground"},a))})))},su=(e,t)=>r.createElement(lu,eu({},e,{ref:t})),cu=(0,r.forwardRef)(su);var du=n(36636);const uu=(0,s.ZP)(Te).withConfig({displayName:"Menu__Wrapper"})(["\n  width: 100%;\n  background: transparent;\n  z-index: 15;\n  padding-right: 1rem;\n\n  .algolia-autocomplete {\n    display: "," !important;\n    flex: 0 1 168px;\n  }\n"],(({_display:e})=>e)),mu=s.ZP.div.withConfig({displayName:"Menu__Separator"})(["\n  flex: 1;\n"]),gu=(0,s.ZP)(Jt.z).withConfig({displayName:"Menu__QueryPickerButton"})(["\n  position: relative;\n  margin: 0 1rem;\n  flex: 0 0 auto;\n\n  ","\n"],(({$firstTimeVisitor:e})=>e&&'&:after {\n    border-radius: 50%;\n    content: "";\n    background: #dc4949;\n    width: 8px;\n    height: 8px;\n    position: absolute;\n    top: -3px;\n    right: -3px;\n  }')),pu=(0,s.ZP)(jd.v).withConfig({displayName:"Menu__MenuIcon"})(["\n  color: ",";\n"],A("foreground")),fu=(0,s.ZP)(ve.x).withConfig({displayName:"Menu__CloseIcon"})(["\n  color: ",";\n"],A("foreground")),hu=(0,s.ZP)(fe).withConfig({displayName:"Menu__SideMenuMenuButton"})(["\n  padding: 0;\n\n  .fade-enter {\n    opacity: 0;\n  }\n\n  .fade-enter-active {\n    opacity: 1;\n    transition: opacity ","ms;\n  }\n\n  .fade-exit {\n    opacity: 0;\n  }\n\n  .fade-exit-active {\n    opacity: 1;\n    transition: opacity ","ms;\n  }\n"],Q.REG,Q.REG),bu=(0,s.ZP)(zt.x).attrs({alignItems:"center"}).withConfig({displayName:"Menu__Key"})(["\n  padding: 0 4px;\n  background: #61647a;\n  border-radius: 2px;\n  font-size: 1.2rem;\n  height: 1.8rem;\n\n  &:not(:last-child) {\n    margin-right: 0.25rem;\n  }\n"]),Eu=(0,s.ZP)(zt.x).attrs({alignItems:"center",gap:"0"}).withConfig({displayName:"Menu__RunShortcut"})(["\n  margin-left: 1.5rem;\n"]),yu=s.ZP.div.withConfig({displayName:"Menu__MenuItems"})(["\n  display: grid;\n  grid-auto-flow: column;\n  align-items: center;\n"]),wu=M.isMacintosh||M.isIOS?"":"Ctrl",vu=()=>{const e=(0,o.I0)(),[t,n]=(0,r.useState)(),a=Ue("Escape"),{consoleConfig:i}=gr(),l=(0,o.v9)(ea.query.getRunning),s=(0,o.v9)(ea.console.getSideMenuOpened),{sm:c}=$e(),{exampleQueriesVisited:d,updateSettings:u}=Ts(),m=(0,r.useCallback)((()=>{e(Lr())}),[e]),g=(0,r.useCallback)((e=>{!d&&e&&u(T.EXAMPLE_QUERIES_VISITED,!0),n(e)}),[]),p=(0,r.useCallback)((()=>{n(!1)}),[]),f=(0,r.useCallback)((()=>{e(Or.toggleSideMenu())}),[e]);return(0,r.useEffect)((()=>{n(!1)}),[a]),(0,r.useEffect)((()=>{!c&&s&&e(Or.toggleSideMenu())}),[e,s,c]),r.createElement(uu,{_display:c?"none":"inline"},r.createElement(mu,null),i.savedQueries&&i.savedQueries.length>0&&r.createElement(ct,{active:t,onToggle:g,trigger:r.createElement(gu,{skin:"secondary",$firstTimeVisitor:!d},r.createElement(Zd.m,{size:"18px"}),r.createElement("span",null,"Example queries"))},r.createElement(cu,{hidePicker:p,queries:i.savedQueries??[]})),r.createElement(mu,null),l.value&&r.createElement(Jt.z,{skin:"error",onClick:m,prefixIcon:r.createElement(Ei.d,{size:"18px"})},"Cancel"),!l.value&&r.createElement(Jt.z,{skin:"success",title:"Ctrl+Enter",onClick:m,prefixIcon:r.createElement(Ud.s,{size:"18px"})},"Run",r.createElement(Eu,null,r.createElement(bu,null,wu),r.createElement(bu,null,r.createElement(Hd.i,{size:"16px"})))),r.createElement(yu,null,r.createElement(du.F,{appId:"QL9L2YL7AQ",apiKey:"2f67aeacbe73ad08a49efb9214ea27f3",indexName:"questdb",placeholder:"Search docs",translations:{button:{buttonText:"Search docs"}},hitComponent:({hit:e,children:t})=>r.createElement("a",{href:e.url,target:"_blank",rel:"noreferrer"},t),navigator:{navigate:({itemUrl:e})=>window.open(e,"_blank")}})),c&&r.createElement(hu,{onClick:f},r.createElement(lt.Z,{classNames:"fade",in:s,timeout:Q.REG},s?r.createElement(fu,{size:"26px"}):r.createElement(pu,{size:"26px"}))))};var Cu=n(26882);const xu=(0,s.ZP)(zt.x).attrs({align:"center"}).withConfig({displayName:"toolbar__Root"})(["\n  gap: 1.5rem;\n  flex-shrink: 0;\n  padding-left: 1.5rem;\n  white-space: nowrap;\n"]),_u=(0,s.ZP)(zt.x).attrs({align:"center"}).withConfig({displayName:"toolbar__Tag"})(["\n  height: 2.8rem;\n  border-radius: 0.8rem;\n  padding: 0 1rem;\n  font-family: ",";\n  font-size: 1.6rem;\n  font-weight: 600;\n"],(({theme:e})=>e.fontMonospace)),ku=(0,s.ZP)(_u).withConfig({displayName:"toolbar__Badge"})(["\n  color: #191a21;\n  background: #bbbbbb;\n\n  ","\n\n  ","\n\n  ","\n"],(({theme:e,instance_rgb:t})=>"r"===t&&`\n    color: ${e.color.foreground};\n    background: #c7072d;\n  `),(({theme:e,instance_rgb:t})=>"g"===t&&`\n    color: ${e.color.foreground};\n    background: #00aa3b;\n  `),(({theme:e,instance_rgb:t})=>"b"===t&&`\n    color: ${e.color.foreground};\n    background: #007aff;\n  `)),Su=(0,s.ZP)(zt.x).attrs({gap:"0.5rem"}).withConfig({displayName:"toolbar__User"})(["\n  background: ",";\n  border-radius: 0.4rem;\n  height: 3rem;\n  padding: 0 1rem;\n  font-weight: 600;\n"],(({theme:e})=>e.color.backgroundLighter)),Tu=s.ZP.span.withConfig({displayName:"toolbar__EnterpriseBadge"})(["\n  padding: 0 4px;\n  background: ",";\n  border-radius: 2px;\n  color: ",";\n\n  &:not(:last-child) {\n    margin-right: 0.25rem;\n  }\n"],(({theme:e})=>e.color.pinkDarker),(({theme:e})=>e.color.foreground)),Nu=()=>{const{quest:e}=(0,r.useContext)(ra),{settings:t}=gr(),{logout:n}=vr(),a=(0,o.v9)(ea.query.getResult),[i,l]=(0,r.useState)(null),s=async()=>{try{const t=await e.query("SELECT instance_name, instance_rgb, current_user",{limit:"0,1"});t.type===N.DQL&&1===t.count&&l({instance_name:t.data[0].instance_name,instance_rgb:t.data[0].instance_rgb,current_user:t.data[0].current_user})}catch(e){return}};return(0,r.useEffect)((()=>{s()}),[]),(0,r.useEffect)((()=>{a&&a.type===N.DDL&&s()}),[a]),r.createElement(xu,null,r.createElement(zt.x,{gap:"0.5rem"},r.createElement(Pe,{color:"foreground"},"Web Console"),"EE"===t["release.type"]&&r.createElement(Ye,{icon:r.createElement(Tu,null,"EE"),tooltip:"QuestDB Enterprise Edition",placement:"bottom"})),r.createElement(zt.x,{gap:"0.5rem"},i&&i.instance_name&&r.createElement(ku,{instance_rgb:i.instance_rgb},i.instance_name),t["acl.enabled"]&&i&&i.current_user&&r.createElement(Su,null,r.createElement(Zn.n,{size:"18px"}),r.createElement(Pe,{color:"foreground"},i.current_user)),Mn(t)&&r.createElement(Jt.z,{onClick:()=>n(),prefixIcon:r.createElement(Cu.R,{size:"18px"}),skin:"secondary"},"Log out")))};var Ou=n(6086);const Ru=(0,s.ZP)(vt).withConfig({displayName:"back-button__Root"})(["\n  margin-left: 0.5rem;\n"]),Iu=({onClick:e,label:t})=>r.createElement(st,{placement:"right",modifiers:[{name:"offset",options:{offset:[5,15]}}],trigger:r.createElement(Ru,{onClick:e},r.createElement(Ou.X,{size:b}))},r.createElement(St,null,t||"Back to the Cloud")),Pu=(0,s.ZP)(zt.x).attrs({align:"center",justifyContent:"space-between"}).withConfig({displayName:"TopBar__Root"})(["\n  width: 100%;\n  height: 4.5rem;\n  background: ",";\n"],(({theme:e})=>e.color.backgroundDarker)),Au=()=>{const e=(0,wa.useLiveQuery)((async()=>({returnTo:(await pa.editor_settings.where("key").equals("returnTo").first())?.value??"",returnToLabel:(await pa.editor_settings.where("key").equals("returnToLabel").first())?.value??""})),[]);return r.createElement(Pu,null,e?.returnTo&&r.createElement(Iu,{label:e?.returnToLabel,onClick:()=>{window.location.href=e.returnTo}}),r.createElement(Nu,null),r.createElement(vu,null))};var Lu=n(44560),Du=n(40015);const Mu=s.ZP.span.withConfig({displayName:"UnreadItemsIcon__Root"})(["\n  position: relative;\n"]),Bu=s.ZP.span.withConfig({displayName:"UnreadItemsIcon__Tick"})(["\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 1.3rem;\n  height: 1.3rem;\n  border-radius: 50%;\n  background-color: ",";\n"],(({theme:e})=>e.color.red)),zu=s.ZP.span.withConfig({displayName:"UnreadItemsIcon__Count"})(["\n  position: absolute;\n  left: 100%;\n  top: -50%;\n  font-size: ",";\n  border-radius: 6px;\n  background-color: #c64242;\n  color: ",";\n  padding: 0.2rem 0.4rem;\n"],(({theme:e})=>e.fontSize.ms),(({theme:e})=>e.color.white)),qu=({icon:e,label:t,tick:n,count:a})=>r.createElement(Mu,null,"number"==typeof a&&a>0&&r.createElement(zu,null,a),e,n&&r.createElement(Bu,null),t&&r.createElement("span",null,t)),Fu=s.ZP.div.withConfig({displayName:"thumbnail__Root"})(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  max-width: 100%;\n  margin: 2rem 0;\n  border-radius: ",";\n  box-shadow: 0 7px 30px -10px ",";\n  overflow: hidden;\n  background: ",";\n\n  svg {\n    position: absolute;\n  }\n"],(({theme:e})=>e.borderRadius),(({theme:e})=>e.color.black),(({theme:e})=>e.color.backgroundLighter)),Zu=s.ZP.img.withConfig({displayName:"thumbnail__ThumbImg"})(["\n  width: 46rem;\n  height: auto;\n\n  ","\n"],(({loaded:e})=>`\n    opacity: ${e?1:0};\n    transition: opacity 0.2s ease-in-out;\n  `)),Uu=({src:e,alt:t,width:n,height:a,containerWidth:o})=>{const[i,l]=(0,r.useState)(!1),s=o,c=s/n*a;return(0,r.useEffect)((()=>{const t=new Image;t.src=e,t.onload=()=>{l(!0)}}),[e]),r.createElement(Fu,null,!i&&r.createElement(Du.a,null),r.createElement(Zu,{src:e,alt:t,width:s,height:c,loaded:i}))};var ju=n(84991);const Hu="10deg",Gu=(0,s.F4)(["\n  0%, 50%, 100% {\n    transform: rotate(0);\n  }\n\n  10%, 20%, 30% {\n    transform: rotate(-",");\n  }\n\n  15%, 25%, 40% {\n    transform: rotate(",");\n  }\n"],Hu,Hu),Vu=(0,s.iv)(["\n  animation: "," 2s infinite ease-in-out;\n  transform-origin: 50% 0;\n"],Gu),Wu=(0,s.ZP)(ju.d).withConfig({displayName:"bell__Bell"})(["\n  color: ",";\n\n  ","\n"],(({theme:e,$unread:t})=>e.color[t?"foreground":"inherit"]),(({$unread:e})=>e&&Vu));function $u(){return $u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$u.apply(this,arguments)}const Qu=s.ZP.div.withConfig({displayName:"News__Loading"})(["\n  display: grid;\n  grid-auto-flow: column;\n  gap: 1rem;\n  justify-self: center;\n  margin-top: 2rem;\n"]),Yu=s.ZP.div.withConfig({displayName:"News__Items"})(["\n  display: grid;\n  width: 100%;\n  overflow: auto;\n"]),Ku=s.ZP.div.withConfig({displayName:"News__Item"})(["\n  display: grid;\n  gap: 1rem;\n  padding: 2rem;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n"],(({theme:e})=>e.color.backgroundLighter)),Xu=s.ZP.h2.withConfig({displayName:"News__Title"})(["\n  margin: 0;\n  font-size: 2rem;\n"]),Ju=(0,s.ZP)(Pe).attrs({color:"foreground"}).withConfig({displayName:"News__NewsText"})(["\n  a {\n    color: ",";\n  }\n\n  h2 {\n    font-size: 1.8rem;\n  }\n\n  h3 {\n    font-size: 1.6rem;\n  }\n\n  p {\n    font-size: ",";\n    line-height: 1.75;\n  }\n\n  code {\n    background-color: ",";\n    padding: 0.2rem 0.4rem;\n    border-radius: 0.2rem;\n  }\n\n  li:not(:last-child) {\n    margin-bottom: 0.5rem;\n  }\n"],(({theme:e})=>e.color.cyan),(({theme:e})=>e.fontSize.lg),(({theme:e})=>e.color.selection)),em=()=>{const e=(0,o.I0)(),{quest:t}=(0,r.useContext)(ra),n=(0,o.v9)(ea.telemetry.getConfig),[a,i]=(0,r.useState)(!1),[l,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(void 0),[u,m]=(0,r.useState)(!1),[g,p]=(0,r.useState)([]),[f,h]=(0,r.useState)(!1),E=(0,o.v9)(ea.console.getActiveSidebar),y=async()=>{i(!0),s(!1);try{const e=await t.getNews({category:"enterprise",telemetryConfig:n});d(e)}catch(e){s(!0)}finally{i(!1)}};return(0,r.useEffect)((()=>(y(),window.addEventListener("focus",y),()=>window.removeEventListener("focus",y))),[]),(0,r.useEffect)((()=>{c&&(async()=>{if(c){const e=await pa.read_notifications.toArray(),t=c.map((e=>e.id)).filter((t=>!e.find((e=>e.newsId===t))));p(t),h(t?.length>0)}})()}),[c]),(0,r.useEffect)((()=>{c&&(u?(async()=>{if(c){const e=c.map((e=>e.id)),t=(await pa.read_notifications.toArray()).map((e=>e.newsId)),n=e.filter((e=>!t.includes(e)));await pa.read_notifications.bulkPut(n.map((e=>({newsId:e}))),{allKeys:!0}),h(!1)}})():p([]))}),[u,c]),(0,r.useEffect)((()=>{m("news"===E)}),[E]),r.createElement(Ze,{mode:"side",title:"QuestDB News",open:u,onOpenChange:async t=>{e(Or.setActiveSidebar(t?"news":void 0))},trigger:r.createElement(Ye,{icon:r.createElement(vt,{"data-hook":"news-panel-button",onClick:()=>m(!u),selected:u},r.createElement(qu,{icon:r.createElement(Wu,{size:b,$unread:f}),tick:f})),placement:"left",tooltip:"QuestDB News"})},r.createElement(Ze.ContentWrapper,{mode:"side"},r.createElement(Yu,null,a&&!c&&r.createElement(Qu,null,r.createElement(Pe,{color:"foreground"},"Loading news..."),r.createElement(Du.a,null)),l&&r.createElement(Qu,null,r.createElement(Pe,{color:"red"},"Error loading news. Please try again shortly.")),(!a||c)&&!l&&c&&c.map(((e,t)=>r.createElement(Ku,{key:`${t}-${e.title}`,unread:void 0!==g.find((t=>e.id===t))},r.createElement(Xu,null,e.title),r.createElement(Pe,{color:"gray2"},e.date),e.thumbnail&&e.thumbnail.length>0&&e.thumbnail[0].thumbnails.large&&r.createElement(Uu,{containerWidth:460,src:e.thumbnail[0].thumbnails.large.url,alt:`${e.title} thumbnail`,width:e.thumbnail[0].thumbnails.large.width,height:e.thumbnail[0].thumbnails.large.height}),r.createElement(Ju,null,r.createElement(Lu.D,{components:{a:({node:e,children:t,...n})=>r.createElement("a",$u({},n.href?.startsWith("http")?{target:"_blank",rel:"noopener noreferrer"}:{},n),t)}},e.body))))))))},tm=(0,s.ZP)(Bt.i).withConfig({displayName:"CreateTableDialog__DisabledTableIcon"})(["\n  opacity: 0.3;\n"]),nm=()=>{const[e,t]=(0,r.useState)(void 0),n=(0,o.I0)(),a=(0,o.v9)(ea.query.getTables),i=(0,o.v9)(ea.console.getActiveSidebar),{consoleConfig:l}=gr(),{appendQuery:s}=_a();return(0,r.useEffect)((()=>{t("create"===i?"add":void 0)}),[i]),(0,r.useEffect)((()=>{void 0!==e&&n(Or.setActiveSidebar("create"))}),[e]),l.readOnly?r.createElement(Ye,{icon:r.createElement(tm,{size:b,"data-hook":"create-table-panel-button"}),tooltip:"To use this feature, turn off read-only mode in the configuration file",placement:"left"}):r.createElement(Xc,{action:"add",isEditLocked:!1,hasWalSetting:!0,walEnabled:!1,name:"",partitionBy:"NONE",schema:[],tables:a,timestamp:"",onOpenChange:e=>t(e),open:void 0!==e,onSchemaChange:e=>{const{name:t,partitionBy:r,timestamp:a,schemaColumns:o,walEnabled:i}=e,l=gs({name:t,partitionBy:r,timestamp:a,walEnabled:"true"===i,schemaColumns:o.map((e=>({column:e.name,type:e.type}))),dedup:!1});s(l,{appendAt:"end"}),n(Lr())},trigger:r.createElement(Ye,{icon:r.createElement(vt,{"data-hook":"create-table-panel-button",selected:void 0!==e,onClick:()=>{n(Or.setActiveSidebar(e?void 0:"create"))}},r.createElement(Bt.i,{size:b})),placement:"left",tooltip:"Create table"}),ctaText:"Create"})};var rm=n(85998),am=n(50364),om=n(52368),im=n(22709),lm=n(52067),sm=n(47910),cm=n(27545),dm=n(54755);const um=s.ZP.div.withConfig({displayName:"Shortcuts__Wrapper"})(["\n  display: flex;\n  max-height: 650px;\n  width: 300px;\n  max-width: 100vw;\n  flex-direction: column;\n  background: ",";\n  box-shadow: "," 0px 5px 8px;\n  border: 1px solid ",";\n  border-radius: 4px;\n  overflow: auto;\n"],A("backgroundDarker"),A("black"),A("black")),mm=s.ZP.div.withConfig({displayName:"Shortcuts__List"})(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]),gm=(0,s.ZP)(Pe).withConfig({displayName:"Shortcuts__ListTitle"})(["\n  padding: 0.6rem 1.2rem;\n  margin-bottom: 0.6rem;\n  border-top: 1px solid ",";\n  background: ",";\n  width: 100%;\n"],(({theme:e})=>e.color.selection),(({theme:e})=>e.color.black40)),pm=s.ZP.div.withConfig({displayName:"Shortcuts__Item"})(["\n  display: flex;\n  align-items: center;\n  padding: 0.6rem 1.2rem;\n\n  &:not(:last-child) {\n    border-bottom: 1px solid ",";\n  }\n"],A("background")),fm=s.ZP.div.withConfig({displayName:"Shortcuts__ItemKeys"})(["\n  margin-left: auto;\n"]),hm=s.ZP.span.withConfig({displayName:"Shortcuts__KeyGroup"})(["\n  color: ",';\n\n  &:not(:last-child):after {\n    content: "or";\n    padding: 0 0.5rem;\n  }\n'],A("gray2")),bm=s.ZP.span.withConfig({displayName:"Shortcuts__Key"})(["\n  padding: 0 4px;\n  background: ",";\n  border-radius: 2px;\n  color: ",";\n\n  &:not(:last-child) {\n    margin-right: 0.25rem;\n  }\n"],A("gray2"),A("black")),Em=M.isMacintosh||M.isIOS?"":"Ctrl",ym=M.isMacintosh||M.isIOS?"":"Alt",wm=[{keys:[[ym,"T"]],title:"Add new tab"},{keys:[[ym,Em,""]],title:"Add cursor above"},{keys:[[ym,Em,""]],title:"Add cursor below"},{keys:[["",ym,""]],title:"Copy line up"},{keys:[["",ym,""]],title:"Copy line down"},{keys:[[ym,""]],title:"Move line up"},{keys:[[ym,""]],title:"Move line down"},{keys:[["",ym,"F"]],title:"Format document"},{keys:[["F1"]],title:"Command palette"}],vm=[{keys:[["F9"],[Em,"Enter"]],title:"Run query"},{keys:[["F2"]],title:"Focus results grid"},{keys:[[Em,"K"]],title:"Clear all notifications"}],Cm=({list:e,title:t})=>r.createElement(mm,null,r.createElement(gm,null,r.createElement(Pe,{color:"gray2"},t)),e.map(((e,t)=>r.createElement(pm,{key:`shortcut-${t}`},r.createElement(Pe,{color:"white"},e.title),r.createElement(fm,null,e.keys.map(((e,t)=>r.createElement(hm,{key:`keyGroup-${t}`},e.map(((e,t)=>r.createElement(bm,{key:`shortcutItem-key-${e}-${t}`},r.createElement(Pe,{color:"black",size:"xs",weight:600},e)))))))))))),xm=()=>r.createElement(um,null,r.createElement(Cm,{list:vm,title:"Global shortcuts"}),r.createElement(Cm,{list:wm,title:"SQL editor shortcuts"}));function _m(){return _m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_m.apply(this,arguments)}const km=(0,s.ZP)(vt).withConfig({displayName:"help__HelpButton"})(["\n  padding: 0;\n"]),Sm=(0,s.ZP)(pl.h.Content).withConfig({displayName:"help__DropdownMenuContent"})(["\n  background: ",";\n"],(({theme:e})=>e.color.backgroundDarker)),Tm=(0,s.ZP)(pl.h.Item).withConfig({displayName:"help__DropdownMenuItem"})(["\n  color: ",";\n"],(({theme:e})=>e.color.foreground)),Nm=(0,s.ZP)(zt.x).attrs({justifyContent:"center"}).withConfig({displayName:"help__TooltipWrapper"})(["\n  width: 100%;\n  height: 100%;\n"]),Om=({href:e,text:t,...n})=>r.createElement(rt,_m({color:"foreground",hoverColor:"foreground",href:e,rel:"noreferrer",target:"_blank"},n),t),Rm=()=>{const{quest:e}=(0,r.useContext)(ra),t=(0,o.v9)(ea.telemetry.getConfig),[n,a]=(0,r.useState)(!1),i=(0,r.useCallback)((e=>{a(e)}),[]),[l,s]=(0,r.useState)(!1);return r.createElement(r.Fragment,null,r.createElement(pl.h.Root,{modal:!1,onOpenChange:s},r.createElement(pl.h.Trigger,{asChild:!0},r.createElement(km,_m({},l&&{selected:!0},{"data-hook":"help-panel-button"}),r.createElement(Ye,{icon:r.createElement(Nm,null,r.createElement(rm.H,{size:b})),placement:"left",tooltip:"Help"}))),r.createElement(pl.h.Portal,null,r.createElement(Sm,null,r.createElement(Tm,{onSelect:e=>e.preventDefault()},r.createElement(am.f,{size:"18px"}),r.createElement(dm.o,{withEmailInput:!0,title:"Contact us",subtitle:"Let us know your thoughts",trigger:({setOpen:e})=>r.createElement(Pe,{color:"foreground",onClick:()=>e(!0)},"Contact us"),onSubmit:async({email:n,message:r})=>{try{await e.sendFeedback({email:n,message:r,telemetryConfig:t}),gt.success("Thank you for your feedback! Our team will review it shortly.")}catch(e){throw gt.error("Something went wrong. Please try again later."),e}}})),r.createElement(Tm,null,r.createElement(im.j,{size:"18px"}),r.createElement(Om,{"data-hook":"help-link-slack",href:"https://slack.questdb.io/",text:"Slack community"})),r.createElement(Tm,null,r.createElement(lm.o,{size:"18px"}),r.createElement(Om,{"data-hook":"help-link-community",href:"https://community.questdb.io/",text:"Public forum"})),r.createElement(Tm,null,r.createElement(sm.r,{size:"18px"}),r.createElement(Om,{"data-hook":"help-link-stackoverflow",href:"https://stackoverflow.com/tags/questdb",text:"Stack Overflow"})),r.createElement(Tm,null,r.createElement(rm.H,{size:"18px"}),r.createElement(Om,{"data-hook":"help-link-web-console-docs",href:"https://questdb.io/docs/develop/web-console/",text:"Web Console Docs"})),r.createElement(Tm,{onClick:()=>i(!0)},r.createElement(om.m,{size:"18px"}),r.createElement(Pe,{color:"foreground"},"Shortcuts")),r.createElement(Tm,null,r.createElement(cm.E,{size:"18px"}),r.createElement(Om,{href:"https://github.com/questdb/ui/commit/2933767",text:"Commit id: 2933767"}))))),r.createElement(ct,{active:n,onToggle:i,trigger:r.createElement(r.Fragment,null)},r.createElement(xm,null)))};var Im=n(94937);const Pm=(0,s.ZP)(zt.x).attrs({align:"center",justifyContent:"space-between"}).withConfig({displayName:"warning__WarningRoot"})(["\n  width: 100%;\n  height: 4rem;\n  background: #f8a24d;\n  color: #000;\n"]),Am=(0,s.ZP)(zt.x).attrs({gap:"0.5rem"}).withConfig({displayName:"warning__Content"})(["\n  padding: 0 1.5rem;\n"]),Lm=(0,s.ZP)(zt.x).attrs({align:"center",justifyContent:"center"}).withConfig({displayName:"warning__CloseButton"})(["\n  border: 0;\n  cursor: pointer;\n  width: 4.5rem;\n  height: 4.5rem;\n"]),Dm=s.ZP.span.withConfig({displayName:"warning__WarningText"})(["\n  font-weight: 600;\n"]),Mm=s.ZP.a.withConfig({displayName:"warning__WorkaroundLink"})(["\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  margin-left: 0.5rem;\n  color: #000;\n\n  &:hover {\n    text-decoration: none;\n  }\n"]),Bm=(0,s.ZP)(ve.x).withConfig({displayName:"warning__CloseIcon"})(["\n  color: #000;\n"]),zm=()=>{const{warnings:e}=gr(),[t,n]=(0,r.useState)([]);return(0,r.useEffect)((()=>{e&&e.length>0&&n(e.map((e=>e.tag)))}),[e]),0===t.length?null:r.createElement(zt.x,{flexDirection:"column",gap:"0.1rem",style:{width:"100%"},"data-hook":"warnings"},e.filter((e=>t.includes(e.tag))).map(((e,a)=>r.createElement(Pm,{key:a,"data-hook":"warning"},r.createElement(Am,null,r.createElement(Im.u,{size:"20px"}),"Warning:"," ",r.createElement(Dm,{"data-hook":"warning-text"},e.warning),Ta[e.tag]&&r.createElement(Mm,{href:Ta[e.tag].link,rel:"noreferrer noopener",target:"_blank","data-hook":"warning-workaround-link"},r.createElement(ln.d,{size:"16px"}),Ta[e.tag].title)),r.createElement(Lm,{"data-hook":"warning-close-button",onClick:()=>n(t.filter((t=>t!==e.tag)))},r.createElement(Bm,{size:"20px"}))))))},qm=s.ZP.div.withConfig({displayName:"Layout__Page"})(["\n  display: flex;\n  width: 100%;\n  height: 100%;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n  font-size: 1.4rem;\n  background: #21222c;\n\n  ::selection {\n    background: #44475a;\n  }\n"]),Fm=s.ZP.div.withConfig({displayName:"Layout__Root"})(["\n  display: flex;\n  width: 100%;\n  flex: 1;\n  overflow-y: auto;\n"]),Zm=s.ZP.div.withConfig({displayName:"Layout__Main"})(["\n  flex: 1;\n  display: flex;\n  width: ",";\n"],(({sideOpened:e})=>e?"calc(100% - 50rem - 4.5rem)":"calc(100% - 4.5rem)")),Um=s.ZP.div.withConfig({displayName:"Layout__Drawer"})(["\n  background: ",";\n"],(({theme:e})=>e.color.backgroundDarker)),jm=()=>{const e=(0,o.v9)(ea.console.getActiveSidebar);return r.createElement(xa,null,r.createElement(Au,null),r.createElement(zm,null),r.createElement(Fm,null,r.createElement(Zm,{sideOpened:void 0!==e},r.createElement(qm,null,r.createElement(Bd,null))),r.createElement(Um,{id:"side-panel-right"}),r.createElement(Ys,{align:"top"},r.createElement(Rm,null),r.createElement(em,null),r.createElement(nm,null))),r.createElement(Fd,null),r.createElement(zo,null))},Hm=(0,l.k)(),Gm=(0,i.MT)(Jr,(0,i.qC)((0,i.md)(Hm)));Hm.run(Qr);const Vm=Y("fade-reg",Q.REG),Wm=Y("fade-slow",Q.SLOW);a.render(r.createElement(s.f6,{theme:mt},r.createElement(We,null,r.createElement(o.zt,{store:Gm},r.createElement(mr,null,r.createElement(Sa,null,r.createElement(wr,null,r.createElement(aa,null,r.createElement(m,null),a.createPortal(r.createElement(pt,null),document.body),r.createElement(Ss,null,r.createElement(Wm,null),r.createElement(Vm,null),r.createElement(jm,null))))))))),document.getElementById("root"))},94349:e=>{e.exports={arrayEquals:function(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!e[n].equals(t[n]))return!1}else if(e[n]!==t[n])return!1;return!0}}},88344:()=>{},32019:()=>{}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=r,o.amdO={},e=[],o.O=(t,n,r,a)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,r,a]=e[d],l=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(l=!1,a<i&&(i=a));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,r,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);o.r(a);var i={};t=t||[null,n({}),n([]),n(n)];for(var l=2&r&&e;"object"==typeof l&&!~t.indexOf(l);l=n(l))Object.getOwnPropertyNames(l).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,o.d(a,i),a},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={87:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,l,s]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(s)var d=s(o)}for(t&&t(n);c<i.length;c++)a=i[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},n=self.webpackChunk_questdb_web_console=self.webpackChunk_questdb_web_console||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o.nc=void 0;var i=o.O(void 0,[736],(()=>o(79788)));i=o.O(i)})();